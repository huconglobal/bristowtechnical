webpackJsonp([2],{2:function(t,e,n){"use strict";(function(t){e.a={init:function(){var e=t("#hierarchy-modal");e.on("show.bs.modal",function(e){var n=t(e.relatedTarget),i=n.data("entity"),r=n.data("entity-id");t(".modal-body",this).html(t(".hidden .loader").clone()).load(locale.baseurl+"/arch/ajax/"+i+"/hierarchy/"+r)}),e.on("click",".hierarchy-btn",function(){var e=t(this).parent().children("ul"),n="block"===e.css("display")?"plus":"minus";t("i",this).attr("class","fa fa-"+n+"-square-o"),e.fadeToggle()}),e.on("click","#collapse-all",function(){t("ul",e).not("ul:first",e).fadeOut(),t(".hierarchy-btn i").attr("class","fa fa-plus-square-o")}),e.on("click","#expand-all",function(){t("ul",e).not("ul:first",e).fadeIn(),t(".hierarchy-btn i").attr("class","fa fa-minus-square-o")}),t(document).on("click",".block-event-list .event-btn",function(){t(".block-event-list .event-btn").removeClass("active"),t(this).addClass("active")})},removeItem:function(t,e){t.parents("tr").fadeOut(function(){this.remove(),e()})},initTextareaPopouts:function(){t(document).on("focus","[data-toggle=popout]",function(){var e=t(this),n=e.offset(),i=t("body"),r=i.outerWidth(),s=i.outerHeight(),o=e.outerWidth(),a=e.outerHeight(),l=r<=o+150?r:o+150,u=s<=a+150?s:a+150,c=e.css("font-size"),d=t("<textarea>").attr("class",e.attr("class")).addClass("popout").html(e.val()).css({position:"absolute",top:n.top,left:n.left,width:o,height:a,zIndex:1e3,fontSize:c}).keydown(function(t){if(9===(t.keyCode||t.which)){t.preventDefault();var n=e.closest("form").find(":input"),i=t.shiftKey?-1:1;n.eq(n.index(e)+i).focus()}}).blur(function(){return e.val(d.val()),d.animate({width:o,height:a,top:"+=75",left:"+=75"},200,function(){d.remove()})}).appendTo(i).animate({width:l,height:u,top:"-=75",left:"-=75"},200).focus();return!0})}}}).call(e,n(0))},203:function(t,e,n){t.exports=n(204)},204:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),function(t){var e=n(9),i=n.n(e),r=n(136),s=n.n(r),o=n(6),a=n.n(o),l=n(4),u=n.n(l),c=n(2),d=n(3),f=n(208),h=(n.n(f),n(210)),p=(n.n(h),n(212)),m=(n.n(p),n(214));n.n(m);function g(e){var n=t("#checkitems-table").find("div.has-error"),i=e.find("div.has-error"),r=i.first();if(i.length===n.length){var o=n.first();t(".editable-item",o).addClass("mce-edit-focus").focus()}else r.hasClass("wysiwyg-editor")?(t(".mce-edit-area",r).focus(),s.a.EditorManager.get(t("textarea",r).attr("id")).focus()):t("input",r).focus()}function v(t,e){var n='<div class="option">';return"danger"!==t.type&&"warning"!==t.type||(n+='<i class="text-'+t.type+' fas fa-exclamation-triangle"></i>'),""+n+e(t.name)+"</div>"}function y(t,e,n,i,r){t.addButton(e,{icon:i,classes:e,tooltip:r,onclick:function(){var e="mceToggleFormat";"bullist"===n?e="InsertUnorderedList":"numlist"===n&&(e="InsertOrderedList"),t.execCommand(e,!1,n);var i=this;t.formatter.formatChanged(n,function(t){i.active(t)})},onpostrender:function(){var e=this;t.on("init",function(){t.formatter.formatChanged(n,function(t){e.active(t)})})}})}function b(t,e){t.addButton(e,{type:"menubutton",classes:e,tooltip:"Text border",icon:"fa fa-square-o",menu:[{text:"1px border",classes:"text-border-item",onclick:function(){return t.execCommand("mceToggleFormat",!1,"textBorder1")}},{text:"2px border",classes:"text-border-item",onclick:function(){return t.execCommand("mceToggleFormat",!1,"textBorder2")}},{text:"3px border",classes:"text-border-item",onclick:function(){return t.execCommand("mceToggleFormat",!1,"textBorder3")}}]})}function x(e){s.a.init({target:e,plugins:"lists paste nonbreaking",nonbreaking_force_tab:!0,toolbar:"bog boy bor wob | bullist_custom numlist_custom | h4 bold_custom | text-border",height:200,branding:!1,menubar:!1,statusbar:!1,paste_as_text:!0,content_style:"",content_css:"/css/architect.css",formats:{blackOnGreen:{inline:"span",classes:"bog"},blackOnYellow:{inline:"span",classes:"boy"},blackOnRed:{inline:"span",classes:"bor"},whiteOnBlack:{inline:"span",classes:"wob"},header:{block:"h4"},textBorder1:{inline:"span",classes:"text-border-1"},textBorder2:{inline:"span",classes:"text-border-2"},textBorder3:{inline:"span",classes:"text-border-3"}},setup:function(t){y(t,"bog","blackOnGreen","fas fa-font","White on Green"),y(t,"boy","blackOnYellow","fas fa-font","White on Yellow"),y(t,"bor","blackOnRed","fas fa-font","White on Red"),y(t,"wob","whiteOnBlack","fas fa-font","White on Black"),y(t,"bullist_custom","bullist","fas fa-list-ul","Unordered List"),y(t,"numlist_custom","numlist","fas fa-list-ol","Ordered List"),y(t,"h4","header","fas fa-heading","Heading"),y(t,"bold_custom","bold","fas fa-bold","Bold"),b(t,"text-border")},init_instance_callback:function(e){e.on("blur",function(){t("#checklist-form").parsley().validate({group:this.id,force:!1})}).on("NodeChange",function(){t("#checklist-form").parsley().validate({group:this.id,force:!1})})}})}function w(e){s.a.init({target:e,inline:!0,plugins:"lists paste nonbreaking",nonbreaking_force_tab:!0,hidden_input:!1,toolbar:"bog boy bor wob | bullist_custom numlist_custom | h4 bold_custom | text-border",menubar:!1,paste_as_text:!0,content_css:"/css/architect.css",formats:{blackOnGreen:{inline:"span",classes:"bog"},blackOnYellow:{inline:"span",classes:"boy"},blackOnRed:{inline:"span",classes:"bor"},whiteOnBlack:{inline:"span",classes:"wob"},header:{block:"h4"},textBorder1:{inline:"span",classes:"text-border-1"},textBorder2:{inline:"span",classes:"text-border-2"},textBorder3:{inline:"span",classes:"text-border-3"}},setup:function(t){y(t,"bog","blackOnGreen","fas fa-font","White on Green"),y(t,"boy","blackOnYellow","fas fa-font","White on Yellow"),y(t,"bor","blackOnRed","fas fa-font","White on Red"),y(t,"wob","whiteOnBlack","fas fa-font","White on Black"),y(t,"bullist_custom","bullist","fas fa-list-ul","Unordered List"),y(t,"numlist_custom","numlist","fas fa-list-ol","Ordered List"),y(t,"h4","header","fas fa-heading","Heading"),y(t,"bold_custom","bold","fas fa-bold","Bold"),b(t,"text-border")},init_instance_callback:function(e){e.on("NodeChange KeyUp",function(){var n=t(this.bodyElement).next("input"),i=e.getContent(),r=n.val();0===i.length&&0===r.length||(n.val(i),n.parsley().validate())})}})}function _(){t("#checkitem-list > tr").each(function(e){var n=t(this).attr("class"),i=t('[id="checkitems['+(e+1)+'][description]"]').get(0);if(i.innerHTML=i.nextElementSibling.value,w(i),"checkitem"===n||"generic"===n){var r=t('[id="checkitems['+(e+1)+'][option]"]').get(0);r.innerHTML=r.nextElementSibling.value,w(r)}})}function C(){s.a.remove("div");var e=1,n=t("#checkitems-table tbody > tr");n.each(function(n){var i=n+1,r=t(this).attr("class");"checkitem"===r&&(t("td:first-child input",this).attr("value",e),e+=1),t("input, select",this).each(function(){var e=t(this).data("name");t(this).attr("name","checkitems["+i+"]["+e+"]"),"description"!==e&&"option"!==e||t(this).attr("data-parsley-group","checkitems["+i+"]["+e+"]")}),t(".editable-item[data-name=description]",this).attr("id","checkitems["+i+"][description]"),"checkitem"!==r&&"generic"!==r||t(".editable-item[data-name=option]",this).attr("id","checkitems["+i+"][option]")}),t(".box-footer-add-btns").toggle(n.length>=5),t("#checkitems-table tbody > tr"),_()}c.a.init(),a.a.addMessages(locale.locale,locale.parsley),a.a.setLocale(locale.locale),a.a.options=t.extend(a.a.options,{excluded:'input[type=button], input[type=submit], input[type=reset], input[data-name="checktype_id"]',errorClass:"has-error",errorsWrapper:'<ul class="help-block list-unstyled"></ul>',errorsContainer:function(t){return t.$element.parent()},classHandler:function(t){return t.$element.parent()}}),t(function(){t("#checkitems-table input[type=checkbox]").iCheck({checkboxClass:"icheckbox_square-blue"}),t("#checklist-form").parsley().on("form:validate",function(){s.a.triggerSave()}).on("field:success",function(){var t=this.$element;t.is("#description, #indications, #confirm, #footer")&&t.next(".help-block").remove()}),t("#checkitem-list").on("focusout",".editable-item",function(e){t(e.relatedTarget).hasClass("mce-text-border")||t("#checklist-form").parsley().validate({group:t(this).attr("id"),force:!1})}),x(t("#checklist-description").get(0)),x(t("#checklist-indications").get(0)),x(t("#checklist-confirm").get(0)),x(t("#checklist-footer").get(0)),_(),u.a.create(t("#checkitem-list").get(0),{handle:".sort-handle",animation:150,onSort:C}),t(document).on("click",".remove-item",function(){t(this).parents("tr").find(".editable-item").each(function(){s.a.EditorManager.execCommand("mceRemoveEditor",!0,t(this).attr("id"))}),c.a.removeItem(t(this),C)}),t(".add-checkitem-btn, .add-intermission-btn, .add-generic-btn").click(function(e){t("#checkitems-error").hide();var n=t(e.currentTarget).data("checktype"),i=t("#templates ."+n).clone(),r=t("#checkitems-table tbody"),s=t("> tr",r).not(".intermission, .generic").length+1,o=t("> tr",r).length+1;(t("[name=display_order]",i).attr("value",s),t("input, select",i).each(function(){var e=t(this).data("name");t(this).attr("name","checkitems["+o+"]["+e+"]"),"description"!==e&&"option"!==e||(t(".editable-item[data-name="+e+"]",i).attr("id","checkitems["+o+"]["+e+"]"),t(this).attr("data-parsley-group","checkitems["+o+"]["+e+"]")),t(".box-footer-add-btns").toggle(o>=5)}),r.append(i),t("tr:last input[type=checkbox]",r).iCheck({checkboxClass:"icheckbox_square-blue"}),w(t('[name="checkitems['+o+'][description]"]').prev().get(0)),"checkitem"===n||"generic"===n)&&w(t('[name="checkitems['+o+'][option]"]').prev().get(0))}),t("#docrevision-select").selectize({allowEmptyOption:!0,render:{item:function(t,e){return"<div>"+e(t.optgroup?t.optgroup+" - "+t.text:t.text)+"</div>"}}}).on("change",function(){var e=t("#auto-creation");t(this).val()?(t(this).parsley().reset(),e.collapse("show")):(e.collapse("hide"),t("input",e).val(""),t("#type-select")[0].selectize.setValue(""))}),t("#type-select").selectize({options:helix.eventtypes,items:[helix.eventtype||null],render:{item:v,option:v}}),t("#preview").on("click",function(){i.a.clear(),t(".modal-body",this).html(t(".loader").clone());var e=t("#checklist-form");if(!e.parsley().validate())return g(e),!1;if(!t("#checkitems-table tbody tr").length)return t("#checkitems-error").fadeIn(),!1;t("#checklist-modal").modal("show");var n=e.serialize().replace("_method=PUT","_method=POST");return t.ajax({url:helix.checklistPreviewUrl,method:"POST",data:n}).done(function(e){t("#checklist-modal .modal-body").html(e);var n=t("#checklist-modal .modal-body .checkitems");n.length&&setTimeout(function(){d.a.insertShuttleAndSilentElements(n),d.a.postRender(n)},200)})}).on("hidden.bs.modal",function(){t(".modal-body",this).html("")}),t("#save").click(function(){if(t(this).hasClass("disabled"))return!1;var e=t("#checklist-form");return e.parsley().validate()?t("#checkitems-table tbody tr").length?(t(this).addClass("disabled"),e.submit()):(t("#checkitems-error").fadeIn(),!1):(g(e),!1)})})}.call(e,n(0))},208:function(t,e,n){n(209)},209:function(t,e){!function(){"use strict";var t=function(e){var n=e,i=function(){return n};return{get:i,set:function(t){n=t},clone:function(){return t(i())}}},e=tinymce.util.Tools.resolve("tinymce.PluginManager"),n=function(t){return!(!/(^|[ ,])powerpaste([, ]|$)/.test(t.settings.plugins)||!e.get("powerpaste")||(void 0!==window.console&&window.console.log&&window.console.log("PowerPaste is incompatible with Paste plugin! Remove 'paste' from the 'plugins' option."),0))},i=function(t,e){return{clipboard:t,quirks:e}},r=function(t,e,n,i){return t.fire("PastePreProcess",{content:e,internal:n,wordContent:i})},s=function(t,e,n,i){return t.fire("PastePostProcess",{node:e,internal:n,wordContent:i})},o=function(t,e){return t.fire("PastePlainTextToggle",{state:e})},a=function(t,e){return t.fire("paste",{ieFake:e})},l={shouldPlainTextInform:function(t){return t.getParam("paste_plaintext_inform",!0)},shouldBlockDrop:function(t){return t.getParam("paste_block_drop",!1)},shouldPasteDataImages:function(t){return t.getParam("paste_data_images",!1)},shouldFilterDrop:function(t){return t.getParam("paste_filter_drop",!0)},getPreProcess:function(t){return t.getParam("paste_preprocess")},getPostProcess:function(t){return t.getParam("paste_postprocess")},getWebkitStyles:function(t){return t.getParam("paste_webkit_styles")},shouldRemoveWebKitStyles:function(t){return t.getParam("paste_remove_styles_if_webkit",!0)},shouldMergeFormats:function(t){return t.getParam("paste_merge_formats",!0)},isSmartPasteEnabled:function(t){return t.getParam("smart_paste",!0)},isPasteAsTextEnabled:function(t){return t.getParam("paste_as_text",!1)},getRetainStyleProps:function(t){return t.getParam("paste_retain_style_properties")},getWordValidElements:function(t){return t.getParam("paste_word_valid_elements","-strong/b,-em/i,-u,-span,-p,-ol,-ul,-li,-h1,-h2,-h3,-h4,-h5,-h6,-p/div,-a[href|name],sub,sup,strike,br,del,table[width],tr,td[colspan|rowspan|width],th[colspan|rowspan|width],thead,tfoot,tbody")},shouldConvertWordFakeLists:function(t){return t.getParam("paste_convert_word_fake_lists",!0)},shouldUseDefaultFilters:function(t){return t.getParam("paste_enable_default_filters",!0)}},u=function(t,e,n){"text"===e.pasteFormat.get()?(e.pasteFormat.set("html"),o(t,!1)):(e.pasteFormat.set("text"),o(t,!0),function(t,e){return!1===e.get()&&l.shouldPlainTextInform(t)}(t,n)&&(function(t,e){t.notificationManager.open({text:t.translate(e),type:"info"})}(t,"Paste is now in plain text mode. Contents will now be pasted as plain text until you toggle this option off."),n.set(!0))),t.focus()},c=function(t,e,n){t.addCommand("mceTogglePlainTextPaste",function(){u(t,e,n)}),t.addCommand("mceInsertClipboardContent",function(t,n){n.content&&e.pasteHtml(n.content,n.internal),n.text&&e.pasteText(n.text)})},d=tinymce.util.Tools.resolve("tinymce.Env"),f=tinymce.util.Tools.resolve("tinymce.util.Delay"),h=tinymce.util.Tools.resolve("tinymce.util.Tools"),p=tinymce.util.Tools.resolve("tinymce.util.VK"),m="\x3c!-- x-tinymce/html --\x3e",g={mark:function(t){return m+t},unmark:function(t){return t.replace(m,"")},isMarked:function(t){return-1!==t.indexOf(m)},internalHtmlMime:function(){return"x-tinymce/html"}},v=tinymce.util.Tools.resolve("tinymce.html.Entities"),y=function(t){return t.replace(/\r?\n/g,"<br>")},b=function(t,e,n){var i=t.split(/\n\n/),r=function(t,e){var n,i=[],r="<"+t;if("object"==typeof e){for(n in e)e.hasOwnProperty(n)&&i.push(n+'="'+v.encodeAllRaw(e[n])+'"');i.length&&(r+=" "+i.join(" "))}return r+">"}(e,n),s="</"+e+">",o=h.map(i,function(t){return t.split(/\n/).join("<br />")});return 1===o.length?o[0]:h.map(o,function(t){return r+t+s}).join("")},x={isPlainText:function(t){return!/<(?:\/?(?!(?:div|p|br|span)>)\w+|(?:(?!(?:span style="white-space:\s?pre;?">)|br\s?\/>))\w+\s[^>]+)>/i.test(t)},convert:function(t,e,n){return e?b(t,e,n):y(t)},toBRs:y,toBlockElements:b},w=tinymce.util.Tools.resolve("tinymce.html.DomParser"),_=tinymce.util.Tools.resolve("tinymce.html.Node"),C=tinymce.util.Tools.resolve("tinymce.html.Schema"),k=tinymce.util.Tools.resolve("tinymce.html.Serializer");function E(t,e){return h.each(e,function(e){t=e.constructor===RegExp?t.replace(e,""):t.replace(e[0],e[1])}),t}var R={filter:E,innerText:function(t){var e=C(),n=w({},e),i="",r=e.getShortEndedElements(),s=h.makeMap("script noscript style textarea video audio iframe object"," "),o=e.getBlockElements();return t=E(t,[/<!\[[^\]]+\]>/g]),function t(e){var n=e.name,a=e;if("br"!==n){if("wbr"!==n)if(r[n]&&(i+=" "),s[n])i+=" ";else{if(3===e.type&&(i+=e.value),!e.shortEnded&&(e=e.firstChild))do{t(e)}while(e=e.next);o[n]&&a.next&&(i+="\n","p"===n&&(i+="\n"))}}else i+="\n"}(n.parse(t)),i},trimHtml:function(t){return t=E(t,[/^[\s\S]*<body[^>]*>\s*|\s*<\/body[^>]*>[\s\S]*$/gi,/<!--StartFragment-->|<!--EndFragment-->/g,[/( ?)<span class="Apple-converted-space">\u00a0<\/span>( ?)/g,function(t,e,n){return e||n?" ":" "}],/<br class="Apple-interchange-newline">/g,/<br>$/i])},createIdGenerator:function(t){var e=0;return function(){return t+e++}},isMsEdge:function(){return-1!==navigator.userAgent.indexOf(" Edge/")}};function T(t){var e,n;return n=[/^[IVXLMCD]{1,2}\.[ \u00a0]/,/^[ivxlmcd]{1,2}\.[ \u00a0]/,/^[a-z]{1,2}[\.\)][ \u00a0]/,/^[A-Z]{1,2}[\.\)][ \u00a0]/,/^[0-9]+\.[ \u00a0]/,/^[\u3007\u4e00\u4e8c\u4e09\u56db\u4e94\u516d\u4e03\u516b\u4e5d]+\.[ \u00a0]/,/^[\u58f1\u5f10\u53c2\u56db\u4f0d\u516d\u4e03\u516b\u4e5d\u62fe]+\.[ \u00a0]/],t=t.replace(/^[\u00a0 ]+/,""),h.each(n,function(n){if(n.test(t))return e=!0,!1}),e}function S(t){var e,n,i=1;function r(t){var e="";if(3===t.type)return t.value;if(t=t.firstChild)do{e+=r(t)}while(t=t.next);return e}function s(t,e){if(3===t.type&&e.test(t.value))return t.value=t.value.replace(e,""),!1;if(t=t.firstChild)do{if(!s(t,e))return!1}while(t=t.next);return!0}function o(t,r,o){var a=t._listLevel||i;a!==i&&(a<i?e&&(e=e.parent.parent):(n=e,e=null)),e&&e.name===r?e.append(t):(n=n||e,e=new _(r,1),o>1&&e.attr("start",""+o),t.wrap(e)),t.name="li",a>i&&n&&n.lastChild.append(e),i=a,function t(e){if(e._listIgnore)e.remove();else if(e=e.firstChild)do{t(e)}while(e=e.next)}(t),s(t,/^\u00a0+/),s(t,/^\s*([\u2022\u00b7\u00a7\u25CF]|\w+\.)/),s(t,/^\u00a0+/)}for(var a=[],l=t.firstChild;void 0!==l&&null!==l;)if(a.push(l),null!==(l=l.walk()))for(;void 0!==l&&l.parent!==t;)l=l.walk();for(var u=0;u<a.length;u++)if("p"===(t=a[u]).name&&t.firstChild){var c=r(t);if(/^[\s\u00a0]*[\u2022\u00b7\u00a7\u25CF]\s*/.test(c)){o(t,"ul");continue}if(T(c)){var d=/([0-9]+)\./.exec(c),f=1;d&&(f=parseInt(d[1],10)),o(t,"ol",f);continue}if(t._listLevel){o(t,"ul",1);continue}e=null}else n=e,e=null}function D(t,e,n,i){var r,s={},o=t.dom.parseStyle(i);return h.each(o,function(o,a){switch(a){case"mso-list":(r=/\w+ \w+([0-9]+)/i.exec(i))&&(n._listLevel=parseInt(r[1],10)),/Ignore/i.test(o)&&n.firstChild&&(n._listIgnore=!0,n.firstChild._listIgnore=!0);break;case"horiz-align":a="text-align";break;case"vert-align":a="vertical-align";break;case"font-color":case"mso-foreground":a="color";break;case"mso-background":case"mso-highlight":a="background";break;case"font-weight":case"font-style":return void("normal"!==o&&(s[a]=o));case"mso-element":if(/^(comment|comment-list)$/i.test(o))return void n.remove()}0!==a.indexOf("mso-comment")?0!==a.indexOf("mso-")&&("all"===l.getRetainStyleProps(t)||e&&e[a])&&(s[a]=o):n.remove()}),/(bold)/i.test(s["font-weight"])&&(delete s["font-weight"],n.wrap(new _("b",1))),/(italic)/i.test(s["font-style"])&&(delete s["font-style"],n.wrap(new _("i",1))),(s=t.dom.serializeStyle(s,n.name))||null}var P={preProcess:function(t,e){return l.shouldUseDefaultFilters(t)?function(t,e){var n,i;(n=l.getRetainStyleProps(t))&&(i=h.makeMap(n.split(/[, ]/))),e=R.filter(e,[/<br class="?Apple-interchange-newline"?>/gi,/<b[^>]+id="?docs-internal-[^>]*>/gi,/<!--[\s\S]+?-->/gi,/<(!|script[^>]*>.*?<\/script(?=[>\s])|\/?(\?xml(:\w+)?|img|meta|link|style|\w:\w+)(?=[\s\/>]))[^>]*>/gi,[/<(\/?)s>/gi,"<$1strike>"],[/&nbsp;/gi," "],[/<span\s+style\s*=\s*"\s*mso-spacerun\s*:\s*yes\s*;?\s*"\s*>([\s\u00a0]*)<\/span>/gi,function(t,e){return e.length>0?e.replace(/./," ").slice(Math.floor(e.length/2)).split("").join(" "):""}]]);var r=l.getWordValidElements(t),s=C({valid_elements:r,valid_children:"-li[p]"});h.each(s.elements,function(t){t.attributes.class||(t.attributes.class={},t.attributesOrder.push("class")),t.attributes.style||(t.attributes.style={},t.attributesOrder.push("style"))});var o=w({},s);o.addAttributeFilter("style",function(e){for(var n,r=e.length;r--;)(n=e[r]).attr("style",D(t,i,n,n.attr("style"))),"span"===n.name&&n.parent&&!n.attributes.length&&n.unwrap()}),o.addAttributeFilter("class",function(t){for(var e,n,i=t.length;i--;)n=(e=t[i]).attr("class"),/^(MsoCommentReference|MsoCommentText|msoDel)$/i.test(n)&&e.remove(),e.attr("class",null)}),o.addNodeFilter("del",function(t){for(var e=t.length;e--;)t[e].remove()}),o.addNodeFilter("a",function(t){for(var e,n,i,r=t.length;r--;)if(n=(e=t[r]).attr("href"),i=e.attr("name"),n&&-1!==n.indexOf("#_msocom_"))e.remove();else if(n&&0===n.indexOf("file://")&&(n=n.split("#")[1])&&(n="#"+n),n||i){if(i&&!/^_?(?:toc|edn|ftn)/i.test(i)){e.unwrap();continue}e.attr({href:n,name:i})}else e.unwrap()});var a=o.parse(e);return l.shouldConvertWordFakeLists(t)&&S(a),e=k({validate:t.settings.validate},s).serialize(a)}(t,e):e},isWordContent:function(t){return/<font face="Times New Roman"|class="?Mso|style="[^"]*\bmso-|style='[^'']*\bmso-|w:WordDocument/i.test(t)||/class="OutlineElement/.test(t)||/id="?docs\-internal\-guid\-/.test(t)}},N=function(t,e){return{content:t,cancelled:e}},M=function(t,e,n,i){var o=r(t,e,n,i);return t.hasEventListeners("PastePostProcess")&&!o.isDefaultPrevented()?function(t,e,n,i){var r=t.dom.create("div",{style:"display:none"},e),o=s(t,r,n,i);return N(o.node.innerHTML,o.isDefaultPrevented())}(t,o.content,n,i):N(o.content,o.isDefaultPrevented())},A=function(t,e,n){var i=P.isWordContent(e),r=i?P.preProcess(t,e):e;return M(t,r,n,i)},O=function(t,e){return t.insertContent(function(t,e){var n=t.dom.create("body",{},e);return h.each(n.querySelectorAll("meta"),function(t){return t.parentNode.removeChild(t)}),n.innerHTML}(t,e),{merge:l.shouldMergeFormats(t),paste:!0}),!0},H=function(t){return/^https?:\/\/[\w\?\-\/+=.&%@~#]+$/i.test(t)},F=function(t){return H(t)&&/.(gif|jpe?g|png)$/.test(t)},I=function(t,e,n){return!(!1!==t.selection.isCollapsed()||!H(e))&&function(t,e,n){return t.undoManager.extra(function(){n(t,e)},function(){t.execCommand("mceInsertLink",!1,e)}),!0}(t,e,n)},B=function(t,e,n){return!!F(e)&&function(t,e,n){return t.undoManager.extra(function(){n(t,e)},function(){t.insertContent('<img src="'+e+'">')}),!0}(t,e,n)},L=function(t,e){!1===l.isSmartPasteEnabled(t)?O(t,e):function(t,e){h.each([I,B,O],function(n){return!0!==n(t,e,O)})}(t,e)},W=function(t,e,n){var i=n||g.isMarked(e),r=A(t,g.unmark(e),i);!1===r.cancelled&&L(t,r.content)},z=function(t,e){e=t.dom.encode(e).replace(/\r\n/g,"\n"),e=x.convert(e,t.settings.forced_root_block,t.settings.forced_root_block_attrs),W(t,e,!1)},V=function(t){var e={};if(t){if(t.getData){var n=t.getData("Text");n&&n.length>0&&-1===n.indexOf("data:text/mce-internal,")&&(e["text/plain"]=n)}if(t.types)for(var i=0;i<t.types.length;i++){var r=t.types[i];try{e[r]=t.getData(r)}catch(t){e[r]=""}}}return e},$=function(t,e){return e in t&&t[e].length>0},U=function(t){return $(t,"text/html")||$(t,"text/plain")},q=R.createIdGenerator("mceclip"),j=function(t,e,n,i){e&&(t.selection.setRng(e),e=null);var r,s,o,a,l=n.result,u=-1!==(s=(r=l).indexOf(","))?r.substr(s+1):null,c=q(),d=t.settings.images_reuse_filename&&i.name?function(t,e){var n=e.match(/([\s\S]+?)\.(?:jpeg|jpg|png|gif)$/i);return n?t.dom.encode(n[1]):null}(t,i.name):c,f=new Image;if(f.src=l,o=t.settings,a=f,!o.images_dataimg_filter||o.images_dataimg_filter(a)){var h,p=t.editorUpload.blobCache,m=void 0;(h=p.findFirst(function(t){return t.base64()===u}))?m=h:(m=p.create(c,i,u,d),p.add(m)),W(t,'<img src="'+m.blobUri()+'">',!1)}else W(t,'<img src="'+l+'">',!1)},Y=function(t,e,n){var i="paste"===e.type?e.clipboardData:e.dataTransfer;function r(i){var r,s,o,a=!1;if(i)for(r=0;r<i.length;r++)if(s=i[r],/^image\/(jpeg|png|gif|bmp)$/.test(s.type)){var l=s.getAsFile?s.getAsFile():s;(o=new window.FileReader).onload=j.bind(null,t,n,o,l),o.readAsDataURL(l),e.preventDefault(),a=!0}return a}if(t.settings.paste_data_images&&i)return r(i.items)||r(i.files)},X=function(t){return p.metaKeyPressed(t)&&86===t.keyCode||t.shiftKey&&45===t.keyCode},G=function(t,e,n){var i,r=0;function s(n,i,r,s){var o,a;$(n,"text/html")?o=n["text/html"]:(o=e.getHtml(),s=s||g.isMarked(o),e.isDefaultContent(o)&&(r=!0)),o=R.trimHtml(o),e.remove(),a=!1===s&&x.isPlainText(o),o.length&&!a||(r=!0),r&&(o=$(n,"text/plain")&&a?n["text/plain"]:R.innerText(o)),e.isDefaultContent(o)?i||t.windowManager.alert("Please use Ctrl+V/Cmd+V keyboard shortcuts to paste contents."):r?z(t,o):W(t,o,s)}t.on("keydown",function(n){function s(t){X(t)&&!t.isDefaultPrevented()&&e.remove()}if(X(n)&&!n.isDefaultPrevented()){if((i=n.shiftKey&&86===n.keyCode)&&d.webkit&&-1!==navigator.userAgent.indexOf("Version/"))return;if(n.stopImmediatePropagation(),r=(new Date).getTime(),d.ie&&i)return n.preventDefault(),void a(t,!0);e.remove(),e.create(),t.once("keyup",s),t.once("paste",function(){t.off("keyup",s)})}}),t.on("paste",function(o){var a=(new Date).getTime(),l=function(t,e){var n=V(e.clipboardData||t.getDoc().dataTransfer);return R.isMsEdge()?h.extend(n,{"text/html":""}):n}(t,o),u=(new Date).getTime()-a,c=(new Date).getTime()-r-u<1e3,p="text"===n.get()||i,m=$(l,g.internalHtmlMime());i=!1,o.isDefaultPrevented()||function(t){var e=t.clipboardData;return-1!==navigator.userAgent.indexOf("Android")&&e&&e.items&&0===e.items.length}(o)?e.remove():U(l)||!Y(t,o,e.getLastRng()||t.selection.getRng())?(c||o.preventDefault(),!d.ie||c&&!o.ieFake||$(l,"text/html")||(e.create(),t.dom.bind(e.getEl(),"paste",function(t){t.stopPropagation()}),t.getDoc().execCommand("Paste",!1,null),l["text/html"]=e.getHtml()),$(l,"text/html")?(o.preventDefault(),m||(m=g.isMarked(l["text/html"])),s(l,c,p,m)):f.setEditorTimeout(t,function(){s(l,c,p,m)},0)):e.remove()})},J=function(t){return d.ie&&t.inline?document.body:t.getBody()},Z=function(t,e,n){(function(t){return J(t)!==t.getBody()})(t)&&t.dom.bind(e,"paste keyup",function(e){tt(t,n)||t.fire("paste")})},K=function(t){return t.dom.get("mcepastebin")},Q=function(t,e){return e===t},tt=function(t,e){var n,i=K(t);return(n=i)&&"mcepastebin"===n.id&&Q(e,i.innerHTML)},et=function(e){var n=t(null);return{create:function(){return function(t,e,n){var i,r=t.dom,s=t.getBody();e.set(t.selection.getRng()),i=t.dom.add(J(t),"div",{id:"mcepastebin",class:"mce-pastebin",contentEditable:!0,"data-mce-bogus":"all",style:"position: fixed; top: 50%; width: 10px; height: 10px; overflow: hidden; opacity: 0"},n),(d.ie||d.gecko)&&r.setStyle(i,"left","rtl"===r.getStyle(s,"direction",!0)?65535:-65535),r.bind(i,"beforedeactivate focusin focusout",function(t){t.stopPropagation()}),Z(t,i,n),i.focus(),t.selection.select(i,!0)}(e,n,"%MCEPASTEBIN%")},remove:function(){return function(t,e){if(K(t)){for(var n=void 0,i=e.get();n=t.dom.get("mcepastebin");)t.dom.remove(n),t.dom.unbind(n);i&&t.selection.setRng(i)}e.set(null)}(e,n)},getEl:function(){return K(e)},getHtml:function(){return function(t){var e,n,i,r,s,o=function(e,n){e.appendChild(n),t.dom.remove(n,!0)};for(n=h.grep(J(t).childNodes,function(t){return"mcepastebin"===t.id}),e=n.shift(),h.each(n,function(t){o(e,t)}),i=(r=t.dom.select("div[id=mcepastebin]",e)).length-1;i>=0;i--)s=t.dom.create("div"),e.insertBefore(s,r[i]),o(s,r[i]);return e?e.innerHTML:""}(e)},getLastRng:function(){return function(t){return t.get()}(n)},isDefault:function(){return tt(e,"%MCEPASTEBIN%")},isDefaultContent:function(t){return Q("%MCEPASTEBIN%",t)}}},nt=function(t,e){var n=et(t);return t.on("preInit",function(){return function(t,e,n){var i;G(t,e,n),t.parser.addNodeFilter("img",function(e,n,r){var s=function(t){t.attr("data-mce-object")||i===d.transparentSrc||t.remove()},o=function(t){return 0===t.indexOf("webkit-fake-url")},a=function(t){return 0===t.indexOf("data:")};if(!t.settings.paste_data_images&&function(t){return t.data&&!0===t.data.paste}(r))for(var l=e.length;l--;)(i=e[l].attributes.map.src)&&(o(i)?s(e[l]):!t.settings.allow_html_data_urls&&a(i)&&s(e[l]))})}(t,n,e)}),{pasteFormat:e,pasteHtml:function(e,n){return W(t,e,n)},pasteText:function(e){return z(t,e)},pasteImageData:function(e,n){return Y(t,e,n)},getDataTransferItems:V,hasHtmlOrText:U,hasContentType:$}},it=function(){},rt=function(t,e,n){if(!function(t){return!1===d.iOS&&void 0!==t&&"function"==typeof t.setData&&!0!==R.isMsEdge()}(t))return!1;try{return t.clearData(),t.setData("text/html",e),t.setData("text/plain",n),t.setData(g.internalHtmlMime(),e),!0}catch(t){return!1}},st=function(t,e,n,i){rt(t.clipboardData,e.html,e.text)?(t.preventDefault(),i()):n(e.html,i)},ot=function(t){return function(e,n){var i=g.mark(e),r=t.dom.create("div",{contenteditable:"false","data-mce-bogus":"all"}),s=t.dom.create("div",{contenteditable:"true"},i);t.dom.setStyles(r,{position:"fixed",top:"0",left:"-3000px",width:"1000px",overflow:"hidden"}),r.appendChild(s),t.dom.add(t.getBody(),r);var o=t.selection.getRng();s.focus();var a=t.dom.createRng();a.selectNodeContents(s),t.selection.setRng(a),setTimeout(function(){t.selection.setRng(o),r.parentNode.removeChild(r),n()},0)}},at=function(t){return{html:t.selection.getContent({contextual:!0}),text:t.selection.getContent({format:"text"})}},lt=function(t){t.on("cut",function(t){return function(e){!1===t.selection.isCollapsed()&&st(e,at(t),ot(t),function(){setTimeout(function(){t.execCommand("Delete")},0)})}}(t)),t.on("copy",function(t){return function(e){!1===t.selection.isCollapsed()&&st(e,at(t),ot(t),it)}}(t))},ut=tinymce.util.Tools.resolve("tinymce.dom.RangeUtils"),ct=function(t,e){return ut.getCaretRangeFromPoint(e.clientX,e.clientY,t.getDoc())},dt=function(t,e){t.focus(),t.selection.setRng(e)},ft=function(t,e,n){l.shouldBlockDrop(t)&&t.on("dragend dragover draggesture dragdrop drop drag",function(t){t.preventDefault(),t.stopPropagation()}),l.shouldPasteDataImages(t)||t.on("drop",function(t){var e=t.dataTransfer;e&&e.files&&e.files.length>0&&t.preventDefault()}),t.on("drop",function(i){var r,s;if(s=ct(t,i),!i.isDefaultPrevented()&&!n.get()){r=e.getDataTransferItems(i.dataTransfer);var o,a=e.hasContentType(r,g.internalHtmlMime());if((e.hasHtmlOrText(r)&&(!(o=r["text/plain"])||0!==o.indexOf("file://"))||!e.pasteImageData(i,s))&&s&&l.shouldFilterDrop(t)){var u=r["mce-internal"]||r["text/html"]||r["text/plain"];u&&(i.preventDefault(),f.setEditorTimeout(t,function(){t.undoManager.transact(function(){r["mce-internal"]&&t.execCommand("Delete"),dt(t,s),u=R.trimHtml(u),r["text/html"]?e.pasteHtml(u,a):e.pasteText(u)})}))}}}),t.on("dragstart",function(t){n.set(!0)}),t.on("dragover dragend",function(e){l.shouldPasteDataImages(t)&&!1===n.get()&&(e.preventDefault(),dt(t,ct(t,e))),"dragend"===e.type&&n.set(!1)})},ht=function(t){var e=t.plugins.paste,n=l.getPreProcess(t);n&&t.on("PastePreProcess",function(t){n.call(e,e,t)});var i=l.getPostProcess(t);i&&t.on("PastePostProcess",function(t){i.call(e,e,t)})};function pt(t,e){t.on("PastePreProcess",function(n){n.content=e(t,n.content,n.internal,n.wordContent)})}function mt(t,e){if(!P.isWordContent(e))return e;var n=[];h.each(t.schema.getBlockElements(),function(t,e){n.push(e)});var i=new RegExp("(?:<br>&nbsp;[\\s\\r\\n]+|<br>)*(<\\/?("+n.join("|")+")[^>]*>)(?:<br>&nbsp;[\\s\\r\\n]+|<br>)*","g");return e=R.filter(e,[[i,"$1"]]),e=R.filter(e,[[/<br><br>/g,"<BR><BR>"],[/<br>/g," "],[/<BR><BR>/g,"<br>"]])}function gt(t,e,n,i){if(i||n)return e;var r,s=l.getWebkitStyles(t);if(!1===l.shouldRemoveWebKitStyles(t)||"all"===s)return e;if(s&&(r=s.split(/[, ]/)),r){var o=t.dom,a=t.selection.getNode();e=e.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,function(t,e,n,i){var s=o.parseStyle(o.decode(n)),l={};if("none"===r)return e+i;for(var u=0;u<r.length;u++){var c=s[r[u]],d=o.getStyle(a,r[u],!0);/color/.test(r[u])&&(c=o.toHex(c),d=o.toHex(d)),d!==c&&(l[r[u]]=c)}return(l=o.serializeStyle(l,"span"))?e+' style="'+l+'"'+i:e+i})}else e=e.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,"$1$3");return e=e.replace(/(<[^>]+) data-mce-style="([^"]+)"([^>]*>)/gi,function(t,e,n,i){return e+' style="'+n+'"'+i})}function vt(t,e){t.$("a",e).find("font,u").each(function(e,n){t.dom.remove(n,!0)})}var yt=function(t){d.webkit&&pt(t,gt),d.ie&&(pt(t,mt),function(t,e){t.on("PastePostProcess",function(n){e(t,n.node)})}(t,vt))},bt=function(t,e,n){var i=n.control;i.active("text"===e.pasteFormat.get()),t.on("PastePlainTextToggle",function(t){i.active(t.state)})},xt=function(t,e){var n=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var i=new Array(arguments.length-1),r=1;r<arguments.length;r++)i[r-1]=arguments[r];return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];for(var r=new Array(arguments.length),s=0;s<r.length;s++)r[s]=arguments[s];var o=i.concat(r);return t.apply(null,o)}}(bt,t,e);t.addButton("pastetext",{active:!1,icon:"pastetext",tooltip:"Paste as text",cmd:"mceTogglePlainTextPaste",onPostRender:n}),t.addMenuItem("pastetext",{text:"Paste as text",selectable:!0,active:e.pasteFormat,cmd:"mceTogglePlainTextPaste",onPostRender:n})};e.add("paste",function(e){if(!1===n(e)){var r=t(!1),s=t(!1),o=t(l.isPasteAsTextEnabled(e)?"text":"html"),a=nt(e,o),u=yt(e);return xt(e,a),c(e,a,r),ht(e),lt(e),ft(e,a,s),i(a,u)}})}()},210:function(t,e,n){n(211)},211:function(t,e){!function(){"use strict";var t=tinymce.util.Tools.resolve("tinymce.PluginManager"),e=tinymce.util.Tools.resolve("tinymce.dom.RangeUtils"),n=tinymce.util.Tools.resolve("tinymce.dom.TreeWalker"),i=tinymce.util.Tools.resolve("tinymce.util.VK"),r=tinymce.util.Tools.resolve("tinymce.dom.BookmarkManager"),s=tinymce.util.Tools.resolve("tinymce.util.Tools"),o=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),a=function(t){return t&&"BR"===t.nodeName},l=function(t){return t&&3===t.nodeType},u=function(t){return t&&/^(OL|UL|DL)$/.test(t.nodeName)},c=function(t){return t&&/^(LI|DT|DD)$/.test(t.nodeName)},d=function(t){return t&&/^(TH|TD)$/.test(t.nodeName)},f=a,h=function(t){return t.parentNode.firstChild===t},p=function(t){return t.parentNode.lastChild===t},m=function(t,e){return e&&!!t.schema.getTextBlockElements()[e.nodeName]},g=function(t,e){return t&&t.nodeName in e},v=function(t,e){return!!a(e)&&!(!t.isBlock(e.nextSibling)||a(e.previousSibling))},y=function(t,e,n){var i=t.isEmpty(e);return!(n&&t.select("span[data-mce-type=bookmark]",e).length>0)&&i},b=function(t,e){return t.isChildOf(e,t.getRoot())},x=function(t,n){var i=e.getNode(t,n);return c(t)&&l(i)?{container:i,offset:n>=t.childNodes.length?i.data.length:0}:{container:t,offset:n}},w=function(t){var e=t.cloneRange(),n=x(t.startContainer,t.startOffset);e.setStart(n.container,n.offset);var i=x(t.endContainer,t.endOffset);return e.setEnd(i.container,i.offset),e},_=o.DOM,C=function(t){var e={},n=function(n){var i,r,s;r=t[n?"startContainer":"endContainer"],s=t[n?"startOffset":"endOffset"],1===r.nodeType&&(i=_.create("span",{"data-mce-type":"bookmark"}),r.hasChildNodes()?(s=Math.min(s,r.childNodes.length-1),n?r.insertBefore(i,r.childNodes[s]):_.insertAfter(i,r.childNodes[s])):r.appendChild(i),r=i,s=0),e[n?"startContainer":"endContainer"]=r,e[n?"startOffset":"endOffset"]=s};return n(!0),t.collapsed||n(),e},k=function(t){function e(e){var n,i,r;n=r=t[e?"startContainer":"endContainer"],i=t[e?"startOffset":"endOffset"],n&&(1===n.nodeType&&(i=function(t){for(var e=t.parentNode.firstChild,n=0;e;){if(e===t)return n;1===e.nodeType&&"bookmark"===e.getAttribute("data-mce-type")||n++,e=e.nextSibling}return-1}(n),n=n.parentNode,_.remove(r),!n.hasChildNodes()&&_.isBlock(n)&&n.appendChild(_.create("br"))),t[e?"startContainer":"endContainer"]=n,t[e?"startOffset":"endOffset"]=i)}e(!0),e();var n=_.createRng();return n.setStart(t.startContainer,t.startOffset),t.endContainer&&n.setEnd(t.endContainer,t.endOffset),w(n)},E=o.DOM,R=function(t,e){var n,i=e.parentNode;"LI"===i.nodeName&&i.firstChild===e&&((n=i.previousSibling)&&"LI"===n.nodeName?(n.appendChild(e),y(t,i)&&E.remove(i)):E.setStyle(i,"listStyleType","none")),u(i)&&(n=i.previousSibling)&&"LI"===n.nodeName&&n.appendChild(e)},T=function(t,e){s.each(s.grep(t.select("ol,ul",e)),function(e){R(t,e)})},S=tinymce.util.Tools.resolve("tinymce.dom.DomQuery"),D=function(t){var e=t.selection.getStart(!0);return t.dom.getParent(e,"OL,UL,DL",P(t,e))},P=function(t,e){var n=t.dom.getParents(e,"TD,TH");return n.length>0?n[0]:t.getBody()},N={getParentList:D,getSelectedSubLists:function(t){var e=D(t),n=t.selection.getSelectedBlocks();return function(t,e){return t&&1===e.length&&e[0]===t}(e,n)?function(t){return s.grep(t.querySelectorAll("ol,ul,dl"),function(t){return u(t)})}(e):s.grep(n,function(t){return u(t)&&e!==t})},getSelectedListItems:function(t){var e=t.selection.getSelectedBlocks();return s.grep(function(t,e){var n=s.map(e,function(e){var n=t.dom.getParent(e,"li,dd,dt",P(t,e));return n||e});return S.unique(n)}(t,e),function(t){return c(t)})},getClosestListRootElm:P},M=tinymce.util.Tools.resolve("tinymce.Env"),A=o.DOM,O=function(t,e,n){var i,r,s,o=A.createFragment(),a=t.schema.getBlockElements();if(t.settings.forced_root_block&&(n=n||t.settings.forced_root_block),n&&((r=A.create(n)).tagName===t.settings.forced_root_block&&A.setAttribs(r,t.settings.forced_root_block_attrs),g(e.firstChild,a)||o.appendChild(r)),e)for(;i=e.firstChild;){var l=i.nodeName;s||"SPAN"===l&&"bookmark"===i.getAttribute("data-mce-type")||(s=!0),g(i,a)?(o.appendChild(i),r=null):n?(r||(r=A.create(n),o.appendChild(r)),r.appendChild(i)):o.appendChild(i)}return t.settings.forced_root_block?s||M.ie&&!(M.ie>10)||r.appendChild(A.create("br",{"data-mce-bogus":"1"})):o.appendChild(A.create("br")),o},H=o.DOM,F=function(t,e,n,i){var r,o,a,l,u;for(a=H.select('span[data-mce-type="bookmark"]',e),i=i||O(t,n),(r=H.createRng()).setStartAfter(n),r.setEndAfter(e),l=(o=r.extractContents()).firstChild;l;l=l.firstChild)if("LI"===l.nodeName&&t.dom.isEmpty(l)){H.remove(l);break}t.dom.isEmpty(o)||H.insertAfter(o,e),H.insertAfter(i,e),y(t.dom,n.parentNode)&&(u=n.parentNode,s.each(a,function(t){u.parentNode.insertBefore(t,n.parentNode)}),H.remove(u)),H.remove(n),y(t.dom,e)&&H.remove(e)},I=o.DOM,B=function(t,e){y(t,e)&&I.remove(e)},L=function(t,e){var n,i,r=e.parentNode;return r?(n=r.parentNode,!(r!==t.getBody()&&("DD"===e.nodeName?(I.rename(e,"DT"),0):h(e)&&p(e)?("LI"===n.nodeName?(I.insertAfter(e,n),B(t.dom,n),I.remove(r)):u(n)?I.remove(r,!0):(n.insertBefore(O(t,e),r),I.remove(r)),0):h(e)?("LI"===n.nodeName?(I.insertAfter(e,n),e.appendChild(r),B(t.dom,n)):u(n)?n.insertBefore(e,r):(n.insertBefore(O(t,e),r),I.remove(e)),0):p(e)?("LI"===n.nodeName?I.insertAfter(e,n):u(n)?I.insertAfter(e,r):(I.insertAfter(O(t,e),r),I.remove(e)),0):("LI"===n.nodeName?(r=n,i=O(t,e,"LI")):i=u(n)?O(t,e,"LI"):O(t,e),F(t,r,e,i),T(t.dom,r.parentNode),0)))):(B(t.dom,e),!0)},W=L,z=function(t){var e=N.getSelectedListItems(t);if(e.length){var n=C(t.selection.getRng()),i=void 0,r=void 0,s=N.getClosestListRootElm(t,t.selection.getStart(!0));for(i=e.length;i--;)for(var o=e[i].parentNode;o&&o!==s;){for(r=e.length;r--;)if(e[r]===o){e.splice(i,1);break}o=o.parentNode}for(i=0;i<e.length&&(L(t,e[i])||0!==i);i++);return t.selection.setRng(k(n)),t.nodeChanged(),!0}},V=function(t,e){s.each(e,function(e,n){t.setAttribute(n,e)})},$=function(t,e,n){!function(t,e,n){var i=n["list-style-type"]?n["list-style-type"]:null;t.setStyle(e,"list-style-type",i)}(t,e,n),function(t,e,n){V(e,n["list-attributes"]),s.each(t.select("li",e),function(t){V(t,n["list-item-attributes"])})}(t,e,n)},U=function(t,e,n,i){var r,s;for(r=e[n?"startContainer":"endContainer"],s=e[n?"startOffset":"endOffset"],1===r.nodeType&&(r=r.childNodes[Math.min(s,r.childNodes.length-1)]||r),!n&&f(r.nextSibling)&&(r=r.nextSibling);r.parentNode!==i;){if(m(t,r))return r;if(/^(TD|TH)$/.test(r.parentNode.nodeName))return r;r=r.parentNode}return r},q=function(t,e,n){void 0===n&&(n={});var i,o=t.selection.getRng(!0),a="LI",l=N.getClosestListRootElm(t,t.selection.getStart(!0)),c=t.dom;"false"!==c.getContentEditable(t.selection.getNode())&&("DL"===(e=e.toUpperCase())&&(a="DT"),i=C(o),s.each(function(t,e,n){for(var i,o=[],a=t.dom,l=U(t,e,!0,n),u=U(t,e,!1,n),c=[],d=l;d&&(c.push(d),d!==u);d=d.nextSibling);return s.each(c,function(e){if(m(t,e))return o.push(e),void(i=null);if(a.isBlock(e)||f(e))return f(e)&&a.remove(e),void(i=null);var s=e.nextSibling;r.isBookmarkNode(e)&&(m(t,s)||!s&&e.parentNode===n)?i=null:(i||(i=a.create("p"),e.parentNode.insertBefore(i,e),o.push(i)),i.appendChild(e))}),o}(t,o,l),function(i){var r,o;(o=i.previousSibling)&&u(o)&&o.nodeName===e&&function(t,e,n){var i=t.getStyle(e,"list-style-type"),r=n?n["list-style-type"]:"";return i===(r=null===r?"":r)}(c,o,n)?(r=o,i=c.rename(i,a),o.appendChild(i)):(r=c.create(e),i.parentNode.insertBefore(r,i),r.appendChild(i),i=c.rename(i,a)),function(t,e,n){s.each(n,function(n){var i;return t.setStyle(e,((i={})[n]="",i))})}(c,i,["margin","margin-right","margin-bottom","margin-left","margin-top","padding","padding-right","padding-bottom","padding-left","padding-top"]),$(c,r,n),X(t.dom,r)}),t.selection.setRng(k(i)))},j=function(t){var e=C(t.selection.getRng(!0)),n=N.getClosestListRootElm(t,t.selection.getStart(!0)),i=N.getSelectedListItems(t),r=s.grep(i,function(e){return t.dom.isEmpty(e)});i=s.grep(i,function(e){return!t.dom.isEmpty(e)}),s.each(r,function(e){y(t.dom,e)&&W(t,e)}),s.each(i,function(e){var i,r;if(e.parentNode!==t.getBody()){for(i=e;i&&i!==n;i=i.parentNode)u(i)&&(r=i);F(t,r,e),T(t.dom,r.parentNode)}}),t.selection.setRng(k(e))},Y=function(t,e,n){return function(t,e){return t&&e&&u(t)&&t.nodeName===e.nodeName}(e,n)&&function(t,e,n){return t.getStyle(e,"list-style-type",!0)===t.getStyle(n,"list-style-type",!0)}(t,e,n)&&(i=n,e.className===i.className);var i},X=function(t,e){var n,i;if(n=e.nextSibling,Y(t,e,n)){for(;i=n.firstChild;)e.appendChild(i);t.remove(n)}if(n=e.previousSibling,Y(t,e,n)){for(;i=n.lastChild;)e.insertBefore(i,e.firstChild);t.remove(n)}},G=function(t,e,n,i,r){if(e.nodeName!==i||J(r)){var o=C(t.selection.getRng(!0));s.each([e].concat(n),function(e){!function(t,e,n,i){if(e.nodeName!==n){var r=t.rename(e,n);$(t,r,i)}else $(t,e,i)}(t.dom,e,i,r)}),t.selection.setRng(k(o))}else j(t)},J=function(t){return"list-style-type"in t},Z={toggleList:function(t,e,n){var i=N.getParentList(t),r=N.getSelectedSubLists(t);n=n||{},i&&r.length>0?G(t,i,r,e,n):function(t,e,n,i){if(e!==t.getBody())if(e)if(e.nodeName!==n||J(i)){var r=C(t.selection.getRng(!0));$(t.dom,e,i),X(t.dom,t.dom.rename(e,n)),t.selection.setRng(k(r))}else j(t);else q(t,n,i)}(t,i,e,n)},removeList:j,mergeWithAdjacentLists:X},K=function(t,i,r,s){var o,a,l=i.startContainer,u=i.startOffset;if(3===l.nodeType&&(r?u<l.data.length:u>0))return l;for(o=t.schema.getNonEmptyElements(),1===l.nodeType&&(l=e.getNode(l,u)),a=new n(l,s),r&&v(t.dom,l)&&a.next();l=a[r?"next":"prev2"]();){if("LI"===l.nodeName&&!l.hasChildNodes())return l;if(o[l.nodeName])return l;if(3===l.nodeType&&l.data.length>0)return l}},Q=function(t,e){var n=e.childNodes;return 1===n.length&&!u(n[0])&&t.isBlock(n[0])},tt=function(t,e,n){var i,r;if(r=Q(t,n)?n.firstChild:n,function(t,e){Q(t,e)&&t.remove(e.firstChild,!0)}(t,e),!y(t,e,!0))for(;i=e.firstChild;)r.appendChild(i)},et=function(t,e,n){var i,r,s=e.parentNode;b(t,e)&&b(t,n)&&(u(n.lastChild)&&(r=n.lastChild),s===n.lastChild&&f(s.previousSibling)&&t.remove(s.previousSibling),(i=n.lastChild)&&f(i)&&e.hasChildNodes()&&t.remove(i),y(t,n,!0)&&t.$(n).empty(),tt(t,e,n),r&&n.appendChild(r),t.remove(e),y(t,s)&&s!==t.getRoot()&&t.remove(s))},nt=function(t,e,n,i){var r=t.dom;if(r.isEmpty(i))!function(t,e,n){t.dom.$(n).empty(),et(t.dom,e,n),t.selection.setCursorLocation(n)}(t,n,i);else{var s=C(e);et(r,n,i),t.selection.setRng(k(s))}},it=function(t,e){var n,i,r,s=t.dom,o=t.selection,a=o.getStart(),l=N.getClosestListRootElm(t,a),u=s.getParent(o.getStart(),"LI",l);if(u){if((n=u.parentNode)===t.getBody()&&y(s,n))return!0;if(i=w(o.getRng(!0)),(r=s.getParent(K(t,i,e,l),"LI",l))&&r!==u)return e?nt(t,i,r,u):function(t,e,n,i){var r=C(e);et(t.dom,n,i);var s=k(r);t.selection.setRng(s)}(t,i,u,r),!0;if(!r&&!e)return Z.removeList(t),!0}return!1},rt=function(t,e){return it(t,e)||function(t,e){var n=t.dom,i=t.selection.getStart(),r=N.getClosestListRootElm(t,i),s=n.getParent(i,n.isBlock,r);if(s&&n.isEmpty(s)){var o=w(t.selection.getRng(!0)),a=n.getParent(K(t,o,e,r),"LI",r);if(a)return t.undoManager.transact(function(){!function(t,e,n){var i=t.getParent(e.parentNode,t.isBlock,n);t.remove(e),i&&t.isEmpty(i)&&t.remove(i)}(n,s,r),Z.mergeWithAdjacentLists(n,a.parentNode),t.selection.select(a,!0),t.selection.collapse(e)}),!0}return!1}(t,e)},st=function(t,e){return t.selection.isCollapsed()?rt(t,e):function(t){var e=t.selection.getStart(),n=N.getClosestListRootElm(t,e);return!!(t.dom.getParent(e,"LI,DT,DD",n)||N.getSelectedListItems(t).length>0)&&(t.undoManager.transact(function(){t.execCommand("Delete"),T(t.dom,t.getBody())}),!0)}(t)},ot=function(t){t.on("keydown",function(e){e.keyCode===i.BACKSPACE?st(t,!1)&&e.preventDefault():e.keyCode===i.DELETE&&st(t,!0)&&e.preventDefault()})},at=st,lt=function(t){return{backspaceDelete:function(e){at(t,e)}}},ut=o.DOM,ct=function(t,e){var n;if(u(t)){for(;n=t.firstChild;)e.appendChild(n);ut.remove(t)}},dt=function(t){var e,n,i,r,s=N.getSelectedListItems(t);if(s.length){for(var o=C(t.selection.getRng(!0)),a=0;a<s.length&&(e=s[a],n=void 0,i=void 0,r=void 0,("DT"===e.nodeName?(ut.rename(e,"DD"),1):(n=e.previousSibling)&&u(n)?(n.appendChild(e),1):n&&"LI"===n.nodeName&&u(n.lastChild)?(n.lastChild.appendChild(e),ct(e.lastChild,n.lastChild),1):(n=e.nextSibling)&&u(n)?(n.insertBefore(e,n.firstChild),1):(n=e.previousSibling)&&"LI"===n.nodeName&&(i=ut.create(e.parentNode.nodeName),(r=ut.getStyle(e.parentNode,"listStyleType"))&&ut.setStyle(i,"listStyleType",r),n.appendChild(i),i.appendChild(e),ct(e.lastChild,i),1))||0!==a);a++);return t.selection.setRng(k(o)),t.nodeChanged(),!0}},ft=function(t,e){return function(){var n=t.dom.getParent(t.selection.getStart(),"UL,OL,DL");return n&&n.nodeName===e}},ht=function(t){t.on("BeforeExecCommand",function(e){var n,i=e.command.toLowerCase();if("indent"===i?dt(t)&&(n=!0):"outdent"===i&&z(t)&&(n=!0),n)return t.fire("ExecCommand",{command:e.command}),e.preventDefault(),!0}),t.addCommand("InsertUnorderedList",function(e,n){Z.toggleList(t,"UL",n)}),t.addCommand("InsertOrderedList",function(e,n){Z.toggleList(t,"OL",n)}),t.addCommand("InsertDefinitionList",function(e,n){Z.toggleList(t,"DL",n)}),t.addQueryStateHandler("InsertUnorderedList",ft(t,"UL")),t.addQueryStateHandler("InsertOrderedList",ft(t,"OL")),t.addQueryStateHandler("InsertDefinitionList",ft(t,"DL"))},pt=function(t){return t.getParam("lists_indent_on_tab",!0)},mt=function(t){pt(t)&&function(t){t.on("keydown",function(e){e.keyCode!==i.TAB||i.metaKeyPressed(e)||t.dom.getParent(t.selection.getStart(),"LI,DT,DD")&&(e.preventDefault(),e.shiftKey?z(t):dt(t))})}(t),ot(t)},gt=function(t,e){return function(n){var i=n.control;t.on("NodeChange",function(t){var n=function(t,e){for(var n=0;n<t.length;n++)if(e(t[n]))return n;return-1}(t.parents,d),r=-1!==n?t.parents.slice(0,n):t.parents,o=s.grep(r,u);i.active(o.length>0&&o[0].nodeName===e)})}},vt=function(t){(function(t,e){var n=t.settings.plugins?t.settings.plugins:"";return-1!==s.inArray(n.split(/[ ,]/),e)})(t,"advlist")||(t.addButton("numlist",{active:!1,title:"Numbered list",cmd:"InsertOrderedList",onPostRender:gt(t,"OL")}),t.addButton("bullist",{active:!1,title:"Bullet list",cmd:"InsertUnorderedList",onPostRender:gt(t,"UL")})),t.addButton("indent",{icon:"indent",title:"Increase indent",cmd:"Indent",onPostRender:function(t){return function(e){var n=e.control;t.on("nodechange",function(){var e=N.getSelectedListItems(t),i=e.length>0&&h(e[0]);n.disabled(i)})}}(t)})};t.add("lists",function(t){return mt(t),vt(t),ht(t),lt(t)})}()},212:function(t,e,n){n(213)},213:function(t,e){!function(){"use strict";var t=tinymce.util.Tools.resolve("tinymce.PluginManager"),e=function(t,e){var n=function(t){return!!t.plugins.visualchars&&t.plugins.visualchars.isEnabled()}(t)?'<span class="mce-nbsp">&nbsp;</span>':"&nbsp;";t.insertContent(function(t,e){for(var n="",i=0;i<e;i++)n+=t;return n}(n,e)),t.dom.setAttrib(t.dom.select("span.mce-nbsp"),"data-mce-bogus","1")},n=function(t){t.addCommand("mceNonBreaking",function(){e(t,1)})},i=tinymce.util.Tools.resolve("tinymce.util.VK"),r=function(t){var e=t.getParam("nonbreaking_force_tab",0);return"boolean"==typeof e?!0===e?3:0:e},s=function(t){var n=r(t);n>0&&t.on("keydown",function(r){if(r.keyCode===i.TAB&&!r.isDefaultPrevented()){if(r.shiftKey)return;r.preventDefault(),r.stopImmediatePropagation(),e(t,n)}})},o=function(t){t.addButton("nonbreaking",{title:"Nonbreaking space",cmd:"mceNonBreaking"}),t.addMenuItem("nonbreaking",{icon:"nonbreaking",text:"Nonbreaking space",cmd:"mceNonBreaking",context:"insert"})};t.add("nonbreaking",function(t){n(t),o(t),s(t)})}()},214:function(t,e){!function(){"use strict";var t,e,n,i,r,s=tinymce.util.Tools.resolve("tinymce.ThemeManager"),o=tinymce.util.Tools.resolve("tinymce.EditorManager"),a=tinymce.util.Tools.resolve("tinymce.util.Tools"),l=function(t){return!1!==u(t)},u=function(t){return t.getParam("menubar")},c=function(t){return t.getParam("toolbar_items_size")},d=function(t){return t.getParam("menu")},f=function(t){return!1===t.settings.skin},h=function(t){var e=t.getParam("resize","vertical");return!1===e?"none":"both"===e?"both":"vertical"},p=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),m=tinymce.util.Tools.resolve("tinymce.ui.Factory"),g=tinymce.util.Tools.resolve("tinymce.util.I18n"),v=function(t){return t.fire("SkinLoaded")},y=function(t){return t.fire("ResizeEditor")},b=function(t){return t.fire("BeforeRenderUI")},x=function(t,e){return function(){var n=t.find(e)[0];n&&n.focus(!0)}},w=function(t,e){t.shortcuts.add("Alt+F9","",x(e,"menubar")),t.shortcuts.add("Alt+F10,F10","",x(e,"toolbar")),t.shortcuts.add("Alt+F11","",x(e,"elementpath")),e.on("cancel",function(){t.focus()})},_=tinymce.util.Tools.resolve("tinymce.geom.Rect"),C=tinymce.util.Tools.resolve("tinymce.util.Delay"),k=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]},E=function(t){return function(){return t}},R=E(!1),T=E(!0),S=function(){return D},D=(i={fold:function(t,e){return t()},is:R,isSome:R,isNone:T,getOr:n=function(t){return t},getOrThunk:e=function(t){return t()},getOrDie:function(t){throw new Error(t||"error: getOrDie called on none.")},getOrNull:function(){return null},getOrUndefined:function(){},or:n,orThunk:e,map:S,ap:S,each:function(){},bind:S,flatten:S,exists:R,forall:T,filter:S,equals:t=function(t){return t.isNone()},equals_:t,toArray:function(){return[]},toString:E("none()")},Object.freeze&&Object.freeze(i),i),P=function(t){var e=function(){return t},n=function(){return r},i=function(e){return e(t)},r={fold:function(e,n){return n(t)},is:function(e){return t===e},isSome:T,isNone:R,getOr:e,getOrThunk:e,getOrDie:e,getOrNull:e,getOrUndefined:e,or:n,orThunk:n,map:function(e){return P(e(t))},ap:function(e){return e.fold(S,function(e){return P(e(t))})},each:function(e){e(t)},bind:i,flatten:e,exists:i,forall:i,filter:function(e){return e(t)?r:D},equals:function(e){return e.is(t)},equals_:function(e,n){return e.fold(R,function(e){return n(t,e)})},toArray:function(){return[t]},toString:function(){return"some("+t+")"}};return r},N={some:P,none:S,from:function(t){return null===t||void 0===t?D:P(t)}},M=function(t){return t?t.getRoot().uiContainer:null},A={getUiContainerDelta:function(t){var e=M(t);if(e&&"static"!==p.DOM.getStyle(e,"position",!0)){var n=p.DOM.getPos(e),i=e.scrollLeft-n.x,r=e.scrollTop-n.y;return N.some({x:i,y:r})}return N.none()},setUiContainer:function(t,e){var n=p.DOM.select(t.settings.ui_container)[0];e.getRoot().uiContainer=n},getUiContainer:M,inheritUiContainer:function(t,e){return e.uiContainer=M(t)}},O=function(t,e,n){var i,r=[];if(e)return a.each(e.split(/[ ,]/),function(e){var s,o=function(){var n=t.selection;e.settings.stateSelector&&n.selectorChanged(e.settings.stateSelector,function(t){e.active(t)},!0),e.settings.disabledStateSelector&&n.selectorChanged(e.settings.disabledStateSelector,function(t){e.disabled(t)})};"|"===e?i=null:(i||(i={type:"buttongroup",items:[]},r.push(i)),t.buttons[e]&&(s=e,"function"==typeof(e=t.buttons[s])&&(e=e()),e.type=e.type||"button",e.size=n,e=m.create(e),i.items.push(e),t.initialized?o():t.on("init",o)))}),{type:"toolbar",layout:"flow",items:r}},H=O,F=function(t,e){var n=[];if(a.each(function(t){var e=t.getParam("toolbar");return!1===e?[]:a.isArray(e)?a.grep(e,function(t){return t.length>0}):function(t,e){for(var n=[],i=1;i<10;i++){var r=t["toolbar"+i];if(!r)break;n.push(r)}var s=t.toolbar?[t.toolbar]:[e];return n.length>0?n:s}(t.settings,"undo redo | styleselect | bold italic | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | link image")}(t),function(i){var r;(r=i)&&n.push(O(t,r,e))}),n.length)return{type:"panel",layout:"stack",classes:"toolbar-grp",ariaRoot:!0,ariaRemember:!0,items:n}},I=p.DOM,B=function(t){return{left:t.x,top:t.y,width:t.w,height:t.h,right:t.x+t.w,bottom:t.y+t.h}},L=function(t,e){t.moveTo(e.left,e.top)},W=function(t,e,n,i,r,s){return s=B({x:e,y:n,w:s.w,h:s.h}),t&&(s=t({elementRect:B(i),contentAreaRect:B(r),panelRect:s})),s},z=function(t){var e,n=function(){return t.contextToolbars||[]},i=function(e,n){var i,r,s,o,l,u,c,d=function(t){return t.getParam("inline_toolbar_position_handler")}(t);if(!t.removed)if(e&&e.toolbar.panel){var f,h,p,m;c=["bc-tc","tc-bc","tl-bl","bl-tl","tr-br","br-tr"],l=e.toolbar.panel,n&&l.show(),f=e.element,h=I.getPos(t.getContentAreaContainer()),p=t.dom.getRect(f),"BODY"===(m=t.dom.getRoot()).nodeName&&(p.x-=m.ownerDocument.documentElement.scrollLeft||m.scrollLeft,p.y-=m.ownerDocument.documentElement.scrollTop||m.scrollTop),p.x+=h.x,p.y+=h.y,s=p,r=I.getRect(l.getEl()),o=I.getRect(t.getContentAreaContainer()||t.getBody());var g=A.getUiContainerDelta(l).getOr({x:0,y:0});if(s.x+=g.x,s.y+=g.y,r.x+=g.x,r.y+=g.y,o.x+=g.x,o.y+=g.y,"inline"!==I.getStyle(e.element,"display",!0)){var v=e.element.getBoundingClientRect();s.w=v.width,s.h=v.height}t.inline||(o.w=t.getDoc().documentElement.offsetWidth),t.selection.controlSelection.isResizable(e.element)&&s.w<25&&(s=_.inflate(s,0,8)),i=_.findBestRelativePosition(r,s,o,c),s=_.clamp(s,o),i?(u=_.relativePosition(r,s,i),L(l,W(d,u.x,u.y,s,o,r))):(o.h+=r.h,(s=_.intersect(o,s))?(i=_.findBestRelativePosition(r,s,o,["bc-tc","bl-tl","br-tr"]))?(u=_.relativePosition(r,s,i),L(l,W(d,u.x,u.y,s,o,r))):L(l,W(d,s.x,s.y,s,o,r)):l.hide()),function(t,e,n){e=e?e.substr(0,2):"",a.each({t:"down",b:"up"},function(i,r){t.classes.toggle("arrow-"+i,n(r,e.substr(0,1)))}),a.each({l:"left",r:"right"},function(i,r){t.classes.toggle("arrow-"+i,n(r,e.substr(1,1)))})}(l,i,function(t,e){return t===e})}else!function(t){a.each(t.contextToolbars,function(t){t.panel&&t.panel.hide()})}(t)},r=function(e){return function(){C.requestAnimationFrame(function(){t.selection&&i(l(t.selection.getNode()),e)})}},s=function(n){var s;if(n.toolbar.panel)return n.toolbar.panel.show(),void i(n);s=m.create({type:"floatpanel",role:"dialog",classes:"tinymce tinymce-inline arrow",ariaLabel:"Inline toolbar",layout:"flex",direction:"column",align:"stretch",autohide:!1,autofix:!0,fixed:!0,border:1,items:H(t,n.toolbar.items),oncancel:function(){t.focus()}}),A.setUiContainer(t,s),function(n){if(!e){var i=r(!0),s=A.getUiContainer(n);e=t.selection.getScrollContainer()||t.getWin(),I.bind(e,"scroll",i),I.bind(s,"scroll",i),t.on("remove",function(){I.unbind(e,"scroll",i),I.unbind(s,"scroll",i)})}}(s),n.toolbar.panel=s,s.renderTo().reflow(),i(n)},o=function(){a.each(n(),function(t){t.panel&&t.panel.hide()})},l=function(e){var i,r,s,o=n();for(i=(s=t.$(e).parents().add(e)).length-1;i>=0;i--)for(r=o.length-1;r>=0;r--)if(o[r].predicate(s[i]))return{toolbar:o[r],element:s[i]};return null};t.on("click keyup setContent ObjectResized",function(e){("setcontent"!==e.type||e.selection)&&C.setEditorTimeout(t,function(){var e;(e=l(t.selection.getNode()))?(o(),s(e)):o()})}),t.on("blur hide contextmenu",o),t.on("ObjectResizeStart",function(){var e=l(t.selection.getNode());e&&e.toolbar.panel&&e.toolbar.panel.hide()}),t.on("ResizeEditor ResizeWindow",r(!0)),t.on("nodeChange",r(!1)),t.on("remove",function(){a.each(n(),function(t){t.panel&&t.panel.remove()}),t.contextToolbars={}}),t.shortcuts.add("ctrl+F9","",function(){var e=l(t.selection.getNode());e&&e.toolbar.panel&&e.toolbar.panel.items()[0].focus()})},V=function(t){return function(e){return function(t){if(null===t)return"null";var e=typeof t;return"object"===e&&Array.prototype.isPrototypeOf(t)?"array":"object"===e&&String.prototype.isPrototypeOf(t)?"string":e}(e)===t}},$=V("function"),U=V("number"),q=void 0===(r=Array.prototype.indexOf)?function(t,e){return Z(t,e)}:function(t,e){return r.call(t,e)},j=function(t,e){return J(t,e).isSome()},Y=function(t,e){for(var n=t.length,i=new Array(n),r=0;r<n;r++){var s=t[r];i[r]=e(s,r,t)}return i},X=function(t,e){for(var n=0,i=t.length;n<i;n++)e(t[n],n,t)},G=function(t,e){for(var n=[],i=0,r=t.length;i<r;i++){var s=t[i];e(s,i,t)&&n.push(s)}return n},J=function(t,e){for(var n=0,i=t.length;n<i;n++)if(e(t[n],n,t))return N.some(n);return N.none()},Z=function(t,e){for(var n=0,i=t.length;n<i;++n)if(t[n]===e)return n;return-1},K=Array.prototype.push,Q=(Array.prototype.slice,$(Array.from)&&Array.from,{file:{title:"File",items:"newdocument restoredraft | preview | print"},edit:{title:"Edit",items:"undo redo | cut copy paste pastetext | selectall"},view:{title:"View",items:"code | visualaid visualchars visualblocks | spellchecker | preview fullscreen"},insert:{title:"Insert",items:"image link media template codesample inserttable | charmap hr | pagebreak nonbreaking anchor toc | insertdatetime"},format:{title:"Format",items:"bold italic underline strikethrough superscript subscript codeformat | blockformats align | removeformat"},tools:{title:"Tools",items:"spellchecker spellcheckerlanguage | a11ycheck code"},table:{title:"Table"},help:{title:"Help"}}),tt=function(t,e){return"|"===t?{name:"|",item:{text:"|"}}:e?{name:t,item:e}:null},et=function(t){return t&&"|"===t.item.text},nt=function(t,e,n,i){var r,s,o,l;return e?(s=e[i],l=!0):s=Q[i],s&&(r={text:s.title},o=[],a.each((s.items||"").split(/[ ,]/),function(e){var n=tt(e,t[e]);n&&o.push(n)}),l||a.each(t,function(t,e){t.context!==i||function(t,e){return J(t,function(t){return t.name===e}).isSome()}(o,e)||("before"===t.separator&&o.push({name:"|",item:{text:"|"}}),t.prependToContext?o.unshift(tt(e,t)):o.push(tt(e,t)),"after"===t.separator&&o.push({name:"|",item:{text:"|"}}))}),r.menu=Y(function(t,e){var n=G(t,function(t){return!1===e.hasOwnProperty(t.name)}),i=G(n,function(t,e,n){return!et(t)||!et(n[e-1])});return G(i,function(t,e,n){return!et(t)||e>0&&e<n.length-1})}(o,n),function(t){return t.item}),!r.menu.length)?null:r},it=function(t){for(var e=[],n=function(t){var e,n=[],i=d(t);if(i)for(e in i)n.push(e);else for(e in Q)n.push(e);return n}(t),i=a.makeMap(function(t){return t.getParam("removed_menuitems","")}(t).split(/[ ,]/)),r=u(t),s="string"==typeof r?r.split(/[ ,]/):n,o=0;o<s.length;o++){var l=s[o],c=nt(t.menuItems,d(t),i,l);c&&e.push(c)}return e},rt=p.DOM,st=function(t){return{width:t.clientWidth,height:t.clientHeight}},ot=function(t,e,n){var i,r,s,o;i=t.getContainer(),r=t.getContentAreaContainer().firstChild,s=st(i),o=st(r),null!==e&&(e=Math.max(function(t){return t.getParam("min_width",100,"number")}(t),e),e=Math.min(function(t){return t.getParam("max_width",65535,"number")}(t),e),rt.setStyle(i,"width",e+(s.width-o.width)),rt.setStyle(r,"width",e)),n=Math.max(function(t){return t.getParam("min_height",100,"number")}(t),n),n=Math.min(function(t){return t.getParam("max_height",65535,"number")}(t),n),rt.setStyle(r,"height",n),y(t)},at=ot,lt=function(t,e,n){var i=t.getContentAreaContainer();ot(t,i.clientWidth+e,i.clientHeight+n)},ut=tinymce.util.Tools.resolve("tinymce.Env"),ct=function(t,e,n){var i,r=t.settings[n];r&&r((i=e.getEl("body"),{element:function(){return i}}))},dt=function(t,e,n){return function(i){var r=i.control,s=r.parents().filter("panel")[0],o=s.find("#"+e)[0],l=function(t,e){return a.grep(t,function(t){return t.name===e})[0]}(n,e);!function(t,e,n){a.each(n,function(n){var i=e.items().filter("#"+n.name)[0];i&&i.visible()&&n.name!==t&&(ct(n,i,"onhide"),i.visible(!1))})}(e,s,n),r.parent().items().each(function(t){t.active(!1)}),o&&o.visible()?(ct(l,o,"onhide"),o.hide(),r.active(!1)):(o?(o.show(),ct(l,o,"onshow")):(o=m.create({type:"container",name:e,layout:"stack",classes:"sidebar-panel",html:""}),s.prepend(o),ct(l,o,"onrender"),ct(l,o,"onshow")),r.active(!0)),y(t)}},ft=function(t){return!(ut.ie&&!(ut.ie>=11)||!t.sidebars)&&t.sidebars.length>0},ht=function(t){return{type:"panel",name:"sidebar",layout:"stack",classes:"sidebar",items:[{type:"toolbar",layout:"stack",classes:"sidebar-toolbar",items:a.map(t.sidebars,function(e){var n=e.settings;return{type:"button",icon:n.icon,image:n.image,tooltip:n.tooltip,onclick:dt(t,e.name,t.sidebars)}})}]}},pt=function(t){var e=function(){t._skinLoaded=!0,v(t)};return function(){t.initialized?e():t.on("init",e)}},mt=p.DOM,gt=function(t){return{type:"panel",name:"iframe",layout:"stack",classes:"edit-area",border:t,html:""}},vt=function(t,e,n){var i,r,s;if(!1===f(t)&&n.skinUiCss?mt.styleSheetLoader.load(n.skinUiCss,pt(t)):pt(t)(),i=e.panel=m.create({type:"panel",role:"application",classes:"tinymce",style:"visibility: hidden",layout:"stack",border:1,items:[{type:"container",classes:"top-part",items:[!1===l(t)?null:{type:"menubar",border:"0 0 1 0",items:it(t)},F(t,c(t))]},ft(t)?function(t){return{type:"panel",layout:"stack",classes:"edit-aria-container",border:"1 0 0 0",items:[gt("0"),ht(t)]}}(t):gt("1 0 0 0")]}),A.setUiContainer(t,i),"none"!==h(t)&&(r={type:"resizehandle",direction:h(t),onResizeStart:function(){var e=t.getContentAreaContainer().firstChild;s={width:e.clientWidth,height:e.clientHeight}},onResize:function(e){"both"===h(t)?at(t,s.width+e.deltaX,s.height+e.deltaY):at(t,null,s.height+e.deltaY)}}),function(t){return t.getParam("statusbar",!0,"boolean")}(t)){var o=g.translate(["Powered by {0}",'<a href="https://www.tinymce.com/?utm_campaign=editor_referral&amp;utm_medium=poweredby&amp;utm_source=tinymce" rel="noopener" target="_blank" role="presentation" tabindex="-1">tinymce</a>']),a=function(t){return t.getParam("branding",!0,"boolean")}(t)?{type:"label",classes:"branding",html:" "+o}:null;i.add({type:"panel",name:"statusbar",classes:"statusbar",layout:"flow",border:"1 0 0 0",ariaRoot:!0,items:[{type:"elementpath",editor:t},r,a]})}return b(t),t.on("SwitchMode",function(t){return function(e){t.find("*").disabled("readonly"===e.mode)}}(i)),i.renderBefore(n.targetNode).reflow(),function(t){return t.getParam("readonly",!1,"boolean")}(t)&&t.setMode("readonly"),n.width&&mt.setStyle(i.getEl(),"width",n.width),t.on("remove",function(){i.remove(),i=null}),w(t,i),z(t),{iframeContainer:i.find("#iframe")[0].getEl(),editorContainer:i.getEl()}},yt=tinymce.util.Tools.resolve("tinymce.dom.DomQuery"),bt=0,xt={id:function(){return"mceu_"+bt++},create:function(t,e,n){var i=document.createElement(t);return p.DOM.setAttribs(i,e),"string"==typeof n?i.innerHTML=n:a.each(n,function(t){t.nodeType&&i.appendChild(t)}),i},createFragment:function(t){return p.DOM.createFragment(t)},getWindowSize:function(){return p.DOM.getViewPort()},getSize:function(t){var e,n;if(t.getBoundingClientRect){var i=t.getBoundingClientRect();e=Math.max(i.width||i.right-i.left,t.offsetWidth),n=Math.max(i.height||i.bottom-i.bottom,t.offsetHeight)}else e=t.offsetWidth,n=t.offsetHeight;return{width:e,height:n}},getPos:function(t,e){return p.DOM.getPos(t,e||xt.getContainer())},getContainer:function(){return ut.container?ut.container:document.body},getViewPort:function(t){return p.DOM.getViewPort(t)},get:function(t){return document.getElementById(t)},addClass:function(t,e){return p.DOM.addClass(t,e)},removeClass:function(t,e){return p.DOM.removeClass(t,e)},hasClass:function(t,e){return p.DOM.hasClass(t,e)},toggleClass:function(t,e,n){return p.DOM.toggleClass(t,e,n)},css:function(t,e,n){return p.DOM.setStyle(t,e,n)},getRuntimeStyle:function(t,e){return p.DOM.getStyle(t,e,!0)},on:function(t,e,n,i){return p.DOM.bind(t,e,n,i)},off:function(t,e,n){return p.DOM.unbind(t,e,n)},fire:function(t,e,n){return p.DOM.fire(t,e,n)},innerHtml:function(t,e){p.DOM.setHTML(t,e)}},wt=function(t){return"static"===xt.getRuntimeStyle(t,"position")},_t=function(t){return t.state.get("fixed")};function Ct(t,e,n){var i,r,s,o,a,l,u,c,d,f;return d=kt(),s=(r=xt.getPos(e,A.getUiContainer(t))).x,o=r.y,_t(t)&&wt(document.body)&&(s-=d.x,o-=d.y),i=t.getEl(),a=(f=xt.getSize(i)).width,l=f.height,u=(f=xt.getSize(e)).width,c=f.height,"b"===(n=(n||"").split(""))[0]&&(o+=c),"r"===n[1]&&(s+=u),"c"===n[0]&&(o+=Math.round(c/2)),"c"===n[1]&&(s+=Math.round(u/2)),"b"===n[3]&&(o-=l),"r"===n[4]&&(s-=a),"c"===n[3]&&(o-=Math.round(l/2)),"c"===n[4]&&(s-=Math.round(a/2)),{x:s,y:o,w:a,h:l}}var kt=function(){var t=window;return{x:Math.max(t.pageXOffset,document.body.scrollLeft,document.documentElement.scrollLeft),y:Math.max(t.pageYOffset,document.body.scrollTop,document.documentElement.scrollTop),w:t.innerWidth||document.documentElement.clientWidth,h:t.innerHeight||document.documentElement.clientHeight}},Et=function(t){var e=A.getUiContainer(t);return e&&!_t(t)?function(t){return{x:0,y:0,w:t.scrollWidth-1,h:t.scrollHeight-1}}(e):kt()},Rt={testMoveRel:function(t,e){for(var n=Et(this),i=0;i<e.length;i++){var r=Ct(this,t,e[i]);if(_t(this)){if(r.x>0&&r.x+r.w<n.w&&r.y>0&&r.y+r.h<n.h)return e[i]}else if(r.x>n.x&&r.x+r.w<n.w+n.x&&r.y>n.y&&r.y+r.h<n.h+n.y)return e[i]}return e[0]},moveRel:function(t,e){"string"!=typeof e&&(e=this.testMoveRel(t,e));var n=Ct(this,t,e);return this.moveTo(n.x,n.y)},moveBy:function(t,e){var n=this.layoutRect();return this.moveTo(n.x+t,n.y+e),this},moveTo:function(t,e){function n(t,e,n){return t<0?0:t+n>e&&(t=e-n)<0?0:t}if(this.settings.constrainToViewport){var i=Et(this),r=this.layoutRect();t=n(t,i.w+i.x,r.w),e=n(e,i.h+i.y,r.h)}var s=A.getUiContainer(this);return s&&wt(s)&&!_t(this)&&(t-=s.scrollLeft,e-=s.scrollTop),s&&(t+=1,e+=1),this.state.get("rendered")?this.layoutRect({x:t,y:e}).repaint():(this.settings.x=t,this.settings.y=e),this.fire("move",{x:t,y:e}),this}},Tt=tinymce.util.Tools.resolve("tinymce.util.Class"),St=tinymce.util.Tools.resolve("tinymce.util.EventDispatcher"),Dt=function(t){var e;if(t)return"number"==typeof t?{top:t=t||0,left:t,bottom:t,right:t}:(1===(e=(t=t.split(" ")).length)?t[1]=t[2]=t[3]=t[0]:2===e?(t[2]=t[0],t[3]=t[1]):3===e&&(t[3]=t[1]),{top:parseInt(t[0],10)||0,right:parseInt(t[1],10)||0,bottom:parseInt(t[2],10)||0,left:parseInt(t[3],10)||0})},Pt=function(t,e){function n(e){var n=parseFloat(function(e){var n=t.ownerDocument.defaultView;if(n){var i=n.getComputedStyle(t,null);return i?(e=e.replace(/[A-Z]/g,function(t){return"-"+t}),i.getPropertyValue(e)):null}return t.currentStyle[e]}(e));return isNaN(n)?0:n}return{top:n(e+"TopWidth"),right:n(e+"RightWidth"),bottom:n(e+"BottomWidth"),left:n(e+"LeftWidth")}};function Nt(){}function Mt(t){this.cls=[],this.cls._map={},this.onchange=t||Nt,this.prefix=""}a.extend(Mt.prototype,{add:function(t){return t&&!this.contains(t)&&(this.cls._map[t]=!0,this.cls.push(t),this._change()),this},remove:function(t){if(this.contains(t)){var e=void 0;for(e=0;e<this.cls.length&&this.cls[e]!==t;e++);this.cls.splice(e,1),delete this.cls._map[t],this._change()}return this},toggle:function(t,e){var n=this.contains(t);return n!==e&&(n?this.remove(t):this.add(t),this._change()),this},contains:function(t){return!!this.cls._map[t]},_change:function(){delete this.clsValue,this.onchange.call(this)}}),Mt.prototype.toString=function(){var t;if(this.clsValue)return this.clsValue;t="";for(var e=0;e<this.cls.length;e++)e>0&&(t+=" "),t+=this.prefix+this.cls[e];return t};var At,Ot,Ht,Ft=/^([\w\\*]+)?(?:#([\w\-\\]+))?(?:\.([\w\\\.]+))?(?:\[\@?([\w\\]+)([\^\$\*!~]?=)([\w\\]+)\])?(?:\:(.+))?/i,It=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^\[\]]*\]|['"][^'"]*['"]|[^\[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?((?:.|\r|\n)*)/g,Bt=/^\s*|\s*$/g,Lt=Tt.extend({init:function(t){var e=this.match;function n(t,n,r){var s;function o(t){t&&n.push(t)}return o(function(t){if(t)return t=t.toLowerCase(),function(e){return"*"===t||e.type===t}}((s=Ft.exec(t.replace(Bt,"")))[1])),o(function(t){if(t)return function(e){return e._name===t}}(s[2])),o(function(t){if(t)return t=t.split("."),function(e){for(var n=t.length;n--;)if(!e.classes.contains(t[n]))return!1;return!0}}(s[3])),o(function(t,e,n){if(t)return function(i){var r=i[t]?i[t]():"";return e?"="===e?r===n:"*="===e?r.indexOf(n)>=0:"~="===e?(" "+r+" ").indexOf(" "+n+" ")>=0:"!="===e?r!==n:"^="===e?0===r.indexOf(n):"$="===e&&r.substr(r.length-n.length)===n:!!n}}(s[4],s[5],s[6])),o(function(t){var n;if(t)return(t=/(?:not\((.+)\))|(.+)/i.exec(t))[1]?(n=i(t[1],[]),function(t){return!e(t,n)}):(t=t[2],function(e,n,i){return"first"===t?0===n:"last"===t?n===i-1:"even"===t?n%2==0:"odd"===t?n%2==1:!!e[t]&&e[t]()})}(s[7])),n.pseudo=!!s[7],n.direct=r,n}function i(t,e){var r,s,o,a=[];do{if(It.exec(""),(s=It.exec(t))&&(t=s[3],a.push(s[1]),s[2])){r=s[3];break}}while(s);for(r&&i(r,e),t=[],o=0;o<a.length;o++)">"!==a[o]&&t.push(n(a[o],[],">"===a[o-1]));return e.push(t),e}this._selectors=i(t,[])},match:function(t,e){var n,i,r,s,o,a,l,u,c,d,f,h,p;for(n=0,i=(e=e||this._selectors).length;n<i;n++){for(p=t,h=0,r=(s=(o=e[n]).length)-1;r>=0;r--)for(u=o[r];p;){if(u.pseudo)for(c=d=(f=p.parent().items()).length;c--&&f[c]!==p;);for(a=0,l=u.length;a<l;a++)if(!u[a](p,c,d)){a=l+1;break}if(a===l){h++;break}if(r===s-1)break;p=p.parent()}if(h===s)return!0}return!1},find:function(t){var e,n,i=[],r=this._selectors;function s(t,e,n){var r,o,a,l,u,c=e[n];for(r=0,o=t.length;r<o;r++){for(u=t[r],a=0,l=c.length;a<l;a++)if(!c[a](u,r,o)){a=l+1;break}if(a===l)n===e.length-1?i.push(u):u.items&&s(u.items(),e,n+1);else if(c.direct)return;u.items&&s(u.items(),e,n)}}if(t.items){for(e=0,n=r.length;e<n;e++)s(t.items(),r[e],0);n>1&&(i=function(t){for(var e,n=[],i=t.length;i--;)(e=t[i]).__checked||(n.push(e),e.__checked=1);for(i=n.length;i--;)delete n[i].__checked;return n}(i))}return At||(At=Lt.Collection),new At(i)}}),Wt=Array.prototype.push,zt=Array.prototype.slice;Ht={length:0,init:function(t){t&&this.add(t)},add:function(t){return a.isArray(t)?Wt.apply(this,t):t instanceof Ot?this.add(t.toArray()):Wt.call(this,t),this},set:function(t){var e,n=this.length;for(this.length=0,this.add(t),e=this.length;e<n;e++)delete this[e];return this},filter:function(t){var e,n,i,r,s=[];for("string"==typeof t?(t=new Lt(t),r=function(e){return t.match(e)}):r=t,e=0,n=this.length;e<n;e++)r(i=this[e])&&s.push(i);return new Ot(s)},slice:function(){return new Ot(zt.apply(this,arguments))},eq:function(t){return-1===t?this.slice(t):this.slice(t,+t+1)},each:function(t){return a.each(this,t),this},toArray:function(){return a.toArray(this)},indexOf:function(t){for(var e=this.length;e--&&this[e]!==t;);return e},reverse:function(){return new Ot(a.toArray(this).reverse())},hasClass:function(t){return!!this[0]&&this[0].classes.contains(t)},prop:function(t,e){var n;return void 0!==e?(this.each(function(n){n[t]&&n[t](e)}),this):(n=this[0])&&n[t]?n[t]():void 0},exec:function(t){var e=a.toArray(arguments).slice(1);return this.each(function(n){n[t]&&n[t].apply(n,e)}),this},remove:function(){for(var t=this.length;t--;)this[t].remove();return this},addClass:function(t){return this.each(function(e){e.classes.add(t)})},removeClass:function(t){return this.each(function(e){e.classes.remove(t)})}},a.each("fire on off show hide append prepend before after reflow".split(" "),function(t){Ht[t]=function(){var e=a.toArray(arguments);return this.each(function(n){t in n&&n[t].apply(n,e)}),this}}),a.each("text name disabled active selected checked visible parent value data".split(" "),function(t){Ht[t]=function(e){return this.prop(t,e)}}),Ot=Tt.extend(Ht),Lt.Collection=Ot;var Vt=Ot,$t=function(t){this.create=t.create};$t.create=function(t,e){return new $t({create:function(n,i){var r,s=function(t){n.set(i,t.value)};return n.on("change:"+i,function(n){t.set(e,n.value)}),t.on("change:"+e,s),(r=n._bindings)||(r=n._bindings=[],n.on("destroy",function(){for(var t=r.length;t--;)r[t]()})),r.push(function(){t.off("change:"+e,s)}),t.get(e)}})};var Ut=tinymce.util.Tools.resolve("tinymce.util.Observable");function qt(t){return t.nodeType>0}var jt,Yt,Xt=Tt.extend({Mixins:[Ut],init:function(t){var e,n;for(e in t=t||{})(n=t[e])instanceof $t&&(t[e]=n.create(this,e));this.data=t},set:function(t,e){var n,i,r=this.data[t];if(e instanceof $t&&(e=e.create(this,t)),"object"==typeof t){for(n in t)this.set(n,t[n]);return this}return function t(e,n){var i,r;if(e===n)return!0;if(null===e||null===n)return e===n;if("object"!=typeof e||"object"!=typeof n)return e===n;if(a.isArray(n)){if(e.length!==n.length)return!1;for(i=e.length;i--;)if(!t(e[i],n[i]))return!1}if(qt(e)||qt(n))return e===n;for(i in r={},n){if(!t(e[i],n[i]))return!1;r[i]=!0}for(i in e)if(!r[i]&&!t(e[i],n[i]))return!1;return!0}(r,e)||(this.data[t]=e,i={target:this,name:t,value:e,oldValue:r},this.fire("change:"+t,i),this.fire("change",i)),this},get:function(t){return this.data[t]},has:function(t){return t in this.data},bind:function(t){return $t.create(this,t)},destroy:function(){this.fire("destroy")}}),Gt={},Jt={add:function(t){var e=t.parent();if(e){if(!e._layout||e._layout.isNative())return;Gt[e._id]||(Gt[e._id]=e),jt||(jt=!0,C.requestAnimationFrame(function(){var t,e;for(t in jt=!1,Gt)(e=Gt[t]).state.get("rendered")&&e.reflow();Gt={}},document.body))}},remove:function(t){Gt[t._id]&&delete Gt[t._id]}},Zt="onmousewheel"in document,Kt=!1,Qt=0,te={Statics:{classPrefix:"mce-"},isRtl:function(){return Yt.rtl},classPrefix:"mce-",init:function(t){var e,n,i=this;function r(t){var e;for(t=t.split(" "),e=0;e<t.length;e++)i.classes.add(t[e])}i.settings=t=a.extend({},i.Defaults,t),i._id=t.id||"mceu_"+Qt++,i._aria={role:t.role},i._elmCache={},i.$=yt,i.state=new Xt({visible:!0,active:!1,disabled:!1,value:""}),i.data=new Xt(t.data),i.classes=new Mt(function(){i.state.get("rendered")&&(i.getEl().className=this.toString())}),i.classes.prefix=i.classPrefix,(e=t.classes)&&(i.Defaults&&(n=i.Defaults.classes)&&e!==n&&r(n),r(e)),a.each("title text name visible disabled active value".split(" "),function(e){e in t&&i[e](t[e])}),i.on("click",function(){if(i.disabled())return!1}),i.settings=t,i.borderBox=Dt(t.border),i.paddingBox=Dt(t.padding),i.marginBox=Dt(t.margin),t.hidden&&i.hide()},Properties:"parent,name",getContainerElm:function(){var t=A.getUiContainer(this);return t||xt.getContainer()},getParentCtrl:function(t){for(var e,n=this.getRoot().controlIdLookup;t&&n&&!(e=n[t.id]);)t=t.parentNode;return e},initLayoutRect:function(){var t,e,n,i,r,s,o,a,l,u,c=this.settings,d=this.getEl();t=this.borderBox=this.borderBox||Pt(d,"border"),this.paddingBox=this.paddingBox||Pt(d,"padding"),this.marginBox=this.marginBox||Pt(d,"margin"),u=xt.getSize(d),a=c.minWidth,l=c.minHeight,r=a||u.width,s=l||u.height,n=c.width,i=c.height,o=void 0!==(o=c.autoResize)?o:!n&&!i,n=n||r,i=i||s;var f=t.left+t.right,h=t.top+t.bottom,p=c.maxWidth||65535,m=c.maxHeight||65535;return this._layoutRect=e={x:c.x||0,y:c.y||0,w:n,h:i,deltaW:f,deltaH:h,contentW:n-f,contentH:i-h,innerW:n-f,innerH:i-h,startMinWidth:a||0,startMinHeight:l||0,minW:Math.min(r,p),minH:Math.min(s,m),maxW:p,maxH:m,autoResize:o,scrollW:0},this._lastLayoutRect={},e},layoutRect:function(t){var e,n,i,r,s,o=this._layoutRect;return o||(o=this.initLayoutRect()),t?(i=o.deltaW,r=o.deltaH,void 0!==t.x&&(o.x=t.x),void 0!==t.y&&(o.y=t.y),void 0!==t.minW&&(o.minW=t.minW),void 0!==t.minH&&(o.minH=t.minH),void 0!==(n=t.w)&&(n=(n=n<o.minW?o.minW:n)>o.maxW?o.maxW:n,o.w=n,o.innerW=n-i),void 0!==(n=t.h)&&(n=(n=n<o.minH?o.minH:n)>o.maxH?o.maxH:n,o.h=n,o.innerH=n-r),void 0!==(n=t.innerW)&&(n=(n=n<o.minW-i?o.minW-i:n)>o.maxW-i?o.maxW-i:n,o.innerW=n,o.w=n+i),void 0!==(n=t.innerH)&&(n=(n=n<o.minH-r?o.minH-r:n)>o.maxH-r?o.maxH-r:n,o.innerH=n,o.h=n+r),void 0!==t.contentW&&(o.contentW=t.contentW),void 0!==t.contentH&&(o.contentH=t.contentH),(e=this._lastLayoutRect).x===o.x&&e.y===o.y&&e.w===o.w&&e.h===o.h||((s=Yt.repaintControls)&&s.map&&!s.map[this._id]&&(s.push(this),s.map[this._id]=!0),e.x=o.x,e.y=o.y,e.w=o.w,e.h=o.h),this):o},repaint:function(){var t,e,n,i,r,s,o,a,l,u;l=document.createRange?function(t){return t}:Math.round,t=this.getEl().style,i=this._layoutRect,a=this._lastRepaintRect||{},s=(r=this.borderBox).left+r.right,o=r.top+r.bottom,i.x!==a.x&&(t.left=l(i.x)+"px",a.x=i.x),i.y!==a.y&&(t.top=l(i.y)+"px",a.y=i.y),i.w!==a.w&&(u=l(i.w-s),t.width=(u>=0?u:0)+"px",a.w=i.w),i.h!==a.h&&(u=l(i.h-o),t.height=(u>=0?u:0)+"px",a.h=i.h),this._hasBody&&i.innerW!==a.innerW&&(u=l(i.innerW),(n=this.getEl("body"))&&((e=n.style).width=(u>=0?u:0)+"px"),a.innerW=i.innerW),this._hasBody&&i.innerH!==a.innerH&&(u=l(i.innerH),(n=n||this.getEl("body"))&&((e=e||n.style).height=(u>=0?u:0)+"px"),a.innerH=i.innerH),this._lastRepaintRect=a,this.fire("repaint",{},!1)},updateLayoutRect:function(){this.parent()._lastRect=null,xt.css(this.getEl(),{width:"",height:""}),this._layoutRect=this._lastRepaintRect=this._lastLayoutRect=null,this.initLayoutRect()},on:function(t,e){var n=this;return ee(n).on(t,function(t){var e,i;return"string"!=typeof t?t:function(r){return e||n.parentsAndSelf().each(function(n){var r=n.settings.callbacks;if(r&&(e=r[t]))return i=n,!1}),e?e.call(i,r):(r.action=t,void this.fire("execute",r))}}(e)),n},off:function(t,e){return ee(this).off(t,e),this},fire:function(t,e,n){if((e=e||{}).control||(e.control=this),e=ee(this).fire(t,e),!1!==n&&this.parent)for(var i=this.parent();i&&!e.isPropagationStopped();)i.fire(t,e,!1),i=i.parent();return e},hasEventListeners:function(t){return ee(this).has(t)},parents:function(t){var e,n=new Vt;for(e=this.parent();e;e=e.parent())n.add(e);return t&&(n=n.filter(t)),n},parentsAndSelf:function(t){return new Vt(this).add(this.parents(t))},next:function(){var t=this.parent().items();return t[t.indexOf(this)+1]},prev:function(){var t=this.parent().items();return t[t.indexOf(this)-1]},innerHtml:function(t){return this.$el.html(t),this},getEl:function(t){var e=t?this._id+"-"+t:this._id;return this._elmCache[e]||(this._elmCache[e]=yt("#"+e)[0]),this._elmCache[e]},show:function(){return this.visible(!0)},hide:function(){return this.visible(!1)},focus:function(){try{this.getEl().focus()}catch(t){}return this},blur:function(){return this.getEl().blur(),this},aria:function(t,e){var n=this.getEl(this.ariaTarget);return void 0===e?this._aria[t]:(this._aria[t]=e,this.state.get("rendered")&&n.setAttribute("role"===t?t:"aria-"+t,e),this)},encode:function(t,e){return!1!==e&&(t=this.translate(t)),(t||"").replace(/[&<>"]/g,function(t){return"&#"+t.charCodeAt(0)+";"})},translate:function(t){return Yt.translate?Yt.translate(t):t},before:function(t){var e=this.parent();return e&&e.insert(t,e.items().indexOf(this),!0),this},after:function(t){var e=this.parent();return e&&e.insert(t,e.items().indexOf(this)),this},remove:function(){var t,e,n=this,i=n.getEl(),r=n.parent();if(n.items){var s=n.items().toArray();for(e=s.length;e--;)s[e].remove()}r&&r.items&&(t=[],r.items().each(function(e){e!==n&&t.push(e)}),r.items().set(t),r._lastRect=null),n._eventsRoot&&n._eventsRoot===n&&yt(i).off();var o=n.getRoot().controlIdLookup;return o&&delete o[n._id],i&&i.parentNode&&i.parentNode.removeChild(i),n.state.set("rendered",!1),n.state.destroy(),n.fire("remove"),n},renderBefore:function(t){return yt(t).before(this.renderHtml()),this.postRender(),this},renderTo:function(t){return yt(t||this.getContainerElm()).append(this.renderHtml()),this.postRender(),this},preRender:function(){},render:function(){},renderHtml:function(){return'<div id="'+this._id+'" class="'+this.classes+'"></div>'},postRender:function(){var t,e,n,i,r,s=this,o=s.settings;for(i in s.$el=yt(s.getEl()),s.state.set("rendered",!0),o)0===i.indexOf("on")&&s.on(i.substr(2),o[i]);if(s._eventsRoot){for(n=s.parent();!r&&n;n=n.parent())r=n._eventsRoot;if(r)for(i in r._nativeEvents)s._nativeEvents[i]=!0}ne(s),o.style&&(t=s.getEl())&&(t.setAttribute("style",o.style),t.style.cssText=o.style),s.settings.border&&(e=s.borderBox,s.$el.css({"border-top-width":e.top,"border-right-width":e.right,"border-bottom-width":e.bottom,"border-left-width":e.left}));var a=s.getRoot();for(var l in a.controlIdLookup||(a.controlIdLookup={}),a.controlIdLookup[s._id]=s,s._aria)s.aria(l,s._aria[l]);!1===s.state.get("visible")&&(s.getEl().style.display="none"),s.bindStates(),s.state.on("change:visible",function(t){var e,n=t.value;s.state.get("rendered")&&(s.getEl().style.display=!1===n?"none":"",s.getEl().getBoundingClientRect()),(e=s.parent())&&(e._lastRect=null),s.fire(n?"show":"hide"),Jt.add(s)}),s.fire("postrender",{},!1)},bindStates:function(){},scrollIntoView:function(t){var e,n,i,r,s,o,a=this.getEl(),l=a.parentNode,u=function(t,e){var n,i,r=t;for(n=i=0;r&&r!==e&&r.nodeType;)n+=r.offsetLeft||0,i+=r.offsetTop||0,r=r.offsetParent;return{x:n,y:i}}(a,l);return e=u.x,n=u.y,i=a.offsetWidth,r=a.offsetHeight,s=l.clientWidth,o=l.clientHeight,"end"===t?(e-=s-i,n-=o-r):"center"===t&&(e-=s/2-i/2,n-=o/2-r/2),l.scrollLeft=e,l.scrollTop=n,this},getRoot:function(){for(var t,e=this,n=[];e;){if(e.rootControl){t=e.rootControl;break}n.push(e),t=e,e=e.parent()}t||(t=this);for(var i=n.length;i--;)n[i].rootControl=t;return t},reflow:function(){Jt.remove(this);var t=this.parent();return t&&t._layout&&!t._layout.isNative()&&t.reflow(),this}};function ee(t){return t._eventDispatcher||(t._eventDispatcher=new St({scope:t,toggleEvent:function(e,n){n&&St.isNative(e)&&(t._nativeEvents||(t._nativeEvents={}),t._nativeEvents[e]=!0,t.state.get("rendered")&&ne(t))}})),t._eventDispatcher}function ne(t){var e,n,i,r,s,o;function a(e){var n=t.getParentCtrl(e.target);n&&n.fire(e.type,e)}function l(){var t=r._lastHoverCtrl;t&&(t.fire("mouseleave",{target:t.getEl()}),t.parents().each(function(t){t.fire("mouseleave",{target:t.getEl()})}),r._lastHoverCtrl=null)}function u(e){var n,i,s,o=t.getParentCtrl(e.target),a=r._lastHoverCtrl,l=0;if(o!==a){if(r._lastHoverCtrl=o,(i=o.parents().toArray().reverse()).push(o),a){for((s=a.parents().toArray().reverse()).push(a),l=0;l<s.length&&i[l]===s[l];l++);for(n=s.length-1;n>=l;n--)(a=s[n]).fire("mouseleave",{target:a.getEl()})}for(n=l;n<i.length;n++)(o=i[n]).fire("mouseenter",{target:o.getEl()})}}function c(e){e.preventDefault(),"mousewheel"===e.type?(e.deltaY=-.025*e.wheelDelta,e.wheelDeltaX&&(e.deltaX=-.025*e.wheelDeltaX)):(e.deltaX=0,e.deltaY=e.detail),e=t.fire("wheel",e)}if(s=t._nativeEvents){for((i=t.parents().toArray()).unshift(t),e=0,n=i.length;!r&&e<n;e++)r=i[e]._eventsRoot;for(r||(r=i[i.length-1]||t),t._eventsRoot=r,n=e,e=0;e<n;e++)i[e]._eventsRoot=r;var d=r._delegates;for(o in d||(d=r._delegates={}),s){if(!s)return!1;"wheel"!==o||Kt?("mouseenter"===o||"mouseleave"===o?r._hasMouseEnter||(yt(r.getEl()).on("mouseleave",l).on("mouseover",u),r._hasMouseEnter=1):d[o]||(yt(r.getEl()).on(o,a),d[o]=!0),s[o]=!1):Zt?yt(t.getEl()).on("mousewheel",c):yt(t.getEl()).on("DOMMouseScroll",c)}}}a.each("text title visible disabled active value".split(" "),function(t){te[t]=function(e){return 0===arguments.length?this.state.get(t):(void 0!==e&&this.state.set(t,e),this)}});var ie=Yt=Tt.extend(te),re=function(t){return!!t.getAttribute("data-mce-tabstop")};function se(t){var e,n,i=t.root;function r(t){return t&&1===t.nodeType}try{e=document.activeElement}catch(t){e=document.body}function s(t){return r(t=t||e)?t.getAttribute("role"):null}function o(t){for(var n,i=t||e;i=i.parentNode;)if(n=s(i))return n}function a(t){var n=e;if(r(n))return n.getAttribute("aria-"+t)}function l(t){var e=t.tagName.toUpperCase();return"INPUT"===e||"TEXTAREA"===e||"SELECT"===e}function u(t){var e=[];return function t(n){if(1===n.nodeType&&"none"!==n.style.display&&!n.disabled){(function(t){return!(!l(t)||t.hidden)||!!re(t)||!!/^(button|menuitem|checkbox|tab|menuitemcheckbox|option|gridcell|slider)$/.test(s(t))})(n)&&e.push(n);for(var i=0;i<n.childNodes.length;i++)t(n.childNodes[i])}}(t||i.getEl()),e}function c(t){var e,i;(i=(t=t||n).parents().toArray()).unshift(t);for(var r=0;r<i.length&&!(e=i[r]).settings.ariaRoot;r++);return e}function d(t,e){return t<0?t=e.length-1:t>=e.length&&(t=0),e[t]&&e[t].focus(),t}function f(t,n){var i=-1,r=c();n=n||u(r.getEl());for(var s=0;s<n.length;s++)n[s]===e&&(i=s);i+=t,r.lastAriaIndex=d(i,n)}function h(){"tablist"===o()?f(-1,u(e.parentNode)):n.parent().submenu?v():f(-1)}function p(){var t=s(),n=o();"tablist"===n?f(1,u(e.parentNode)):"menuitem"===t&&"menu"===n&&a("haspopup")?y():f(1)}function m(){f(-1)}function g(){var t=s(),e=o();"menuitem"===t&&"menubar"===e?y():"button"===t&&a("haspopup")?y({key:"down"}):f(1)}function v(){n.fire("cancel")}function y(t){t=t||{},n.fire("click",{target:e,aria:t})}return n=i.getParentCtrl(e),i.on("keydown",function(t){function i(t,n){l(e)||re(e)||"slider"!==s(e)&&!1!==n(t)&&t.preventDefault()}if(!t.isDefaultPrevented())switch(t.keyCode){case 37:i(t,h);break;case 39:i(t,p);break;case 38:i(t,m);break;case 40:i(t,g);break;case 27:v();break;case 14:case 13:case 32:i(t,y);break;case 9:!function(t){if("tablist"===o()){var e=u(n.getEl("body"))[0];e&&e.focus()}else f(t.shiftKey?-1:1)}(t),t.preventDefault()}}),i.on("focusin",function(t){e=t.target,n=t.control}),{focusFirst:function(t){var e=c(t),n=u(e.getEl());e.settings.ariaRemember&&"lastAriaIndex"in e?d(e.lastAriaIndex,n):d(0,n)}}}var oe={},ae=ie.extend({init:function(t){var e=this;e._super(t),(t=e.settings).fixed&&e.state.set("fixed",!0),e._items=new Vt,e.isRtl()&&e.classes.add("rtl"),e.bodyClasses=new Mt(function(){e.state.get("rendered")&&(e.getEl("body").className=this.toString())}),e.bodyClasses.prefix=e.classPrefix,e.classes.add("container"),e.bodyClasses.add("container-body"),t.containerCls&&e.classes.add(t.containerCls),e._layout=m.create((t.layout||"")+"layout"),e.settings.items?e.add(e.settings.items):e.add(e.render()),e._hasBody=!0},items:function(){return this._items},find:function(t){return(t=oe[t]=oe[t]||new Lt(t)).find(this)},add:function(t){return this.items().add(this.create(t)).parent(this),this},focus:function(t){var e,n,i;if(!t||!(n=this.keyboardNav||this.parents().eq(-1)[0].keyboardNav))return i=this.find("*"),this.statusbar&&i.add(this.statusbar.items()),i.each(function(t){if(t.settings.autofocus)return e=null,!1;t.canFocus&&(e=e||t)}),e&&e.focus(),this;n.focusFirst(this)},replace:function(t,e){for(var n,i=this.items(),r=i.length;r--;)if(i[r]===t){i[r]=e;break}r>=0&&((n=e.getEl())&&n.parentNode.removeChild(n),(n=t.getEl())&&n.parentNode.removeChild(n)),e.parent(this)},create:function(t){var e,n=this,i=[];return a.isArray(t)||(t=[t]),a.each(t,function(t){t&&(t instanceof ie||("string"==typeof t&&(t={type:t}),e=a.extend({},n.settings.defaults,t),t.type=e.type=e.type||t.type||n.settings.defaultType||(e.defaults?e.defaults.type:null),t=m.create(e)),i.push(t))}),i},renderNew:function(){var t=this;return t.items().each(function(e,n){var i;e.parent(t),e.state.get("rendered")||((i=t.getEl("body")).hasChildNodes()&&n<=i.childNodes.length-1?yt(i.childNodes[n]).before(e.renderHtml()):yt(i).append(e.renderHtml()),e.postRender(),Jt.add(e))}),t._layout.applyClasses(t.items().filter(":visible")),t._lastRect=null,t},append:function(t){return this.add(t).renderNew()},prepend:function(t){return this.items().set(this.create(t).concat(this.items().toArray())),this.renderNew()},insert:function(t,e,n){var i,r,s;return t=this.create(t),i=this.items(),!n&&e<i.length-1&&(e+=1),e>=0&&e<i.length&&(r=i.slice(0,e).toArray(),s=i.slice(e).toArray(),i.set(r.concat(t,s))),this.renderNew()},fromJSON:function(t){for(var e in t)this.find("#"+e).value(t[e]);return this},toJSON:function(){var t={};return this.find("*").each(function(e){var n=e.name(),i=e.value();n&&void 0!==i&&(t[n]=i)}),t},renderHtml:function(){var t=this._layout,e=this.settings.role;return this.preRender(),t.preRender(this),'<div id="'+this._id+'" class="'+this.classes+'"'+(e?' role="'+this.settings.role+'"':"")+'><div id="'+this._id+'-body" class="'+this.bodyClasses+'">'+(this.settings.html||"")+t.renderHtml(this)+"</div></div>"},postRender:function(){var t;return this.items().exec("postRender"),this._super(),this._layout.postRender(this),this.state.set("rendered",!0),this.settings.style&&this.$el.css(this.settings.style),this.settings.border&&(t=this.borderBox,this.$el.css({"border-top-width":t.top,"border-right-width":t.right,"border-bottom-width":t.bottom,"border-left-width":t.left})),this.parent()||(this.keyboardNav=se({root:this})),this},initLayoutRect:function(){var t=this._super();return this._layout.recalc(this),t},recalc:function(){var t=this._layoutRect,e=this._lastRect;if(!e||e.w!==t.w||e.h!==t.h)return this._layout.recalc(this),t=this.layoutRect(),this._lastRect={x:t.x,y:t.y,w:t.w,h:t.h},!0},reflow:function(){var t;if(Jt.remove(this),this.visible()){for(ie.repaintControls=[],ie.repaintControls.map={},this.recalc(),t=ie.repaintControls.length;t--;)ie.repaintControls[t].repaint();"flow"!==this.settings.layout&&"stack"!==this.settings.layout&&this.repaint(),ie.repaintControls=[]}return this}});function le(t){var e,n;if(t.changedTouches)for(e="screenX screenY pageX pageY clientX clientY".split(" "),n=0;n<e.length;n++)t[e[n]]=t.changedTouches[0][e[n]]}function ue(t,e){var n,i,r,s,o,a,l,u=e.document||document;e=e||{};var c=u.getElementById(e.handle||t);r=function(t){var r,d,f=function(t){var e,n,i,r,s,o,a,l,u=Math.max;return e=t.documentElement,n=t.body,i=u(e.scrollWidth,n.scrollWidth),r=u(e.clientWidth,n.clientWidth),s=u(e.offsetWidth,n.offsetWidth),o=u(e.scrollHeight,n.scrollHeight),a=u(e.clientHeight,n.clientHeight),l=u(e.offsetHeight,n.offsetHeight),{width:i<s?r:i,height:o<l?a:o}}(u);le(t),t.preventDefault(),i=t.button,r=c,a=t.screenX,l=t.screenY,d=window.getComputedStyle?window.getComputedStyle(r,null).getPropertyValue("cursor"):r.runtimeStyle.cursor,n=yt("<div></div>").css({position:"absolute",top:0,left:0,width:f.width,height:f.height,zIndex:2147483647,opacity:1e-4,cursor:d}).appendTo(u.body),yt(u).on("mousemove touchmove",o).on("mouseup touchend",s),e.start(t)},o=function(t){if(le(t),t.button!==i)return s(t);t.deltaX=t.screenX-a,t.deltaY=t.screenY-l,t.preventDefault(),e.drag(t)},s=function(t){le(t),yt(u).off("mousemove touchmove",o).off("mouseup touchend",s),n.remove(),e.stop&&e.stop(t)},this.destroy=function(){yt(c).off()},yt(c).on("mousedown touchstart",r)}var ce,de,fe,he,pe={init:function(){this.on("repaint",this.renderScroll)},renderScroll:function(){var t=this,e=2;function n(){var n,i,r;function s(r,s,o,a,l,u){var c,d,f,h,p,m,g,v;if(d=t.getEl("scroll"+r)){if(g=s.toLowerCase(),v=o.toLowerCase(),yt(t.getEl("absend")).css(g,t.layoutRect()[a]-1),!l)return void yt(d).css("display","none");yt(d).css("display","block"),c=t.getEl("body"),f=t.getEl("scroll"+r+"t"),h=c["client"+o]-2*e,p=(h-=n&&i?d["client"+u]:0)/c["scroll"+o],(m={})[g]=c["offset"+s]+e,m[v]=h,yt(d).css(m),(m={})[g]=c["scroll"+s]*p,m[v]=h*p,yt(f).css(m)}}r=t.getEl("body"),n=r.scrollWidth>r.clientWidth,i=r.scrollHeight>r.clientHeight,s("h","Left","Width","contentW",n,"Height"),s("v","Top","Height","contentH",i,"Width")}t.settings.autoScroll&&(t._hasScroll||(t._hasScroll=!0,function(){function n(n,i,r,s,o){var a,l=t._id+"-scroll"+n,u=t.classPrefix;yt(t.getEl()).append('<div id="'+l+'" class="'+u+"scrollbar "+u+"scrollbar-"+n+'"><div id="'+l+'t" class="'+u+'scrollbar-thumb"></div></div>'),t.draghelper=new ue(l+"t",{start:function(){a=t.getEl("body")["scroll"+i],yt("#"+l).addClass(u+"active")},drag:function(l){var u,c,d,f,h=t.layoutRect();c=h.contentW>h.innerW,d=h.contentH>h.innerH,f=t.getEl("body")["client"+r]-2*e,u=(f-=c&&d?t.getEl("scroll"+n)["client"+o]:0)/t.getEl("body")["scroll"+r],t.getEl("body")["scroll"+i]=a+l["delta"+s]/u},stop:function(){yt("#"+l).removeClass(u+"active")}})}t.classes.add("scroll"),n("v","Top","Height","Y","Width"),n("h","Left","Width","X","Height")}(),t.on("wheel",function(e){var i=t.getEl("body");i.scrollLeft+=10*(e.deltaX||0),i.scrollTop+=10*e.deltaY,n()}),yt(t.getEl("body")).on("scroll",n)),n())}},me=ae.extend({Defaults:{layout:"fit",containerCls:"panel"},Mixins:[pe],renderHtml:function(){var t=this._layout,e=this.settings.html;return this.preRender(),t.preRender(this),void 0===e?e='<div id="'+this._id+'-body" class="'+this.bodyClasses+'">'+t.renderHtml(this)+"</div>":("function"==typeof e&&(e=e.call(this)),this._hasBody=!1),'<div id="'+this._id+'" class="'+this.classes+'" hidefocus="1" tabindex="-1" role="group">'+(this._preBodyHtml||"")+e+"</div>"}}),ge={resizeToContent:function(){this._layoutRect.autoResize=!0,this._lastRect=null,this.reflow()},resizeTo:function(t,e){if(t<=1||e<=1){var n=xt.getWindowSize();t=t<=1?t*n.w:t,e=e<=1?e*n.h:e}return this._layoutRect.autoResize=!1,this.layoutRect({minW:t,minH:e,w:t,h:e}).reflow()},resizeBy:function(t,e){var n=this.layoutRect();return this.resizeTo(n.w+t,n.h+e)}},ve=[],ye=[];function be(t,e){for(;t;){if(t===e)return!0;t=t.parent()}}function xe(){ce||(ce=function(t){2!==t.button&&function(t){for(var e=ve.length;e--;){var n=ve[e],i=n.getParentCtrl(t.target);if(n.settings.autohide){if(i&&(be(i,n)||n.parent()===i))continue;(t=n.fire("autohide",{target:t.target})).isDefaultPrevented()||n.hide()}}}(t)},yt(document).on("click touchstart",ce))}function we(t){var e=xt.getViewPort().y;function n(e,n){for(var i,r=0;r<ve.length;r++)if(ve[r]!==t)for(i=ve[r].parent();i&&(i=i.parent());)i===t&&ve[r].fixed(e).moveBy(0,n).repaint()}t.settings.autofix&&(t.state.get("fixed")?t._autoFixY>e&&(t.fixed(!1).layoutRect({y:t._autoFixY}).repaint(),n(!1,t._autoFixY-e)):(t._autoFixY=t.layoutRect().y,t._autoFixY<e&&(t.fixed(!0).layoutRect({y:0}).repaint(),n(!0,e-t._autoFixY))))}function _e(t,e){var n,i,r=Ce.zIndex||65535;if(t)ye.push(e);else for(n=ye.length;n--;)ye[n]===e&&ye.splice(n,1);if(ye.length)for(n=0;n<ye.length;n++)ye[n].modal&&(r++,i=ye[n]),ye[n].getEl().style.zIndex=r,ye[n].zIndex=r,r++;var s=yt("#"+e.classPrefix+"modal-block",e.getContainerElm())[0];i?yt(s).css("z-index",i.zIndex-1):s&&(s.parentNode.removeChild(s),he=!1),Ce.currentZIndex=r}var Ce=me.extend({Mixins:[Rt,ge],init:function(t){var e=this;e._super(t),e._eventsRoot=e,e.classes.add("floatpanel"),t.autohide&&(xe(),function(){if(!fe){var t=document.documentElement,e=t.clientWidth,n=t.clientHeight;fe=function(){document.all&&e===t.clientWidth&&n===t.clientHeight||(e=t.clientWidth,n=t.clientHeight,Ce.hideAll())},yt(window).on("resize",fe)}}(),ve.push(e)),t.autofix&&(de||(de=function(){var t;for(t=ve.length;t--;)we(ve[t])},yt(window).on("scroll",de)),e.on("move",function(){we(this)})),e.on("postrender show",function(t){if(t.control===e){var n,i=e.classPrefix;e.modal&&!he&&((n=yt("#"+i+"modal-block",e.getContainerElm()))[0]||(n=yt('<div id="'+i+'modal-block" class="'+i+"reset "+i+'fade"></div>').appendTo(e.getContainerElm())),C.setTimeout(function(){n.addClass(i+"in"),yt(e.getEl()).addClass(i+"in")}),he=!0),_e(!0,e)}}),e.on("show",function(){e.parents().each(function(t){if(t.state.get("fixed"))return e.fixed(!0),!1})}),t.popover&&(e._preBodyHtml='<div class="'+e.classPrefix+'arrow"></div>',e.classes.add("popover").add("bottom").add(e.isRtl()?"end":"start")),e.aria("label",t.ariaLabel),e.aria("labelledby",e._id),e.aria("describedby",e.describedBy||e._id+"-none")},fixed:function(t){if(this.state.get("fixed")!==t){if(this.state.get("rendered")){var e=xt.getViewPort();t?this.layoutRect().y-=e.y:this.layoutRect().y+=e.y}this.classes.toggle("fixed",t),this.state.set("fixed",t)}return this},show:function(){var t,e=this._super();for(t=ve.length;t--&&ve[t]!==this;);return-1===t&&ve.push(this),e},hide:function(){return ke(this),_e(!1,this),this._super()},hideAll:function(){Ce.hideAll()},close:function(){return this.fire("close").isDefaultPrevented()||(this.remove(),_e(!1,this)),this},remove:function(){ke(this),this._super()},postRender:function(){return this.settings.bodyRole&&this.getEl("body").setAttribute("role",this.settings.bodyRole),this._super()}});function ke(t){var e;for(e=ve.length;e--;)ve[e]===t&&ve.splice(e,1);for(e=ye.length;e--;)ye[e]===t&&ye.splice(e,1)}Ce.hideAll=function(){for(var t=ve.length;t--;){var e=ve[t];e&&e.settings.autohide&&(e.hide(),ve.splice(t,1))}};var Ee=function(t,e,n){var i,r,s=p.DOM,o=function(t){return t.getParam("fixed_toolbar_container")}(t);o&&(r=s.select(o)[0]);var a=function(){if(i&&i.moveRel&&i.visible()&&!i._fixed){var e=t.selection.getScrollContainer(),n=t.getBody(),r=0,o=0;if(e){var a=s.getPos(n),l=s.getPos(e);r=Math.max(0,l.x-a.x),o=Math.max(0,l.y-a.y)}i.fixed(!1).moveRel(n,t.rtl?["tr-br","br-tr"]:["tl-bl","bl-tl","tr-br"]).moveBy(r,o)}},u=function(){i&&(i.show(),a(),s.addClass(t.getBody(),"mce-edit-focus"))},d=function(){i&&(i.hide(),Ce.hideAll(),s.removeClass(t.getBody(),"mce-edit-focus"))},h=function(){i?i.visible()||u():(i=e.panel=m.create({type:r?"panel":"floatpanel",role:"application",classes:"tinymce tinymce-inline",layout:"flex",direction:"column",align:"stretch",autohide:!1,autofix:!0,fixed:function(t,e){return!(!t||e.settings.ui_container)}(r,t),border:1,items:[!1===l(t)?null:{type:"menubar",border:"0 0 1 0",items:it(t)},F(t,c(t))]}),A.setUiContainer(t,i),b(t),r?i.renderTo(r).reflow():i.renderTo().reflow(),w(t,i),u(),z(t),t.on("nodeChange",a),t.on("ResizeWindow",a),t.on("activate",u),t.on("deactivate",d),t.nodeChanged())};return t.settings.content_editable=!0,t.on("focus",function(){!1===f(t)&&n.skinUiCss?s.styleSheetLoader.load(n.skinUiCss,h,h):h()}),t.on("blur hide",d),t.on("remove",function(){i&&(i.remove(),i=null)}),!1===f(t)&&n.skinUiCss?s.styleSheetLoader.load(n.skinUiCss,pt(t)):pt(t)(),{}};function Re(t,e){var n,i,r=this,s=ie.classPrefix;r.show=function(o,a){function l(){n&&(yt(t).append('<div class="'+s+"throbber"+(e?" "+s+"throbber-inline":"")+'"></div>'),a&&a())}return r.hide(),n=!0,o?i=C.setTimeout(l,o):l(),r},r.hide=function(){var e=t.lastChild;return C.clearTimeout(i),e&&-1!==e.className.indexOf("throbber")&&e.parentNode.removeChild(e),n=!1,r}}var Te=function(t,e){var n;t.on("ProgressState",function(t){n=n||new Re(e.panel.getEl("body")),t.state?n.show(t.time):n.hide()})},Se=function(t,e,n){var i=function(t){var e=t.settings,n=e.skin,i=e.skin_url;if(!1!==n){var r=n||"lightgray";i=i?t.documentBaseURI.toAbsolute(i):o.baseURL+"/skins/"+r}return i}(t);return i&&(n.skinUiCss=i+"/skin.min.css",t.contentCSS.push(i+"/content"+(t.inline?".inline":"")+".min.css")),Te(t,e),function(t){return t.getParam("inline",!1,"boolean")}(t)?Ee(t,e,n):vt(t,e,n)},De=ie.extend({Mixins:[Rt],Defaults:{classes:"widget tooltip tooltip-n"},renderHtml:function(){var t=this.classPrefix;return'<div id="'+this._id+'" class="'+this.classes+'" role="presentation"><div class="'+t+'tooltip-arrow"></div><div class="'+t+'tooltip-inner">'+this.encode(this.state.get("text"))+"</div></div>"},bindStates:function(){var t=this;return t.state.on("change:text",function(e){t.getEl().lastChild.innerHTML=t.encode(e.value)}),t._super()},repaint:function(){var t,e;t=this.getEl().style,e=this._layoutRect,t.left=e.x+"px",t.top=e.y+"px",t.zIndex=131070}}),Pe=ie.extend({init:function(t){var e=this;e._super(t),t=e.settings,e.canFocus=!0,t.tooltip&&!1!==Pe.tooltips&&(e.on("mouseenter",function(n){var i=e.tooltip().moveTo(-65535);if(n.control===e){var r=i.text(t.tooltip).show().testMoveRel(e.getEl(),["bc-tc","bc-tl","bc-tr"]);i.classes.toggle("tooltip-n","bc-tc"===r),i.classes.toggle("tooltip-nw","bc-tl"===r),i.classes.toggle("tooltip-ne","bc-tr"===r),i.moveRel(e.getEl(),r)}else i.hide()}),e.on("mouseleave mousedown click",function(){e.tooltip().remove(),e._tooltip=null})),e.aria("label",t.ariaLabel||t.tooltip)},tooltip:function(){return this._tooltip||(this._tooltip=new De({type:"tooltip"}),A.inheritUiContainer(this,this._tooltip),this._tooltip.renderTo()),this._tooltip},postRender:function(){var t=this.settings;this._super(),this.parent()||!t.width&&!t.height||(this.initLayoutRect(),this.repaint()),t.autofocus&&this.focus()},bindStates:function(){var t=this;function e(e){t.aria("disabled",e),t.classes.toggle("disabled",e)}function n(e){t.aria("pressed",e),t.classes.toggle("active",e)}return t.state.on("change:disabled",function(t){e(t.value)}),t.state.on("change:active",function(t){n(t.value)}),t.state.get("disabled")&&e(!0),t.state.get("active")&&n(!0),t._super()},remove:function(){this._super(),this._tooltip&&(this._tooltip.remove(),this._tooltip=null)}}),Ne=Pe.extend({Defaults:{value:0},init:function(t){this._super(t),this.classes.add("progress"),this.settings.filter||(this.settings.filter=function(t){return Math.round(t)})},renderHtml:function(){var t=this._id,e=this.classPrefix;return'<div id="'+t+'" class="'+this.classes+'"><div class="'+e+'bar-container"><div class="'+e+'bar"></div></div><div class="'+e+'text">0%</div></div>'},postRender:function(){return this._super(),this.value(this.settings.value),this},bindStates:function(){var t=this;function e(e){e=t.settings.filter(e),t.getEl().lastChild.innerHTML=e+"%",t.getEl().firstChild.firstChild.style.width=e+"%"}return t.state.on("change:value",function(t){e(t.value)}),e(t.state.get("value")),t._super()}}),Me=function(t,e){t.getEl().lastChild.textContent=e+(t.progressBar?" "+t.progressBar.value()+"%":"")},Ae=ie.extend({Mixins:[Rt],Defaults:{classes:"widget notification"},init:function(t){var e=this;e._super(t),e.maxWidth=t.maxWidth,t.text&&e.text(t.text),t.icon&&(e.icon=t.icon),t.color&&(e.color=t.color),t.type&&e.classes.add("notification-"+t.type),t.timeout&&(t.timeout<0||t.timeout>0)&&!t.closeButton?e.closeButton=!1:(e.classes.add("has-close"),e.closeButton=!0),t.progressBar&&(e.progressBar=new Ne),e.on("click",function(t){-1!==t.target.className.indexOf(e.classPrefix+"close")&&e.close()})},renderHtml:function(){var t,e=this.classPrefix,n="",i="",r="";return this.icon&&(n='<i class="'+e+"ico "+e+"i-"+this.icon+'"></i>'),t=' style="max-width: '+this.maxWidth+"px;"+(this.color?"background-color: "+this.color+';"':'"'),this.closeButton&&(i='<button type="button" class="'+e+'close" aria-hidden="true">×</button>'),this.progressBar&&(r=this.progressBar.renderHtml()),'<div id="'+this._id+'" class="'+this.classes+'"'+t+' role="presentation">'+n+'<div class="'+e+'notification-inner">'+this.state.get("text")+"</div>"+r+i+'<div style="clip: rect(1px, 1px, 1px, 1px);height: 1px;overflow: hidden;position: absolute;width: 1px;" aria-live="assertive" aria-relevant="additions" aria-atomic="true"></div></div>'},postRender:function(){var t=this;return C.setTimeout(function(){t.$el.addClass(t.classPrefix+"in"),Me(t,t.state.get("text"))},100),t._super()},bindStates:function(){var t=this;return t.state.on("change:text",function(e){t.getEl().firstChild.innerHTML=e.value,Me(t,e.value)}),t.progressBar&&(t.progressBar.bindStates(),t.progressBar.state.on("change:value",function(e){Me(t,t.state.get("text"))})),t._super()},close:function(){return this.fire("close").isDefaultPrevented()||this.remove(),this},repaint:function(){var t,e;t=this.getEl().style,e=this._layoutRect,t.left=e.x+"px",t.top=e.y+"px",t.zIndex=65534}});function Oe(t){var e=function(t){return t.inline?t.getElement():t.getContentAreaContainer()};return{open:function(n,i){var r,s=a.extend(n,{maxWidth:(r=e(t),xt.getSize(r).width)}),o=new Ae(s);return o.args=s,s.timeout>0&&(o.timer=setTimeout(function(){o.close(),i()},s.timeout)),o.on("close",function(){i()}),o.renderTo(),o},close:function(t){t.close()},reposition:function(n){!function(t){X(t,function(t){t.moveTo(0,0)})}(n),function(n){if(n.length>0){var i=n.slice(0,1)[0],r=e(t);i.moveRel(r,"tc-tc"),X(n,function(t,e){e>0&&t.moveRel(n[e-1].getEl(),"bc-tc")})}}(n)},getArgs:function(t){return t.args}}}var He=[],Fe="";function Ie(t){var e,n=yt("meta[name=viewport]")[0];!1!==ut.overrideViewPort&&(n||((n=document.createElement("meta")).setAttribute("name","viewport"),document.getElementsByTagName("head")[0].appendChild(n)),(e=n.getAttribute("content"))&&void 0!==Fe&&(Fe=e),n.setAttribute("content",t?"width=device-width,initial-scale=1.0,user-scalable=0,minimum-scale=1.0,maximum-scale=1.0":Fe))}function Be(t,e){(function(){for(var t=0;t<He.length;t++)if(He[t]._fullscreen)return!0;return!1})()&&!1===e&&yt([document.documentElement,document.body]).removeClass(t+"fullscreen")}var Le=Ce.extend({modal:!0,Defaults:{border:1,layout:"flex",containerCls:"panel",role:"dialog",callbacks:{submit:function(){this.fire("submit",{data:this.toJSON()})},close:function(){this.close()}}},init:function(t){var e=this;e._super(t),e.isRtl()&&e.classes.add("rtl"),e.classes.add("window"),e.bodyClasses.add("window-body"),e.state.set("fixed",!0),t.buttons&&(e.statusbar=new me({layout:"flex",border:"1 0 0 0",spacing:3,padding:10,align:"center",pack:e.isRtl()?"start":"end",defaults:{type:"button"},items:t.buttons}),e.statusbar.classes.add("foot"),e.statusbar.parent(e)),e.on("click",function(t){var n=e.classPrefix+"close";(xt.hasClass(t.target,n)||xt.hasClass(t.target.parentNode,n))&&e.close()}),e.on("cancel",function(){e.close()}),e.on("move",function(t){t.control===e&&Ce.hideAll()}),e.aria("describedby",e.describedBy||e._id+"-none"),e.aria("label",t.title),e._fullscreen=!1},recalc:function(){var t,e,n,i,r=this.statusbar;this._fullscreen&&(this.layoutRect(xt.getWindowSize()),this.layoutRect().contentH=this.layoutRect().innerH),this._super(),t=this.layoutRect(),this.settings.title&&!this._fullscreen&&(e=t.headerW)>t.w&&(n=t.x-Math.max(0,e/2),this.layoutRect({w:e,x:n}),i=!0),r&&(r.layoutRect({w:this.layoutRect().innerW}).recalc(),(e=r.layoutRect().minW+t.deltaW)>t.w&&(n=t.x-Math.max(0,e-t.w),this.layoutRect({w:e,x:n}),i=!0)),i&&this.recalc()},initLayoutRect:function(){var t,e=this._super(),n=0;if(this.settings.title&&!this._fullscreen){t=this.getEl("head");var i=xt.getSize(t);e.headerW=i.width,e.headerH=i.height,n+=e.headerH}this.statusbar&&(n+=this.statusbar.layoutRect().h),e.deltaH+=n,e.minH+=n,e.h+=n;var r=xt.getWindowSize();return e.x=this.settings.x||Math.max(0,r.w/2-e.w/2),e.y=this.settings.y||Math.max(0,r.h/2-e.h/2),e},renderHtml:function(){var t=this._layout,e=this._id,n=this.classPrefix,i=this.settings,r="",s="",o=i.html;return this.preRender(),t.preRender(this),i.title&&(r='<div id="'+e+'-head" class="'+n+'window-head"><div id="'+e+'-title" class="'+n+'title">'+this.encode(i.title)+'</div><div id="'+e+'-dragh" class="'+n+'dragh"></div><button type="button" class="'+n+'close" aria-hidden="true"><i class="mce-ico mce-i-remove"></i></button></div>'),i.url&&(o='<iframe src="'+i.url+'" tabindex="-1"></iframe>'),void 0===o&&(o=t.renderHtml(this)),this.statusbar&&(s=this.statusbar.renderHtml()),'<div id="'+e+'" class="'+this.classes+'" hidefocus="1"><div class="'+this.classPrefix+'reset" role="application">'+r+'<div id="'+e+'-body" class="'+this.bodyClasses+'">'+o+"</div>"+s+"</div></div>"},fullscreen:function(t){var e,n,i=this,r=document.documentElement,s=i.classPrefix;if(t!==i._fullscreen)if(yt(window).on("resize",function(){var t;if(i._fullscreen)if(e)i._timer||(i._timer=C.setTimeout(function(){var t=xt.getWindowSize();i.moveTo(0,0).resizeTo(t.w,t.h),i._timer=0},50));else{t=(new Date).getTime();var n=xt.getWindowSize();i.moveTo(0,0).resizeTo(n.w,n.h),(new Date).getTime()-t>50&&(e=!0)}}),n=i.layoutRect(),i._fullscreen=t,t){i._initial={x:n.x,y:n.y,w:n.w,h:n.h},i.borderBox=Dt("0"),i.getEl("head").style.display="none",n.deltaH-=n.headerH+2,yt([r,document.body]).addClass(s+"fullscreen"),i.classes.add("fullscreen");var o=xt.getWindowSize();i.moveTo(0,0).resizeTo(o.w,o.h)}else i.borderBox=Dt(i.settings.border),i.getEl("head").style.display="",n.deltaH+=n.headerH,yt([r,document.body]).removeClass(s+"fullscreen"),i.classes.remove("fullscreen"),i.moveTo(i._initial.x,i._initial.y).resizeTo(i._initial.w,i._initial.h);return i.reflow()},postRender:function(){var t,e=this;setTimeout(function(){e.classes.add("in"),e.fire("open")},0),e._super(),e.statusbar&&e.statusbar.postRender(),e.focus(),this.dragHelper=new ue(e._id+"-dragh",{start:function(){t={x:e.layoutRect().x,y:e.layoutRect().y}},drag:function(n){e.moveTo(t.x+n.deltaX,t.y+n.deltaY)}}),e.on("submit",function(t){t.isDefaultPrevented()||e.close()}),He.push(e),Ie(!0)},submit:function(){return this.fire("submit",{data:this.toJSON()})},remove:function(){var t;for(this.dragHelper.destroy(),this._super(),this.statusbar&&this.statusbar.remove(),Be(this.classPrefix,!1),t=He.length;t--;)He[t]===this&&He.splice(t,1);Ie(He.length>0)},getContentWindow:function(){var t=this.getEl().getElementsByTagName("iframe")[0];return t?t.contentWindow:null}});!function(){if(!ut.desktop){var t={w:window.innerWidth,h:window.innerHeight};C.setInterval(function(){var e=window.innerWidth,n=window.innerHeight;t.w===e&&t.h===n||(t={w:e,h:n},yt(window).trigger("resize"))},100)}yt(window).on("resize",function(){var t,e,n=xt.getWindowSize();for(t=0;t<He.length;t++)e=He[t].layoutRect(),He[t].moveTo(He[t].settings.x||Math.max(0,n.w/2-e.w/2),He[t].settings.y||Math.max(0,n.h/2-e.h/2))})}();var We,ze,Ve,$e=Le.extend({init:function(t){t={border:1,padding:20,layout:"flex",pack:"center",align:"center",containerCls:"panel",autoScroll:!0,buttons:{type:"button",text:"Ok",action:"ok"},items:{type:"label",multiline:!0,maxWidth:500,maxHeight:200}},this._super(t)},Statics:{OK:1,OK_CANCEL:2,YES_NO:3,YES_NO_CANCEL:4,msgBox:function(t){var e,n=t.callback||function(){};function i(t,e,i){return{type:"button",text:t,subtype:i?"primary":"",onClick:function(t){t.control.parents()[1].close(),n(e)}}}switch(t.buttons){case $e.OK_CANCEL:e=[i("Ok",!0,!0),i("Cancel",!1)];break;case $e.YES_NO:case $e.YES_NO_CANCEL:e=[i("Yes",1,!0),i("No",0)],t.buttons===$e.YES_NO_CANCEL&&e.push(i("Cancel",-1));break;default:e=[i("Ok",!0,!0)]}return new Le({padding:20,x:t.x,y:t.y,minWidth:300,minHeight:100,layout:"flex",pack:"center",align:"center",buttons:e,title:t.title,role:"alertdialog",items:{type:"label",multiline:!0,maxWidth:500,maxHeight:200,text:t.text},onPostRender:function(){this.aria("describedby",this.items()[0]._id)},onClose:t.onClose,onCancel:function(){n(!1)}}).renderTo(document.body).reflow()},alert:function(t,e){return"string"==typeof t&&(t={text:t}),t.callback=e,$e.msgBox(t)},confirm:function(t,e){return"string"==typeof t&&(t={text:t}),t.callback=e,t.buttons=$e.OK_CANCEL,$e.msgBox(t)}}}),Ue=function(t){return{renderUI:function(e){return Se(t,this,e)},resizeTo:function(e,n){return at(t,e,n)},resizeBy:function(e,n){return lt(t,e,n)},getNotificationManagerImpl:function(){return Oe(t)},getWindowManagerImpl:function(){return{open:function(t,e,n){var i;return t.title=t.title||" ",t.url=t.url||t.file,t.url&&(t.width=parseInt(t.width||320,10),t.height=parseInt(t.height||240,10)),t.body&&(t.items={defaults:t.defaults,type:t.bodyType||"form",items:t.body,data:t.data,callbacks:t.commands}),t.url||t.buttons||(t.buttons=[{text:"Ok",subtype:"primary",onclick:function(){i.find("form")[0].submit()}},{text:"Cancel",onclick:function(){i.close()}}]),(i=new Le(t)).on("close",function(){n(i)}),t.data&&i.on("postRender",function(){this.find("*").each(function(e){var n=e.name();n in t.data&&e.value(t.data[n])})}),i.features=t||{},i.params=e||{},i=i.renderTo(document.body).reflow()},alert:function(t,e,n){var i;return(i=$e.alert(t,function(){e()})).on("close",function(){n(i)}),i},confirm:function(t,e,n){var i;return(i=$e.confirm(t,function(t){e(t)})).on("close",function(){n(i)}),i},close:function(t){t.close()},getParams:function(t){return t.params},setParams:function(t,e){t.params=e}}}}},qe=Tt.extend({Defaults:{firstControlClass:"first",lastControlClass:"last"},init:function(t){this.settings=a.extend({},this.Defaults,t)},preRender:function(t){t.bodyClasses.add(this.settings.containerClass)},applyClasses:function(t){var e,n,i,r,s=this.settings;e=s.firstControlClass,n=s.lastControlClass,t.each(function(t){t.classes.remove(e).remove(n).add(s.controlClass),t.visible()&&(i||(i=t),r=t)}),i&&i.classes.add(e),r&&r.classes.add(n)},renderHtml:function(t){var e="";return this.applyClasses(t.items()),t.items().each(function(t){e+=t.renderHtml()}),e},recalc:function(){},postRender:function(){},isNative:function(){return!1}}),je=qe.extend({Defaults:{containerClass:"abs-layout",controlClass:"abs-layout-item"},recalc:function(t){t.items().filter(":visible").each(function(t){var e=t.settings;t.layoutRect({x:e.x,y:e.y,w:e.w,h:e.h}),t.recalc&&t.recalc()})},renderHtml:function(t){return'<div id="'+t._id+'-absend" class="'+t.classPrefix+'abs-end"></div>'+this._super(t)}}),Ye=Pe.extend({Defaults:{classes:"widget btn",role:"button"},init:function(t){var e,n=this;n._super(t),t=n.settings,e=n.settings.size,n.on("click mousedown",function(t){t.preventDefault()}),n.on("touchstart",function(t){n.fire("click",t),t.preventDefault()}),t.subtype&&n.classes.add(t.subtype),e&&n.classes.add("btn-"+e),t.icon&&n.icon(t.icon)},icon:function(t){return arguments.length?(this.state.set("icon",t),this):this.state.get("icon")},repaint:function(){var t,e=this.getEl().firstChild;e&&((t=e.style).width=t.height="100%"),this._super()},renderHtml:function(){var t,e,n=this._id,i=this.classPrefix,r=this.state.get("icon"),s=this.state.get("text"),o="",a=this.settings;return(t=a.image)?(r="none","string"!=typeof t&&(t=window.getSelection?t[0]:t[1]),t=" style=\"background-image: url('"+t+"')\""):t="",s&&(this.classes.add("btn-has-text"),o='<span class="'+i+'txt">'+this.encode(s)+"</span>"),r=r?i+"ico "+i+"i-"+r:"",e="boolean"==typeof a.active?' aria-pressed="'+a.active+'"':"",'<div id="'+n+'" class="'+this.classes+'" tabindex="-1"'+e+'><button id="'+n+'-button" role="presentation" type="button" tabindex="-1">'+(r?'<i class="'+r+'"'+t+"></i>":"")+o+"</button></div>"},bindStates:function(){var t=this,e=t.$,n=t.classPrefix+"txt";function i(i){var r=e("span."+n,t.getEl());i?(r[0]||(e("button:first",t.getEl()).append('<span class="'+n+'"></span>'),r=e("span."+n,t.getEl())),r.html(t.encode(i))):r.remove(),t.classes.toggle("btn-has-text",!!i)}return t.state.on("change:text",function(t){i(t.value)}),t.state.on("change:icon",function(e){var n=e.value,r=t.classPrefix;t.settings.icon=n,n=n?r+"ico "+r+"i-"+t.settings.icon:"";var s=t.getEl().firstChild,o=s.getElementsByTagName("i")[0];n?(o&&o===s.firstChild||(o=document.createElement("i"),s.insertBefore(o,s.firstChild)),o.className=n):o&&s.removeChild(o),i(t.state.get("text"))}),t._super()}}),Xe=Ye.extend({init:function(t){t=a.extend({text:"Browse...",multiple:!1,accept:null},t),this._super(t),this.classes.add("browsebutton"),t.multiple&&this.classes.add("multiple")},postRender:function(){var t=this,e=xt.create("input",{type:"file",id:t._id+"-browse",accept:t.settings.accept});t._super(),yt(e).on("change",function(e){var n=e.target.files;t.value=function(){return n.length?t.settings.multiple?n:n[0]:null},e.preventDefault(),n.length&&t.fire("change",e)}),yt(e).on("click",function(t){t.stopPropagation()}),yt(t.getEl("button")).on("click",function(t){t.stopPropagation(),e.click()}),t.getEl().appendChild(e)},remove:function(){yt(this.getEl("button")).off(),yt(this.getEl("input")).off(),this._super()}}),Ge=ae.extend({Defaults:{defaultType:"button",role:"group"},renderHtml:function(){var t=this._layout;return this.classes.add("btn-group"),this.preRender(),t.preRender(this),'<div id="'+this._id+'" class="'+this.classes+'"><div id="'+this._id+'-body">'+(this.settings.html||"")+t.renderHtml(this)+"</div></div>"}}),Je=Pe.extend({Defaults:{classes:"checkbox",role:"checkbox",checked:!1},init:function(t){var e=this;e._super(t),e.on("click mousedown",function(t){t.preventDefault()}),e.on("click",function(t){t.preventDefault(),e.disabled()||e.checked(!e.checked())}),e.checked(e.settings.checked)},checked:function(t){return arguments.length?(this.state.set("checked",t),this):this.state.get("checked")},value:function(t){return arguments.length?this.checked(t):this.checked()},renderHtml:function(){var t=this._id,e=this.classPrefix;return'<div id="'+t+'" class="'+this.classes+'" unselectable="on" aria-labelledby="'+t+'-al" tabindex="-1"><i class="'+e+"ico "+e+'i-checkbox"></i><span id="'+t+'-al" class="'+e+'label">'+this.encode(this.state.get("text"))+"</span></div>"},bindStates:function(){var t=this;function e(e){t.classes.toggle("checked",e),t.aria("checked",e)}return t.state.on("change:text",function(e){t.getEl("al").firstChild.data=t.translate(e.value)}),t.state.on("change:checked change:value",function(n){t.fire("change"),e(n.value)}),t.state.on("change:icon",function(e){var n=e.value,i=t.classPrefix;if(void 0===n)return t.settings.icon;t.settings.icon=n,n=n?i+"ico "+i+"i-"+t.settings.icon:"";var r=t.getEl().firstChild,s=r.getElementsByTagName("i")[0];n?(s&&s===r.firstChild||(s=document.createElement("i"),r.insertBefore(s,r.firstChild)),s.className=n):s&&r.removeChild(s)}),t.state.get("checked")&&e(!0),t._super()}}),Ze=tinymce.util.Tools.resolve("tinymce.util.VK"),Ke=Pe.extend({init:function(t){var e=this;e._super(t),t=e.settings,e.classes.add("combobox"),e.subinput=!0,e.ariaTarget="inp",t.menu=t.menu||t.values,t.menu&&(t.icon="caret"),e.on("click",function(n){var i=n.target,r=e.getEl();if(yt.contains(r,i)||i===r)for(;i&&i!==r;)i.id&&-1!==i.id.indexOf("-open")&&(e.fire("action"),t.menu&&(e.showMenu(),n.aria&&e.menu.items()[0].focus())),i=i.parentNode}),e.on("keydown",function(t){var n;13===t.keyCode&&"INPUT"===t.target.nodeName&&(t.preventDefault(),e.parents().reverse().each(function(t){if(t.toJSON)return n=t,!1}),e.fire("submit",{data:n.toJSON()}))}),e.on("keyup",function(t){if("INPUT"===t.target.nodeName){var n=e.state.get("value"),i=t.target.value;i!==n&&(e.state.set("value",i),e.fire("autocomplete",t))}}),e.on("mouseover",function(t){var n=e.tooltip().moveTo(-65535);if(e.statusLevel()&&-1!==t.target.className.indexOf(e.classPrefix+"status")){var i=e.statusMessage()||"Ok",r=n.text(i).show().testMoveRel(t.target,["bc-tc","bc-tl","bc-tr"]);n.classes.toggle("tooltip-n","bc-tc"===r),n.classes.toggle("tooltip-nw","bc-tl"===r),n.classes.toggle("tooltip-ne","bc-tr"===r),n.moveRel(t.target,r)}})},statusLevel:function(t){return arguments.length>0&&this.state.set("statusLevel",t),this.state.get("statusLevel")},statusMessage:function(t){return arguments.length>0&&this.state.set("statusMessage",t),this.state.get("statusMessage")},showMenu:function(){var t,e=this,n=e.settings;e.menu||((t=n.menu||[]).length?t={type:"menu",items:t}:t.type=t.type||"menu",e.menu=m.create(t).parent(e).renderTo(e.getContainerElm()),e.fire("createmenu"),e.menu.reflow(),e.menu.on("cancel",function(t){t.control===e.menu&&e.focus()}),e.menu.on("show hide",function(t){t.control.items().each(function(t){t.active(t.value()===e.value())})}).fire("show"),e.menu.on("select",function(t){e.value(t.control.value())}),e.on("focusin",function(t){"INPUT"===t.target.tagName.toUpperCase()&&e.menu.hide()}),e.aria("expanded",!0)),e.menu.show(),e.menu.layoutRect({w:e.layoutRect().w}),e.menu.moveRel(e.getEl(),e.isRtl()?["br-tr","tr-br"]:["bl-tl","tl-bl"])},focus:function(){this.getEl("inp").focus()},repaint:function(){var t,e,n=this.getEl(),i=this.getEl("open"),r=this.layoutRect(),s=0,o=n.firstChild;this.statusLevel()&&"none"!==this.statusLevel()&&(s=parseInt(xt.getRuntimeStyle(o,"padding-right"),10)-parseInt(xt.getRuntimeStyle(o,"padding-left"),10)),t=i?r.w-xt.getSize(i).width-10:r.w-10;var a=document;return a.all&&(!a.documentMode||a.documentMode<=8)&&(e=this.layoutRect().h-2+"px"),yt(o).css({width:t-s,lineHeight:e}),this._super(),this},postRender:function(){var t=this;return yt(this.getEl("inp")).on("change",function(e){t.state.set("value",e.target.value),t.fire("change",e)}),t._super()},renderHtml:function(){var t,e,n,i=this._id,r=this.settings,s=this.classPrefix,o=this.state.get("value")||"",a="",l="";return"spellcheck"in r&&(l+=' spellcheck="'+r.spellcheck+'"'),r.maxLength&&(l+=' maxlength="'+r.maxLength+'"'),r.size&&(l+=' size="'+r.size+'"'),r.subtype&&(l+=' type="'+r.subtype+'"'),n='<i id="'+i+'-status" class="mce-status mce-ico" style="display: none"></i>',this.disabled()&&(l+=' disabled="disabled"'),(t=r.icon)&&"caret"!==t&&(t=s+"ico "+s+"i-"+r.icon),e=this.state.get("text"),(t||e)&&(a='<div id="'+i+'-open" class="'+s+"btn "+s+'open" tabIndex="-1" role="button"><button id="'+i+'-action" type="button" hidefocus="1" tabindex="-1">'+("caret"!==t?'<i class="'+t+'"></i>':'<i class="'+s+'caret"></i>')+(e?(t?" ":"")+e:"")+"</button></div>",this.classes.add("has-open")),'<div id="'+i+'" class="'+this.classes+'"><input id="'+i+'-inp" class="'+s+'textbox" value="'+this.encode(o,!1)+'" hidefocus="1"'+l+' placeholder="'+this.encode(r.placeholder)+'" />'+n+a+"</div>"},value:function(t){return arguments.length?(this.state.set("value",t),this):(this.state.get("rendered")&&this.state.set("value",this.getEl("inp").value),this.state.get("value"))},showAutoComplete:function(t,e){var n=this;if(0!==t.length){n.menu?n.menu.items().remove():n.menu=m.create({type:"menu",classes:"combobox-menu",layout:"flow"}).parent(n).renderTo(),a.each(t,function(t){var i,r;n.menu.add({text:t.title,url:t.previewUrl,match:e,classes:"menu-item-ellipsis",onclick:(i=t.value,r=t.title,function(){n.fire("selectitem",{title:r,value:i})})})}),n.menu.renderNew(),n.hideMenu(),n.menu.on("cancel",function(t){t.control.parent()===n.menu&&(t.stopPropagation(),n.focus(),n.hideMenu())}),n.menu.on("select",function(){n.focus()});var i=n.layoutRect().w;n.menu.layoutRect({w:i,minW:0,maxW:i}),n.menu.repaint(),n.menu.reflow(),n.menu.show(),n.menu.moveRel(n.getEl(),n.isRtl()?["br-tr","tr-br"]:["bl-tl","tl-bl"])}else n.hideMenu()},hideMenu:function(){this.menu&&this.menu.hide()},bindStates:function(){var t=this;t.state.on("change:value",function(e){t.getEl("inp").value!==e.value&&(t.getEl("inp").value=e.value)}),t.state.on("change:disabled",function(e){t.getEl("inp").disabled=e.value}),t.state.on("change:statusLevel",function(e){var n=t.getEl("status"),i=t.classPrefix,r=e.value;xt.css(n,"display","none"===r?"none":""),xt.toggleClass(n,i+"i-checkmark","ok"===r),xt.toggleClass(n,i+"i-warning","warn"===r),xt.toggleClass(n,i+"i-error","error"===r),t.classes.toggle("has-status","none"!==r),t.repaint()}),xt.on(t.getEl("status"),"mouseleave",function(){t.tooltip().hide()}),t.on("cancel",function(e){t.menu&&t.menu.visible()&&(e.stopPropagation(),t.hideMenu())});var e=function(t,e){e&&e.items().length>0&&e.items().eq(t)[0].focus()};return t.on("keydown",function(n){var i=n.keyCode;"INPUT"===n.target.nodeName&&(i===Ze.DOWN?(n.preventDefault(),t.fire("autocomplete"),e(0,t.menu)):i===Ze.UP&&(n.preventDefault(),e(-1,t.menu)))}),t._super()},remove:function(){yt(this.getEl("inp")).off(),this.menu&&this.menu.remove(),this._super()}}),Qe=Ke.extend({init:function(t){var e=this;t.spellcheck=!1,t.onaction&&(t.icon="none"),e._super(t),e.classes.add("colorbox"),e.on("change keyup postrender",function(){e.repaintColor(e.value())})},repaintColor:function(t){var e=this.getEl("open"),n=e?e.getElementsByTagName("i")[0]:null;if(n)try{n.style.background=t}catch(t){}},bindStates:function(){var t=this;return t.state.on("change:value",function(e){t.state.get("rendered")&&t.repaintColor(e.value)}),t._super()}}),tn=Ye.extend({showPanel:function(){var t=this,e=t.settings;if(t.classes.add("opened"),t.panel)t.panel.show();else{var n=e.panel;n.type&&(n={layout:"grid",items:n}),n.role=n.role||"dialog",n.popover=!0,n.autohide=!0,n.ariaRoot=!0,t.panel=new Ce(n).on("hide",function(){t.classes.remove("opened")}).on("cancel",function(e){e.stopPropagation(),t.focus(),t.hidePanel()}).parent(t).renderTo(t.getContainerElm()),t.panel.fire("show"),t.panel.reflow()}var i=t.panel.testMoveRel(t.getEl(),e.popoverAlign||(t.isRtl()?["bc-tc","bc-tl","bc-tr"]:["bc-tc","bc-tr","bc-tl","tc-bc","tc-br","tc-bl"]));t.panel.classes.toggle("start","l"===i.substr(-1)),t.panel.classes.toggle("end","r"===i.substr(-1));var r="t"===i.substr(0,1);t.panel.classes.toggle("bottom",!r),t.panel.classes.toggle("top",r),t.panel.moveRel(t.getEl(),i)},hidePanel:function(){this.panel&&this.panel.hide()},postRender:function(){var t=this;return t.aria("haspopup",!0),t.on("click",function(e){e.control===t&&(t.panel&&t.panel.visible()?t.hidePanel():(t.showPanel(),t.panel.focus(!!e.aria)))}),t._super()},remove:function(){return this.panel&&(this.panel.remove(),this.panel=null),this._super()}}),en=p.DOM,nn=tn.extend({init:function(t){this._super(t),this.classes.add("splitbtn"),this.classes.add("colorbutton")},color:function(t){return t?(this._color=t,this.getEl("preview").style.backgroundColor=t,this):this._color},resetColor:function(){return this._color=null,this.getEl("preview").style.backgroundColor=null,this},renderHtml:function(){var t=this._id,e=this.classPrefix,n=this.state.get("text"),i=this.settings.icon?e+"ico "+e+"i-"+this.settings.icon:"",r=this.settings.image?" style=\"background-image: url('"+this.settings.image+"')\"":"",s="";return n&&(this.classes.add("btn-has-text"),s='<span class="'+e+'txt">'+this.encode(n)+"</span>"),'<div id="'+t+'" class="'+this.classes+'" role="button" tabindex="-1" aria-haspopup="true"><button role="presentation" hidefocus="1" type="button" tabindex="-1">'+(i?'<i class="'+i+'"'+r+"></i>":"")+'<span id="'+t+'-preview" class="'+e+'preview"></span>'+s+'</button><button type="button" class="'+e+'open" hidefocus="1" tabindex="-1"> <i class="'+e+'caret"></i></button></div>'},postRender:function(){var t=this,e=t.settings.onclick;return t.on("click",function(n){n.aria&&"down"===n.aria.key||n.control!==t||en.getParent(n.target,"."+t.classPrefix+"open")||(n.stopImmediatePropagation(),e.call(t,n))}),delete t.settings.onclick,t._super()}}),rn=tinymce.util.Tools.resolve("tinymce.util.Color"),sn=Pe.extend({Defaults:{classes:"widget colorpicker"},init:function(t){this._super(t)},postRender:function(){var t,e,n,i,r,s=this,o=s.color();function a(t,e){var n,i,r=xt.getPos(t);return n=e.pageX-r.x,i=e.pageY-r.y,{x:n=Math.max(0,Math.min(n/t.clientWidth,1)),y:i=Math.max(0,Math.min(i/t.clientHeight,1))}}function l(t,e){var o=(360-t.h)/360;xt.css(n,{top:100*o+"%"}),e||xt.css(r,{left:t.s+"%",top:100-t.v+"%"}),i.style.background=rn({s:100,v:100,h:t.h}).toHex(),s.color().parse({s:t.s,v:t.v,h:t.h})}function u(e){var n;n=a(i,e),t.s=100*n.x,t.v=100*(1-n.y),l(t),s.fire("change")}function c(n){var i;i=a(e,n),(t=o.toHsv()).h=360*(1-i.y),l(t,!0),s.fire("change")}e=s.getEl("h"),n=s.getEl("hp"),i=s.getEl("sv"),r=s.getEl("svp"),s._repaint=function(){l(t=o.toHsv())},s._super(),s._svdraghelper=new ue(s._id+"-sv",{start:u,drag:u}),s._hdraghelper=new ue(s._id+"-h",{start:c,drag:c}),s._repaint()},rgb:function(){return this.color().toRgb()},value:function(t){if(!arguments.length)return this.color().toHex();this.color().parse(t),this._rendered&&this._repaint()},color:function(){return this._color||(this._color=rn()),this._color},renderHtml:function(){var t,e=this._id,n=this.classPrefix,i="#ff0000,#ff0080,#ff00ff,#8000ff,#0000ff,#0080ff,#00ffff,#00ff80,#00ff00,#80ff00,#ffff00,#ff8000,#ff0000";return t='<div id="'+e+'-h" class="'+n+'colorpicker-h" style="background: -ms-linear-gradient(top,'+i+");background: linear-gradient(to bottom,"+i+');">'+function(){var t,e,r,s,o="";for(r="filter:progid:DXImageTransform.Microsoft.gradient(GradientType=0,startColorstr=",t=0,e=(s=i.split(",")).length-1;t<e;t++)o+='<div class="'+n+'colorpicker-h-chunk" style="height:'+100/e+"%;"+r+s[t]+",endColorstr="+s[t+1]+");-ms-"+r+s[t]+",endColorstr="+s[t+1]+')"></div>';return o}()+'<div id="'+e+'-hp" class="'+n+'colorpicker-h-marker"></div></div>','<div id="'+e+'" class="'+this.classes+'"><div id="'+e+'-sv" class="'+n+'colorpicker-sv"><div class="'+n+'colorpicker-overlay1"><div class="'+n+'colorpicker-overlay2"><div id="'+e+'-svp" class="'+n+'colorpicker-selector1"><div class="'+n+'colorpicker-selector2"></div></div></div></div></div>'+t+"</div>"}}),on=Pe.extend({init:function(t){t=a.extend({height:100,text:"Drop an image here",multiple:!1,accept:null},t),this._super(t),this.classes.add("dropzone"),t.multiple&&this.classes.add("multiple")},renderHtml:function(){var t,e,n=this.settings;return t={id:this._id,hidefocus:"1"},e=xt.create("div",t,"<span>"+this.translate(n.text)+"</span>"),n.height&&xt.css(e,"height",n.height+"px"),n.width&&xt.css(e,"width",n.width+"px"),e.className=this.classes,e.outerHTML},postRender:function(){var t=this,e=function(e){e.preventDefault(),t.classes.toggle("dragenter"),t.getEl().className=t.classes};t._super(),t.$el.on("dragover",function(t){t.preventDefault()}),t.$el.on("dragenter",e),t.$el.on("dragleave",e),t.$el.on("drop",function(e){if(e.preventDefault(),!t.state.get("disabled")){var n=function(e){var n=t.settings.accept;if("string"!=typeof n)return e;var i=new RegExp("("+n.split(/\s*,\s*/).join("|")+")$","i");return a.grep(e,function(t){return i.test(t.name)})}(e.dataTransfer.files);t.value=function(){return n.length?t.settings.multiple?n:n[0]:null},n.length&&t.fire("change",e)}})},remove:function(){this.$el.off(),this._super()}}),an=Pe.extend({init:function(t){var e=this;t.delimiter||(t.delimiter="»"),e._super(t),e.classes.add("path"),e.canFocus=!0,e.on("click",function(t){var n;(n=t.target.getAttribute("data-index"))&&e.fire("select",{value:e.row()[n],index:n})}),e.row(e.settings.row)},focus:function(){return this.getEl().firstChild.focus(),this},row:function(t){return arguments.length?(this.state.set("row",t),this):this.state.get("row")},renderHtml:function(){return'<div id="'+this._id+'" class="'+this.classes+'">'+this._getDataPathHtml(this.state.get("row"))+"</div>"},bindStates:function(){var t=this;return t.state.on("change:row",function(e){t.innerHtml(t._getDataPathHtml(e.value))}),t._super()},_getDataPathHtml:function(t){var e,n,i=t||[],r="",s=this.classPrefix;for(e=0,n=i.length;e<n;e++)r+=(e>0?'<div class="'+s+'divider" aria-hidden="true"> '+this.settings.delimiter+" </div>":"")+'<div role="button" class="'+s+"path-item"+(e===n-1?" "+s+"last":"")+'" data-index="'+e+'" tabindex="-1" id="'+this._id+"-"+e+'" aria-level="'+(e+1)+'">'+i[e].name+"</div>";return r||(r='<div class="'+s+'path-item"> </div>'),r}}),ln=an.extend({postRender:function(){var t=this,e=t.settings.editor;function n(t){if(1===t.nodeType){if("BR"===t.nodeName||t.getAttribute("data-mce-bogus"))return!0;if("bookmark"===t.getAttribute("data-mce-type"))return!0}return!1}return!1!==e.settings.elementpath&&(t.on("select",function(t){e.focus(),e.selection.select(this.row()[t.index].element),e.nodeChanged()}),e.on("nodeChange",function(i){for(var r=[],s=i.parents,o=s.length;o--;)if(1===s[o].nodeType&&!n(s[o])){var a=e.fire("ResolveName",{name:s[o].nodeName.toLowerCase(),target:s[o]});if(a.isDefaultPrevented()||r.push({name:a.name,element:s[o]}),a.isPropagationStopped())break}t.row(r)})),t._super()}}),un=ae.extend({Defaults:{layout:"flex",align:"center",defaults:{flex:1}},renderHtml:function(){var t=this._layout,e=this.classPrefix;return this.classes.add("formitem"),t.preRender(this),'<div id="'+this._id+'" class="'+this.classes+'" hidefocus="1" tabindex="-1">'+(this.settings.title?'<div id="'+this._id+'-title" class="'+e+'title">'+this.settings.title+"</div>":"")+'<div id="'+this._id+'-body" class="'+this.bodyClasses+'">'+(this.settings.html||"")+t.renderHtml(this)+"</div></div>"}}),cn=ae.extend({Defaults:{containerCls:"form",layout:"flex",direction:"column",align:"stretch",flex:1,padding:15,labelGap:30,spacing:10,callbacks:{submit:function(){this.submit()}}},preRender:function(){var t=this,e=t.items();t.settings.formItemDefaults||(t.settings.formItemDefaults={layout:"flex",autoResize:"overflow",defaults:{flex:1}}),e.each(function(e){var n,i=e.settings.label;i&&((n=new un(a.extend({items:{type:"label",id:e._id+"-l",text:i,flex:0,forId:e._id,disabled:e.disabled()}},t.settings.formItemDefaults))).type="formitem",e.aria("labelledby",e._id+"-l"),void 0===e.settings.flex&&(e.settings.flex=1),t.replace(e,n),n.add(e))})},submit:function(){return this.fire("submit",{data:this.toJSON()})},postRender:function(){this._super(),this.fromJSON(this.settings.data)},bindStates:function(){var t=this;function e(){var e,n,i=0,r=[];if(!1!==t.settings.labelGapCalc)for(("children"===t.settings.labelGapCalc?t.find("formitem"):t.items()).filter("formitem").each(function(t){var e=t.items()[0],n=e.getEl().clientWidth;i=n>i?n:i,r.push(e)}),n=t.settings.labelGap||0,e=r.length;e--;)r[e].settings.minWidth=i+n}t._super(),t.on("show",e),e()}}),dn=cn.extend({Defaults:{containerCls:"fieldset",layout:"flex",direction:"column",align:"stretch",flex:1,padding:"25 15 5 15",labelGap:30,spacing:10,border:1},renderHtml:function(){var t=this._layout,e=this.classPrefix;return this.preRender(),t.preRender(this),'<fieldset id="'+this._id+'" class="'+this.classes+'" hidefocus="1" tabindex="-1">'+(this.settings.title?'<legend id="'+this._id+'-title" class="'+e+'fieldset-title">'+this.settings.title+"</legend>":"")+'<div id="'+this._id+'-body" class="'+this.bodyClasses+'">'+(this.settings.html||"")+t.renderHtml(this)+"</div></fieldset>"}}),fn=0,hn=function(t){if(null===t||void 0===t)throw new Error("Node cannot be null or undefined");return{dom:E(t)}},pn={fromHtml:function(t,e){var n=(e||document).createElement("div");if(n.innerHTML=t,!n.hasChildNodes()||n.childNodes.length>1)throw console.error("HTML does not have a single root node",t),"HTML must have a single root node";return hn(n.childNodes[0])},fromTag:function(t,e){var n=(e||document).createElement(t);return hn(n)},fromText:function(t,e){var n=(e||document).createTextNode(t);return hn(n)},fromDom:hn,fromPoint:function(t,e,n){var i=t.dom();return N.from(i.elementFromPoint(e,n)).map(hn)}},mn=(Node.ATTRIBUTE_NODE,Node.CDATA_SECTION_NODE,Node.COMMENT_NODE,Node.DOCUMENT_NODE),gn=(Node.DOCUMENT_TYPE_NODE,Node.DOCUMENT_FRAGMENT_NODE,Node.ELEMENT_NODE),vn=(Node.TEXT_NODE,Node.PROCESSING_INSTRUCTION_NODE,Node.ENTITY_REFERENCE_NODE,Node.ENTITY_NODE,Node.NOTATION_NODE,"undefined"!=typeof window?window:Function("return this;")(),function(){return yn(0,0)}),yn=function(t,e){return{major:t,minor:e}},bn={nu:yn,detect:function(t,e){var n=String(e).toLowerCase();return 0===t.length?vn():function(t,e){var n=function(t,e){for(var n=0;n<t.length;n++){var i=t[n];if(i.test(e))return i}}(t,e);if(!n)return{major:0,minor:0};var i=function(t){return Number(e.replace(n,"$"+t))};return yn(i(1),i(2))}(t,n)},unknown:vn},xn=function(t,e){return function(){return e===t}},wn=function(t){var e=t.current;return{current:e,version:t.version,isEdge:xn("Edge",e),isChrome:xn("Chrome",e),isIE:xn("IE",e),isOpera:xn("Opera",e),isFirefox:xn("Firefox",e),isSafari:xn("Safari",e)}},_n={unknown:function(){return wn({current:void 0,version:bn.unknown()})},nu:wn,edge:E("Edge"),chrome:E("Chrome"),ie:E("IE"),opera:E("Opera"),firefox:E("Firefox"),safari:E("Safari")},Cn=function(t,e){return function(){return e===t}},kn=function(t){var e=t.current;return{current:e,version:t.version,isWindows:Cn("Windows",e),isiOS:Cn("iOS",e),isAndroid:Cn("Android",e),isOSX:Cn("OSX",e),isLinux:Cn("Linux",e),isSolaris:Cn("Solaris",e),isFreeBSD:Cn("FreeBSD",e)}},En={unknown:function(){return kn({current:void 0,version:bn.unknown()})},nu:kn,windows:E("Windows"),ios:E("iOS"),android:E("Android"),linux:E("Linux"),osx:E("OSX"),solaris:E("Solaris"),freebsd:E("FreeBSD")},Rn=function(t,e){var n=String(e).toLowerCase();return function(t,e){for(var n=0,i=t.length;n<i;n++){var r=t[n];if(e(r,n,t))return N.some(r)}return N.none()}(t,function(t){return t.search(n)})},Tn=function(t,e){return Rn(t,e).map(function(t){var n=bn.detect(t.versionRegexes,e);return{current:t.name,version:n}})},Sn=function(t,e){return Rn(t,e).map(function(t){var n=bn.detect(t.versionRegexes,e);return{current:t.name,version:n}})},Dn=function(t,e){return-1!==t.indexOf(e)},Pn=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,Nn=function(t){return function(e){return Dn(e,t)}},Mn=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:function(t){return Dn(t,"edge/")&&Dn(t,"chrome")&&Dn(t,"safari")&&Dn(t,"applewebkit")}},{name:"Chrome",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,Pn],search:function(t){return Dn(t,"chrome")&&!Dn(t,"chromeframe")}},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:function(t){return Dn(t,"msie")||Dn(t,"trident")}},{name:"Opera",versionRegexes:[Pn,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:Nn("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:Nn("firefox")},{name:"Safari",versionRegexes:[Pn,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:function(t){return(Dn(t,"safari")||Dn(t,"mobile/"))&&Dn(t,"applewebkit")}}],An=[{name:"Windows",search:Nn("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:function(t){return Dn(t,"iphone")||Dn(t,"ipad")},versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:Nn("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"OSX",search:Nn("os x"),versionRegexes:[/.*?os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:Nn("linux"),versionRegexes:[]},{name:"Solaris",search:Nn("sunos"),versionRegexes:[]},{name:"FreeBSD",search:Nn("freebsd"),versionRegexes:[]}],On={browsers:E(Mn),oses:E(An)},Hn=function(t){var e=On.browsers(),n=On.oses(),i=Tn(e,t).fold(_n.unknown,_n.nu),r=Sn(n,t).fold(En.unknown,En.nu);return{browser:i,os:r,deviceType:function(t,e,n){var i=t.isiOS()&&!0===/ipad/i.test(n),r=t.isiOS()&&!i,s=t.isAndroid()&&3===t.version.major,o=t.isAndroid()&&4===t.version.major,a=i||s||o&&!0===/mobile/i.test(n),l=t.isiOS()||t.isAndroid(),u=l&&!a,c=e.isSafari()&&t.isiOS()&&!1===/safari/i.test(n);return{isiPad:E(i),isiPhone:E(r),isTablet:E(a),isPhone:E(u),isTouch:E(l),isAndroid:t.isAndroid,isiOS:t.isiOS,isWebView:E(c)}}(r,i,t)}},Fn=gn,In=mn,Bn=function(t){return t.nodeType!==Fn&&t.nodeType!==In||0===t.childElementCount},Ln=((We=function(){var t=navigator.userAgent;return Hn(t)},Ve=!1,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return Ve||(Ve=!0,ze=We.apply(null,t)),ze})().browser.isIE(),function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}("element","offset"),a.trim),Wn=function(t){return function(e){if(e&&1===e.nodeType){if(e.contentEditable===t)return!0;if(e.getAttribute("data-mce-contenteditable")===t)return!0}return!1}},zn=Wn("true"),Vn=Wn("false"),$n=function(t,e,n,i,r){return{type:t,title:e,url:n,level:i,attach:r}},Un=function(t){return t.innerText||t.textContent},qn=function(t){return t.id?t.id:(e="h",n=(new Date).getTime(),e+"_"+Math.floor(1e9*Math.random())+ ++fn+String(n));var e,n},jn=function(t){return function(t){return t&&"A"===t.nodeName&&(t.id||t.name)}(t)&&Xn(t)},Yn=function(t){return t&&/^(H[1-6])$/.test(t.nodeName)},Xn=function(t){return function(t){for(;t=t.parentNode;){var e=t.contentEditable;if(e&&"inherit"!==e)return zn(t)}return!1}(t)&&!Vn(t)},Gn=function(t){return Yn(t)&&Xn(t)},Jn=function(t){var e=qn(t);return $n("header",Un(t),"#"+e,function(t){return Yn(t)?parseInt(t.nodeName.substr(1),10):0}(t),function(){t.id=e})},Zn=function(t){var e=t.id||t.name,n=Un(t);return $n("anchor",n||"#"+e,"#"+e,0,k)},Kn=function(t){var e,n;return e="h1,h2,h3,h4,h5,h6,a:not([href])",n=t,Y(((We=function(){var t=navigator.userAgent;return Hn(t)},Ve=!1,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return Ve||(Ve=!0,ze=We.apply(null,t)),ze})().browser.isIE(),function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}("element","offset"),function(t,e){return function(t,e){var n=void 0===e?document:e.dom();return Bn(n)?[]:Y(n.querySelectorAll(t),pn.fromDom)}(e,t)})(pn.fromDom(n),e),function(t){return t.dom()})},Qn=function(t){return Ln(t.title).length>0},ti=function(t){var e=Kn(t);return G(function(t){return Y(G(t,Gn),Jn)}(e).concat(function(t){return Y(G(t,jn),Zn)}(e)),Qn)},ei={},ni=function(t){return{title:t.title,value:{title:{raw:t.title},url:t.url,attach:t.attach}}},ii=function(t,e){return{title:t,value:{title:t,url:e,attach:k}}},ri=function(t,e,n){var i=e in t?t[e]:n;return!1===i?null:i},si=function(t,e,n,i){var r,s,o,l={title:"-"},u=function(t){var i=t.hasOwnProperty(n)?t[n]:[],r=G(i,function(t){return function(t,e){return!j(e,function(e){return e.url===t})}(t,e)});return a.map(r,function(t){return{title:t,value:{title:t,url:t,attach:k}}})},c=function(t){return function(t){return a.map(t,ni)}(G(e,function(e){return e.type===t}))};return!1===i.typeahead_urls?[]:"file"===n?(r=[ai(t,u(ei)),ai(t,c("header")),ai(t,function(){var t=c("anchor"),e=ri(i,"anchor_top","#top"),n=ri(i,"anchor_bottom","#bottom");return null!==e&&t.unshift(ii("<top>",e)),null!==n&&t.push(ii("<bottom>",n)),t}())],s=function(t,e){return 0===t.length||0===e.length?t.concat(e):t.concat(l,e)},o=[],X(r,function(t){o=s(o,t)}),o):ai(t,u(ei))},oi=function(t,e){var n,i,r,s=ei[e];/^https?/.test(t)&&(s?(n=s,i=t,r=q(n,i),-1===r?N.none():N.some(r)).isNone()&&(ei[e]=s.slice(0,5).concat(t)):ei[e]=[t])},ai=function(t,e){var n=t.toLowerCase(),i=a.grep(e,function(t){return-1!==t.title.toLowerCase().indexOf(n)});return 1===i.length&&i[0].title===t?[]:i},li=function(t,e,n){var i=e.filepicker_validator_handler;i&&t.state.on("change:value",function(e){var r;0!==(r=e.value).length?i({url:r,type:n},function(e){var n=function(t){var e=t.status,n=t.message;return"valid"===e?{status:"ok",message:n}:"unknown"===e?{status:"warn",message:n}:"invalid"===e?{status:"warn",message:n}:{status:"none",message:""}}(e);t.statusMessage(n.message),t.statusLevel(n.status)}):t.statusLevel("none")})},ui=Ke.extend({Statics:{clearHistory:function(){ei={}}},init:function(t){var e,n,i,r=this,s=window.tinymce?window.tinymce.activeEditor:o.activeEditor,l=s.settings,u=t.filetype;t.spellcheck=!1,(i=l.file_picker_types||l.file_browser_callback_types)&&(i=a.makeMap(i,/[, ]/)),i&&!i[u]||(!(n=l.file_picker_callback)||i&&!i[u]?!(n=l.file_browser_callback)||i&&!i[u]||(e=function(){n(r.getEl("inp").id,r.value(),u,window)}):e=function(){var t=r.fire("beforecall").meta;t=a.extend({filetype:u},t),n.call(s,function(t,e){r.value(t).fire("change",{meta:e})},r.value(),t)}),e&&(t.icon="browse",t.onaction=e),r._super(t),r.classes.add("filepicker"),function(t,e,n,i){var r=function(r){var s=ti(n),o=si(r,s,i,e);t.showAutoComplete(o,r)};t.on("autocomplete",function(){r(t.value())}),t.on("selectitem",function(e){var n=e.value;t.value(n.url);var r=function(t){var e=t.title;return e.raw?e.raw:e}(n);"image"===i?t.fire("change",{meta:{alt:r,attach:n.attach}}):t.fire("change",{meta:{text:r,attach:n.attach}}),t.focus()}),t.on("click",function(e){0===t.value().length&&"INPUT"===e.target.nodeName&&r("")}),t.on("PostRender",function(){t.getRoot().on("submit",function(e){e.isDefaultPrevented()||oi(t.value(),i)})})}(r,l,s.getBody(),u),li(r,l,u)}}),ci=je.extend({recalc:function(t){var e=t.layoutRect(),n=t.paddingBox;t.items().filter(":visible").each(function(t){t.layoutRect({x:n.left,y:n.top,w:e.innerW-n.right-n.left,h:e.innerH-n.top-n.bottom}),t.recalc&&t.recalc()})}}),di=je.extend({recalc:function(t){var e,n,i,r,s,o,a,l,u,c,d,f,h,p,m,g,v,y,b,x,w,_,C,k,E,R,T,S,D,P,N,M,A,O,H,F,I,B=[],L=Math.max,W=Math.min;for(i=t.items().filter(":visible"),r=t.layoutRect(),s=t.paddingBox,o=t.settings,f=t.isRtl()?o.direction||"row-reversed":o.direction,a=o.align,l=t.isRtl()?o.pack||"end":o.pack,u=o.spacing||0,"row-reversed"!==f&&"column-reverse"!==f||(i=i.set(i.toArray().reverse()),f=f.split("-")[0]),"column"===f?(k="y",_="h",C="minH",E="maxH",T="innerH",R="top",S="deltaH",D="contentH",O="left",M="w",P="x",N="innerW",A="minW",H="right",F="deltaW",I="contentW"):(k="x",_="w",C="minW",E="maxW",T="innerW",R="left",S="deltaW",D="contentW",O="top",M="h",P="y",N="innerH",A="minH",H="bottom",F="deltaH",I="contentH"),d=r[T]-s[R]-s[R],w=c=0,e=0,n=i.length;e<n;e++)p=(h=i[e]).layoutRect(),m=h.settings.flex,d-=e<n-1?u:0,m>0&&(c+=m,p[E]&&B.push(h),p.flex=m),d-=p[C],(g=s[O]+p[A]+s[H])>w&&(w=g);if((b={})[C]=d<0?r[C]-d+r[S]:r[T]-d+r[S],b[A]=w+r[F],b[D]=r[T]-d,b[I]=w,b.minW=W(b.minW,r.maxW),b.minH=W(b.minH,r.maxH),b.minW=L(b.minW,r.startMinWidth),b.minH=L(b.minH,r.startMinHeight),!r.autoResize||b.minW===r.minW&&b.minH===r.minH){for(y=d/c,e=0,n=B.length;e<n;e++)v=(p=(h=B[e]).layoutRect())[E],(g=p[C]+p.flex*y)>v?(d-=p[E]-p[C],c-=p.flex,p.flex=0,p.maxFlexSize=v):p.maxFlexSize=0;for(y=d/c,x=s[R],b={},0===c&&("end"===l?x=d+s[R]:"center"===l?(x=Math.round(r[T]/2-(r[T]-d)/2)+s[R])<0&&(x=s[R]):"justify"===l&&(x=s[R],u=Math.floor(d/(i.length-1)))),b[P]=s[O],e=0,n=i.length;e<n;e++)g=(p=(h=i[e]).layoutRect()).maxFlexSize||p[C],"center"===a?b[P]=Math.round(r[N]/2-p[M]/2):"stretch"===a?(b[M]=L(p[A]||0,r[N]-s[O]-s[H]),b[P]=s[O]):"end"===a&&(b[P]=r[N]-p[M]-s.top),p.flex>0&&(g+=p.flex*y),b[_]=g,b[k]=x,h.layoutRect(b),h.recalc&&h.recalc(),x+=g+u}else if(b.w=b.minW,b.h=b.minH,t.layoutRect(b),this.recalc(t),null===t._lastRect){var z=t.parent();z&&(z._lastRect=null,z.recalc())}}}),fi=qe.extend({Defaults:{containerClass:"flow-layout",controlClass:"flow-layout-item",endClass:"break"},recalc:function(t){t.items().filter(":visible").each(function(t){t.recalc&&t.recalc()})},isNative:function(){return!0}}),hi=function(t,e){return function(t,e){var n=void 0===e?document:e.dom();return Bn(n)?N.none():N.from(n.querySelector(t)).map(pn.fromDom)}(e,t)},pi=function(t,e){return function(){t.execCommand("mceToggleFormat",!1,e)}},mi=function(t,e,n){var i=function(t){n(t,e)};t.formatter?t.formatter.formatChanged(e,i):t.on("init",function(){t.formatter.formatChanged(e,i)})},gi=function(t,e){return function(n){mi(t,e,function(t){n.control.active(t)})}},vi=function(t){var e=["alignleft","aligncenter","alignright","alignjustify"],n=[{text:"Left",icon:"alignleft",onclick:pi(t,"alignleft")},{text:"Center",icon:"aligncenter",onclick:pi(t,"aligncenter")},{text:"Right",icon:"alignright",onclick:pi(t,"alignright")},{text:"Justify",icon:"alignjustify",onclick:pi(t,"alignjustify")}];t.addMenuItem("align",{text:"Align",menu:n}),t.addButton("align",{type:"menubutton",icon:"alignleft",menu:n,onShowMenu:function(n){var i=n.control.menu;a.each(e,function(e,n){i.items().eq(n).each(function(n){return n.active(t.formatter.match(e))})})},onPostRender:function(n){var i=n.control;a.each(e,function(e,n){mi(t,e,function(t){i.icon("alignleft"),t&&i.icon(e)})})}}),a.each({alignleft:["Align left","JustifyLeft"],aligncenter:["Align center","JustifyCenter"],alignright:["Align right","JustifyRight"],alignjustify:["Justify","JustifyFull"],alignnone:["No alignment","JustifyNone"]},function(e,n){t.addButton(n,{active:!1,tooltip:e[0],cmd:e[1],onPostRender:gi(t,n)})})},yi=function(t){return t?t.split(",")[0]:""},bi=function(t,e){return function(){var n=this;n.state.set("value",null),t.on("init nodeChange",function(i){var r=t.queryCommandValue("FontName"),s=function(t,e){var n,i=e?e.toLowerCase():"";return a.each(t,function(t){t.value.toLowerCase()===i&&(n=t.value)}),a.each(t,function(t){n||yi(t.value).toLowerCase()!==yi(i).toLowerCase()||(n=t.value)}),n}(e,r);n.value(s||null),!s&&r&&n.text(yi(r))})}},xi=function(t){t.addButton("fontselect",function(){var e=function(t){var e=function(t){for(var e=(t=t.replace(/;$/,"").split(";")).length;e--;)t[e]=t[e].split("=");return t}(t.settings.font_formats||"Andale Mono=andale mono,monospace;Arial=arial,helvetica,sans-serif;Arial Black=arial black,sans-serif;Book Antiqua=book antiqua,palatino,serif;Comic Sans MS=comic sans ms,sans-serif;Courier New=courier new,courier,monospace;Georgia=georgia,palatino,serif;Helvetica=helvetica,arial,sans-serif;Impact=impact,sans-serif;Symbol=symbol;Tahoma=tahoma,arial,helvetica,sans-serif;Terminal=terminal,monaco,monospace;Times New Roman=times new roman,times,serif;Trebuchet MS=trebuchet ms,geneva,sans-serif;Verdana=verdana,geneva,sans-serif;Webdings=webdings;Wingdings=wingdings,zapf dingbats");return a.map(e,function(t){return{text:{raw:t[0]},value:t[1],textStyle:-1===t[1].indexOf("dings")?"font-family:"+t[1]:""}})}(t);return{type:"listbox",text:"Font Family",tooltip:"Font Family",values:e,fixedWidth:!0,onPostRender:bi(t,e),onselect:function(e){e.control.settings.value&&t.execCommand("FontName",!1,e.control.settings.value)}}})},wi=function(t){xi(t)},_i=function(t,e){return/[0-9.]+px$/.test(t)?function(t,e){var n=Math.pow(10,e);return Math.round(t*n)/n}(72*parseInt(t,10)/96,e||0)+"pt":t},Ci=function(t,e,n){var i;return a.each(t,function(t){t.value===n?i=n:t.value===e&&(i=e)}),i},ki=function(t){t.addButton("fontsizeselect",function(){var e=function(t){var e=t.settings.fontsize_formats||"8pt 10pt 12pt 14pt 18pt 24pt 36pt";return a.map(e.split(" "),function(t){var e=t,n=t,i=t.split("=");return i.length>1&&(e=i[0],n=i[1]),{text:e,value:n}})}(t);return{type:"listbox",text:"Font Sizes",tooltip:"Font Sizes",values:e,fixedWidth:!0,onPostRender:function(t,e){return function(){var n=this;t.on("init nodeChange",function(i){var r,s,o,a;if(r=t.queryCommandValue("FontSize"))for(o=3;!a&&o>=0;o--)s=_i(r,o),a=Ci(e,s,r);n.value(a||null),a||n.text(s)})}}(t,e),onclick:function(e){e.control.settings.value&&t.execCommand("FontSize",!1,e.control.settings.value)}}})},Ei=function(t){ki(t)},Ri=function(t,e){var n=e.length;return a.each(e,function(e){e.menu&&(e.hidden=0===Ri(t,e.menu));var i=e.format;i&&(e.hidden=!t.formatter.canApply(i)),e.hidden&&n--}),n},Ti=function(t,e){var n=e.items().length;return e.items().each(function(e){e.menu&&e.visible(Ti(t,e.menu)>0),!e.menu&&e.settings.menu&&e.visible(Ri(t,e.settings.menu)>0);var i=e.settings.format;i&&e.visible(t.formatter.canApply(i)),e.visible()||n--}),n},Si=function(t){var e=function(t){var e=0,n=[],i=[{title:"Headings",items:[{title:"Heading 1",format:"h1"},{title:"Heading 2",format:"h2"},{title:"Heading 3",format:"h3"},{title:"Heading 4",format:"h4"},{title:"Heading 5",format:"h5"},{title:"Heading 6",format:"h6"}]},{title:"Inline",items:[{title:"Bold",icon:"bold",format:"bold"},{title:"Italic",icon:"italic",format:"italic"},{title:"Underline",icon:"underline",format:"underline"},{title:"Strikethrough",icon:"strikethrough",format:"strikethrough"},{title:"Superscript",icon:"superscript",format:"superscript"},{title:"Subscript",icon:"subscript",format:"subscript"},{title:"Code",icon:"code",format:"code"}]},{title:"Blocks",items:[{title:"Paragraph",format:"p"},{title:"Blockquote",format:"blockquote"},{title:"Div",format:"div"},{title:"Pre",format:"pre"}]},{title:"Alignment",items:[{title:"Left",icon:"alignleft",format:"alignleft"},{title:"Center",icon:"aligncenter",format:"aligncenter"},{title:"Right",icon:"alignright",format:"alignright"},{title:"Justify",icon:"alignjustify",format:"alignjustify"}]}],r=function(t){var i=[];if(t)return a.each(t,function(t){var s={text:t.title,icon:t.icon};if(t.items)s.menu=r(t.items);else{var o=t.format||"custom"+e++;t.format||(t.name=o,n.push(t)),s.format=o,s.cmd=t.cmd}i.push(s)}),i};return t.on("init",function(){a.each(n,function(e){t.formatter.register(e.name,e)})}),{type:"menu",items:t.settings.style_formats_merge?t.settings.style_formats?r(i.concat(t.settings.style_formats)):r(i):r(t.settings.style_formats||i),onPostRender:function(e){t.fire("renderFormatsMenu",{control:e.control})},itemDefaults:{preview:!0,textStyle:function(){if(this.settings.format)return t.formatter.getCssText(this.settings.format)},onPostRender:function(){var e=this;e.parent().on("show",function(){var n,i;(n=e.settings.format)&&(e.disabled(!t.formatter.canApply(n)),e.active(t.formatter.match(n))),(i=e.settings.cmd)&&e.active(t.queryCommandState(i))})},onclick:function(){this.settings.format&&pi(t,this.settings.format)(),this.settings.cmd&&t.execCommand(this.settings.cmd)}}}}(t);!function(t,e){t.addMenuItem("formats",{text:"Formats",menu:e})}(t,e),function(t,e){t.addButton("styleselect",{type:"menubutton",text:"Formats",menu:e,onShowMenu:function(){t.settings.style_formats_autohide&&Ti(t,this.menu)}})}(t,e)},Di=function(t,e){return function(){var n=[];return a.each(e,function(e){n.push({text:e[0],value:e[1],textStyle:function(){return t.formatter.getCssText(e[1])}})}),{type:"listbox",text:e[0][0],values:n,fixedWidth:!0,onselect:function(e){if(e.control){var n=e.control.value();pi(t,n)()}},onPostRender:function(t,e,n){return function(){var i=this;t.on("nodeChange",function(r){var s=t.formatter,o=null;a.each(r.parents,function(t){if(a.each(e,function(e){if(n?s.matchNode(t,n,{value:e.value})&&(o=e.value):s.matchNode(t,e.value)&&(o=e.value),o)return!1}),o)return!1}),i.value(o)})}}(t,n)}}},Pi=function(t){var e=function(t){for(var e=(t=t.replace(/;$/,"").split(";")).length;e--;)t[e]=t[e].split("=");return t}(t.settings.block_formats||"Paragraph=p;Heading 1=h1;Heading 2=h2;Heading 3=h3;Heading 4=h4;Heading 5=h5;Heading 6=h6;Preformatted=pre");t.addMenuItem("blockformats",{text:"Blocks",menu:function(t,e){return a.map(e,function(e){return{text:e[0],onclick:pi(t,e[1]),textStyle:function(){return t.formatter.getCssText(e[1])}}})}(t,e)}),t.addButton("formatselect",Di(t,e))},Ni=function(t,e){var n,i;if("string"==typeof e)i=e.split(" ");else if(a.isArray(e))return function(t){for(var e=[],n=0,i=t.length;n<i;++n){if(!Array.prototype.isPrototypeOf(t[n]))throw new Error("Arr.flatten item "+n+" was not an array, input: "+t);K.apply(e,t[n])}return e}(a.map(e,function(e){return Ni(t,e)}));return n=a.grep(i,function(e){return"|"===e||e in t.menuItems}),a.map(n,function(e){return"|"===e?{text:"-"}:t.menuItems[e]})},Mi=function(t){return t&&"-"===t.text},Ai=function(t){var e=G(t,function(t,e,n){return!Mi(t)||!Mi(n[e-1])});return G(e,function(t,e,n){return!Mi(t)||e>0&&e<n.length-1})},Oi=function(t){var e=t.settings.insert_button_items;return Ai(e?Ni(t,e):function(t,e){var n=[{text:"-"}],i=a.grep(t.menuItems,function(t){return t.context===e});return a.each(i,function(t){"before"===t.separator&&n.push({text:"|"}),t.prependToContext?n.unshift(t):n.push(t),"after"===t.separator&&n.push({text:"|"})}),n}(t,"insert"))},Hi=function(t){!function(t){t.addButton("insert",{type:"menubutton",icon:"insert",menu:[],oncreatemenu:function(){this.menu.add(Oi(t)),this.menu.renderNew()}})}(t)},Fi=function(t){!function(t){a.each({bold:"Bold",italic:"Italic",underline:"Underline",strikethrough:"Strikethrough",subscript:"Subscript",superscript:"Superscript"},function(e,n){t.addButton(n,{active:!1,tooltip:e,onPostRender:gi(t,n),onclick:pi(t,n)})})}(t),function(t){a.each({outdent:["Decrease indent","Outdent"],indent:["Increase indent","Indent"],cut:["Cut","Cut"],copy:["Copy","Copy"],paste:["Paste","Paste"],help:["Help","mceHelp"],selectall:["Select all","SelectAll"],visualaid:["Visual aids","mceToggleVisualAid"],newdocument:["New document","mceNewDocument"],removeformat:["Clear formatting","RemoveFormat"],remove:["Remove","Delete"]},function(e,n){t.addButton(n,{tooltip:e[0],cmd:e[1]})})}(t),function(t){a.each({blockquote:["Blockquote","mceBlockQuote"],subscript:["Subscript","Subscript"],superscript:["Superscript","Superscript"]},function(e,n){t.addButton(n,{active:!1,tooltip:e[0],cmd:e[1],onPostRender:gi(t,n)})})}(t)},Ii=function(t){Fi(t),function(t){a.each({bold:["Bold","Bold","Meta+B"],italic:["Italic","Italic","Meta+I"],underline:["Underline","Underline","Meta+U"],strikethrough:["Strikethrough","Strikethrough"],subscript:["Subscript","Subscript"],superscript:["Superscript","Superscript"],removeformat:["Clear formatting","RemoveFormat"],newdocument:["New document","mceNewDocument"],cut:["Cut","Cut","Meta+X"],copy:["Copy","Copy","Meta+C"],paste:["Paste","Paste","Meta+V"],selectall:["Select all","SelectAll","Meta+A"]},function(e,n){t.addMenuItem(n,{text:e[0],icon:n,shortcut:e[2],cmd:e[1]})}),t.addMenuItem("codeformat",{text:"Code",icon:"code",onclick:pi(t,"code")})}(t)},Bi=function(t,e){return function(){var n=this,i=function(){var n="redo"===e?"hasRedo":"hasUndo";return!!t.undoManager&&t.undoManager[n]()};n.disabled(!i()),t.on("Undo Redo AddUndo TypingUndo ClearUndos SwitchMode",function(){n.disabled(t.readonly||!i())})}},Li=function(t){!function(t){t.addMenuItem("undo",{text:"Undo",icon:"undo",shortcut:"Meta+Z",onPostRender:Bi(t,"undo"),cmd:"undo"}),t.addMenuItem("redo",{text:"Redo",icon:"redo",shortcut:"Meta+Y",onPostRender:Bi(t,"redo"),cmd:"redo"})}(t),function(t){t.addButton("undo",{tooltip:"Undo",onPostRender:Bi(t,"undo"),cmd:"undo"}),t.addButton("redo",{tooltip:"Redo",onPostRender:Bi(t,"redo"),cmd:"redo"})}(t)},Wi=function(t){!function(t){t.addMenuItem("visualaid",{text:"Visual aids",selectable:!0,onPostRender:function(t){return function(){var e=this;t.on("VisualAid",function(t){e.active(t.hasVisual)}),e.active(t.hasVisual)}}(t),cmd:"mceToggleVisualAid"})}(t)},zi={setup:function(t){!function(t){t.rtl&&(ie.rtl=!0)}(t),function(t){t.on("mousedown",function(){Ce.hideAll()})}(t),function(t){t.settings.ui_container&&(ut.container=hi(pn.fromDom(document.body),t.settings.ui_container).fold(E(null),function(t){return t.dom()}))}(t),Pe.tooltips=!ut.iOS,ie.translate=function(t){return o.translate(t)},Pi(t),vi(t),Ii(t),Li(t),Ei(t),wi(t),Si(t),Wi(t),Hi(t)}},Vi=je.extend({recalc:function(t){var e,n,i,r,s,o,a,l,u,c,d,f,h,p,m,g,v,y,b,x,w,_,C,k,E,R,T,S,D=[],P=[];e=t.settings,r=t.items().filter(":visible"),s=t.layoutRect(),i=e.columns||Math.ceil(Math.sqrt(r.length)),n=Math.ceil(r.length/i),y=e.spacingH||e.spacing||0,b=e.spacingV||e.spacing||0,x=e.alignH||e.align,w=e.alignV||e.align,g=t.paddingBox,S="reverseRows"in e?e.reverseRows:t.isRtl(),x&&"string"==typeof x&&(x=[x]),w&&"string"==typeof w&&(w=[w]);for(d=0;d<i;d++)D.push(0);for(f=0;f<n;f++)P.push(0);for(f=0;f<n;f++)for(d=0;d<i&&(c=r[f*i+d]);d++)k=(u=c.layoutRect()).minW,E=u.minH,D[d]=k>D[d]?k:D[d],P[f]=E>P[f]?E:P[f];for(R=s.innerW-g.left-g.right,_=0,d=0;d<i;d++)_+=D[d]+(d>0?y:0),R-=(d>0?y:0)+D[d];for(T=s.innerH-g.top-g.bottom,C=0,f=0;f<n;f++)C+=P[f]+(f>0?b:0),T-=(f>0?b:0)+P[f];if(_+=g.left+g.right,C+=g.top+g.bottom,(l={}).minW=_+(s.w-s.innerW),l.minH=C+(s.h-s.innerH),l.contentW=l.minW-s.deltaW,l.contentH=l.minH-s.deltaH,l.minW=Math.min(l.minW,s.maxW),l.minH=Math.min(l.minH,s.maxH),l.minW=Math.max(l.minW,s.startMinWidth),l.minH=Math.max(l.minH,s.startMinHeight),!s.autoResize||l.minW===s.minW&&l.minH===s.minH){var N;s.autoResize&&((l=t.layoutRect(l)).contentW=l.minW-s.deltaW,l.contentH=l.minH-s.deltaH),N="start"===e.packV?0:T>0?Math.floor(T/n):0;var M=0,A=e.flexWidths;if(A)for(d=0;d<A.length;d++)M+=A[d];else M=i;var O=R/M;for(d=0;d<i;d++)D[d]+=A?A[d]*O:O;for(p=g.top,f=0;f<n;f++){for(h=g.left,a=P[f]+N,d=0;d<i&&(c=r[S?f*i+i-1-d:f*i+d]);d++)m=c.settings,u=c.layoutRect(),o=Math.max(D[d],u.startMinWidth),u.x=h,u.y=p,"center"===(v=m.alignH||(x?x[d]||x[0]:null))?u.x=h+o/2-u.w/2:"right"===v?u.x=h+o-u.w:"stretch"===v&&(u.w=o),"center"===(v=m.alignV||(w?w[d]||w[0]:null))?u.y=p+a/2-u.h/2:"bottom"===v?u.y=p+a-u.h:"stretch"===v&&(u.h=a),c.layoutRect(u),h+=o+y,c.recalc&&c.recalc();p+=a+b}}else if(l.w=l.minW,l.h=l.minH,t.layoutRect(l),this.recalc(t),null===t._lastRect){var H=t.parent();H&&(H._lastRect=null,H.recalc())}}}),$i=Pe.extend({renderHtml:function(){return this.classes.add("iframe"),this.canFocus=!1,'<iframe id="'+this._id+'" class="'+this.classes+'" tabindex="-1" src="'+(this.settings.url||"javascript:''")+'" frameborder="0"></iframe>'},src:function(t){this.getEl().src=t},html:function(t,e){var n=this,i=this.getEl().contentWindow.document.body;return i?(i.innerHTML=t,e&&e()):C.setTimeout(function(){n.html(t)}),this}}),Ui=Pe.extend({init:function(t){this._super(t),this.classes.add("widget").add("infobox"),this.canFocus=!1},severity:function(t){this.classes.remove("error"),this.classes.remove("warning"),this.classes.remove("success"),this.classes.add(t)},help:function(t){this.state.set("help",t)},renderHtml:function(){var t=this.classPrefix;return'<div id="'+this._id+'" class="'+this.classes+'"><div id="'+this._id+'-body">'+this.encode(this.state.get("text"))+'<button role="button" tabindex="-1"><i class="'+t+"ico "+t+'i-help"></i></button></div></div>'},bindStates:function(){var t=this;return t.state.on("change:text",function(e){t.getEl("body").firstChild.data=t.encode(e.value),t.state.get("rendered")&&t.updateLayoutRect()}),t.state.on("change:help",function(e){t.classes.toggle("has-help",e.value),t.state.get("rendered")&&t.updateLayoutRect()}),t._super()}}),qi=Pe.extend({init:function(t){this._super(t),this.classes.add("widget").add("label"),this.canFocus=!1,t.multiline&&this.classes.add("autoscroll"),t.strong&&this.classes.add("strong")},initLayoutRect:function(){var t=this._super();return this.settings.multiline&&(xt.getSize(this.getEl()).width>t.maxW&&(t.minW=t.maxW,this.classes.add("multiline")),this.getEl().style.width=t.minW+"px",t.startMinH=t.h=t.minH=Math.min(t.maxH,xt.getSize(this.getEl()).height)),t},repaint:function(){return this.settings.multiline||(this.getEl().style.lineHeight=this.layoutRect().h+"px"),this._super()},severity:function(t){this.classes.remove("error"),this.classes.remove("warning"),this.classes.remove("success"),this.classes.add(t)},renderHtml:function(){var t,e,n=this.settings.forId,i=this.settings.html?this.settings.html:this.encode(this.state.get("text"));return!n&&(e=this.settings.forName)&&(t=this.getRoot().find("#"+e)[0])&&(n=t._id),n?'<label id="'+this._id+'" class="'+this.classes+'"'+(n?' for="'+n+'"':"")+">"+i+"</label>":'<span id="'+this._id+'" class="'+this.classes+'">'+i+"</span>"},bindStates:function(){var t=this;return t.state.on("change:text",function(e){t.innerHtml(t.encode(e.value)),t.state.get("rendered")&&t.updateLayoutRect()}),t._super()}}),ji=ae.extend({Defaults:{role:"toolbar",layout:"flow"},init:function(t){this._super(t),this.classes.add("toolbar")},postRender:function(){return this.items().each(function(t){t.classes.add("toolbar-item")}),this._super()}}),Yi=ji.extend({Defaults:{role:"menubar",containerCls:"menubar",ariaRoot:!0,defaults:{type:"menubutton"}}}),Xi=Ye.extend({init:function(t){this._renderOpen=!0,this._super(t),t=this.settings,this.classes.add("menubtn"),t.fixedWidth&&this.classes.add("fixed-width"),this.aria("haspopup",!0),this.state.set("menu",t.menu||this.render())},showMenu:function(t){var e,n=this;if(n.menu&&n.menu.visible()&&!1!==t)return n.hideMenu();n.menu||(e=n.state.get("menu")||[],n.classes.add("opened"),e.length?e={type:"menu",animate:!0,items:e}:(e.type=e.type||"menu",e.animate=!0),e.renderTo?n.menu=e.parent(n).show().renderTo():n.menu=m.create(e).parent(n).renderTo(),n.fire("createmenu"),n.menu.reflow(),n.menu.on("cancel",function(t){t.control.parent()===n.menu&&(t.stopPropagation(),n.focus(),n.hideMenu())}),n.menu.on("select",function(){n.focus()}),n.menu.on("show hide",function(t){"hide"===t.type&&t.control.parent()===n&&n.classes.remove("opened-under"),t.control===n.menu&&(n.activeMenu("show"===t.type),n.classes.toggle("opened","show"===t.type)),n.aria("expanded","show"===t.type)}).fire("show")),n.menu.show(),n.menu.layoutRect({w:n.layoutRect().w}),n.menu.repaint(),n.menu.moveRel(n.getEl(),n.isRtl()?["br-tr","tr-br"]:["bl-tl","tl-bl"]);var i=n.menu.layoutRect(),r=n.$el.offset().top+n.layoutRect().h;r>i.y&&r<i.y+i.h&&n.classes.add("opened-under"),n.fire("showmenu")},hideMenu:function(){this.menu&&(this.menu.items().each(function(t){t.hideMenu&&t.hideMenu()}),this.menu.hide())},activeMenu:function(t){this.classes.toggle("active",t)},renderHtml:function(){var t,e=this._id,n=this.classPrefix,i=this.settings.icon,r=this.state.get("text"),s="";return(t=this.settings.image)?(i="none","string"!=typeof t&&(t=window.getSelection?t[0]:t[1]),t=" style=\"background-image: url('"+t+"')\""):t="",r&&(this.classes.add("btn-has-text"),s='<span class="'+n+'txt">'+this.encode(r)+"</span>"),i=this.settings.icon?n+"ico "+n+"i-"+i:"",this.aria("role",this.parent()instanceof Yi?"menuitem":"button"),'<div id="'+e+'" class="'+this.classes+'" tabindex="-1" aria-labelledby="'+e+'"><button id="'+e+'-open" role="presentation" type="button" tabindex="-1">'+(i?'<i class="'+i+'"'+t+"></i>":"")+s+' <i class="'+n+'caret"></i></button></div>'},postRender:function(){var t=this;return t.on("click",function(e){e.control===t&&function(t,e){for(;t;){if(e===t)return!0;t=t.parentNode}return!1}(e.target,t.getEl())&&(t.focus(),t.showMenu(!e.aria),e.aria&&t.menu.items().filter(":visible")[0].focus())}),t.on("mouseenter",function(e){var n,i=e.control,r=t.parent();i&&r&&i instanceof Xi&&i.parent()===r&&(r.items().filter("MenuButton").each(function(t){t.hideMenu&&t!==i&&(t.menu&&t.menu.visible()&&(n=!0),t.hideMenu())}),n&&(i.focus(),i.showMenu()))}),t._super()},bindStates:function(){var t=this;return t.state.on("change:menu",function(){t.menu&&t.menu.remove(),t.menu=null}),t._super()},remove:function(){this._super(),this.menu&&this.menu.remove()}}),Gi=Ce.extend({Defaults:{defaultType:"menuitem",border:1,layout:"stack",role:"application",bodyRole:"menu",ariaRoot:!0},init:function(t){if(t.autohide=!0,t.constrainToViewport=!0,"function"==typeof t.items&&(t.itemsFactory=t.items,t.items=[]),t.itemDefaults)for(var e=t.items,n=e.length;n--;)e[n]=a.extend({},t.itemDefaults,e[n]);this._super(t),this.classes.add("menu"),t.animate&&11!==ut.ie&&this.classes.add("animate")},repaint:function(){return this.classes.toggle("menu-align",!0),this._super(),this.getEl().style.height="",this.getEl("body").style.height="",this},cancel:function(){this.hideAll(),this.fire("select")},load:function(){var t,e=this;function n(){e.throbber&&(e.throbber.hide(),e.throbber=null)}e.settings.itemsFactory&&(e.throbber||(e.throbber=new Re(e.getEl("body"),!0),0===e.items().length?(e.throbber.show(),e.fire("loading")):e.throbber.show(100,function(){e.items().remove(),e.fire("loading")}),e.on("hide close",n)),e.requestTime=t=(new Date).getTime(),e.settings.itemsFactory(function(i){0!==i.length?e.requestTime===t&&(e.getEl().style.width="",e.getEl("body").style.width="",n(),e.items().remove(),e.getEl("body").innerHTML="",e.add(i),e.renderNew(),e.fire("loaded")):e.hide()}))},hideAll:function(){return this.find("menuitem").exec("hideMenu"),this._super()},preRender:function(){var t=this;return t.items().each(function(e){var n=e.settings;if(n.icon||n.image||n.selectable)return t._hasIcons=!0,!1}),t.settings.itemsFactory&&t.on("postrender",function(){t.settings.itemsFactory&&t.load()}),t.on("show hide",function(e){e.control===t&&("show"===e.type?C.setTimeout(function(){t.classes.add("in")},0):t.classes.remove("in"))}),t._super()}}),Ji=Xi.extend({init:function(t){var e,n,i,r,s=this;s._super(t),t=s.settings,s._values=e=t.values,e&&(void 0!==t.value&&function e(r){for(var o=0;o<r.length;o++){if(n=r[o].selected||t.value===r[o].value)return i=i||r[o].text,s.state.set("value",r[o].value),!0;if(r[o].menu&&e(r[o].menu))return!0}}(e),!n&&e.length>0&&(i=e[0].text,s.state.set("value",e[0].value)),s.state.set("menu",e)),s.state.set("text",t.text||i),s.classes.add("listbox"),s.on("select",function(e){var n=e.control;r&&(e.lastControl=r),t.multiple?n.active(!n.active()):s.value(e.control.value()),r=n})},value:function(t){return 0===arguments.length?this.state.get("value"):void 0===t?this:(this.settings.values&&!function e(n){return j(n,function(n){return n.menu?e(n.menu):n.value===t})}(this.settings.values)?null===t&&this.state.set("value",null):this.state.set("value",t),this)},bindStates:function(){var t=this;return t.on("show",function(e){var n,i;n=e.control,i=t.value(),n instanceof Gi&&n.items().each(function(t){t.hasMenus()||t.active(t.value()===i)})}),t.state.on("change:value",function(e){var n=function t(e,n){var i;if(e)for(var r=0;r<e.length;r++){if(e[r].value===n)return e[r];if(e[r].menu&&(i=t(e[r].menu,n)))return i}}(t.state.get("menu"),e.value);n?t.text(n.text):t.text(t.settings.text)}),t._super()}}),Zi=Pe.extend({Defaults:{border:0,role:"menuitem"},init:function(t){var e;this._super(t),t=this.settings,this.classes.add("menu-item"),t.menu&&this.classes.add("menu-item-expand"),t.preview&&this.classes.add("menu-item-preview"),"-"!==(e=this.state.get("text"))&&"|"!==e||(this.classes.add("menu-item-sep"),this.aria("role","separator"),this.state.set("text","-")),t.selectable&&(this.aria("role","menuitemcheckbox"),this.classes.add("menu-item-checkbox"),t.icon="selected"),t.preview||t.selectable||this.classes.add("menu-item-normal"),this.on("mousedown",function(t){t.preventDefault()}),t.menu&&!t.ariaHideMenu&&this.aria("haspopup",!0)},hasMenus:function(){return!!this.settings.menu},showMenu:function(){var t,e=this,n=e.settings,i=e.parent();if(i.items().each(function(t){t!==e&&t.hideMenu()}),n.menu){(t=e.menu)?t.show():((t=n.menu).length?t={type:"menu",items:t}:t.type=t.type||"menu",i.settings.itemDefaults&&(t.itemDefaults=i.settings.itemDefaults),(t=e.menu=m.create(t).parent(e).renderTo()).reflow(),t.on("cancel",function(n){n.stopPropagation(),e.focus(),t.hide()}),t.on("show hide",function(t){t.control.items&&t.control.items().each(function(t){t.active(t.settings.selected)})}).fire("show"),t.on("hide",function(n){n.control===t&&e.classes.remove("selected")}),t.submenu=!0),t._parentMenu=i,t.classes.add("menu-sub");var r=t.testMoveRel(e.getEl(),e.isRtl()?["tl-tr","bl-br","tr-tl","br-bl"]:["tr-tl","br-bl","tl-tr","bl-br"]);t.moveRel(e.getEl(),r),t.rel=r,r="menu-sub-"+r,t.classes.remove(t._lastRel).add(r),t._lastRel=r,e.classes.add("selected"),e.aria("expanded",!0)}},hideMenu:function(){return this.menu&&(this.menu.items().each(function(t){t.hideMenu&&t.hideMenu()}),this.menu.hide(),this.aria("expanded",!1)),this},renderHtml:function(){var t,e=this._id,n=this.settings,i=this.classPrefix,r=this.state.get("text"),s=this.settings.icon,o="",a=n.shortcut,l=this.encode(n.url);function u(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function c(t){var e=n.match||"";return e?t.replace(new RegExp(u(e),"gi"),function(t){return"!mce~match["+t+"]mce~match!"}):t}function d(t){return t.replace(new RegExp(u("!mce~match["),"g"),"<b>").replace(new RegExp(u("]mce~match!"),"g"),"</b>")}return s&&this.parent().classes.add("menu-has-icons"),n.image&&(o=" style=\"background-image: url('"+n.image+"')\""),a&&(a=function(t){var e,n,i={};for(i=ut.mac?{alt:"&#x2325;",ctrl:"&#x2318;",shift:"&#x21E7;",meta:"&#x2318;"}:{meta:"Ctrl"},t=t.split("+"),e=0;e<t.length;e++)(n=i[t[e].toLowerCase()])&&(t[e]=n);return t.join("+")}(a)),s=i+"ico "+i+"i-"+(this.settings.icon||"none"),t="-"!==r?'<i class="'+s+'"'+o+"></i> ":"",r=d(this.encode(c(r))),l=d(this.encode(c(l))),'<div id="'+e+'" class="'+this.classes+'" tabindex="-1">'+t+("-"!==r?'<span id="'+e+'-text" class="'+i+'text">'+r+"</span>":"")+(a?'<div id="'+e+'-shortcut" class="'+i+'menu-shortcut">'+a+"</div>":"")+(n.menu?'<div class="'+i+'caret"></div>':"")+(l?'<div class="'+i+'menu-item-link">'+l+"</div>":"")+"</div>"},postRender:function(){var t=this,e=t.settings,n=e.textStyle;if("function"==typeof n&&(n=n.call(this)),n){var i=t.getEl("text");i&&(i.setAttribute("style",n),t._textStyle=n)}return t.on("mouseenter click",function(n){n.control===t&&(e.menu||"click"!==n.type?(t.showMenu(),n.aria&&t.menu.focus(!0)):(t.fire("select"),C.requestAnimationFrame(function(){t.parent().hideAll()})))}),t._super(),t},hover:function(){return this.parent().items().each(function(t){t.classes.remove("selected")}),this.classes.toggle("selected",!0),this},active:function(t){return function(t,e){var n=t._textStyle;if(n){var i=t.getEl("text");i.setAttribute("style",n),e&&(i.style.color="",i.style.backgroundColor="")}}(this,t),void 0!==t&&this.aria("checked",t),this._super(t)},remove:function(){this._super(),this.menu&&this.menu.remove()}}),Ki=Je.extend({Defaults:{classes:"radio",role:"radio"}}),Qi=Pe.extend({renderHtml:function(){var t=this.classPrefix;return this.classes.add("resizehandle"),"both"===this.settings.direction&&this.classes.add("resizehandle-both"),this.canFocus=!1,'<div id="'+this._id+'" class="'+this.classes+'"><i class="'+t+"ico "+t+'i-resize"></i></div>'},postRender:function(){var t=this;t._super(),t.resizeDragHelper=new ue(this._id,{start:function(){t.fire("ResizeStart")},drag:function(e){"both"!==t.settings.direction&&(e.deltaX=0),t.fire("Resize",e)},stop:function(){t.fire("ResizeEnd")}})},remove:function(){return this.resizeDragHelper&&this.resizeDragHelper.destroy(),this._super()}});function tr(t){var e="";if(t)for(var n=0;n<t.length;n++)e+='<option value="'+t[n]+'">'+t[n]+"</option>";return e}var er=Pe.extend({Defaults:{classes:"selectbox",role:"selectbox",options:[]},init:function(t){var e=this;e._super(t),e.settings.size&&(e.size=e.settings.size),e.settings.options&&(e._options=e.settings.options),e.on("keydown",function(t){var n;13===t.keyCode&&(t.preventDefault(),e.parents().reverse().each(function(t){if(t.toJSON)return n=t,!1}),e.fire("submit",{data:n.toJSON()}))})},options:function(t){return arguments.length?(this.state.set("options",t),this):this.state.get("options")},renderHtml:function(){var t,e="";return t=tr(this._options),this.size&&(e=' size = "'+this.size+'"'),'<select id="'+this._id+'" class="'+this.classes+'"'+e+">"+t+"</select>"},bindStates:function(){var t=this;return t.state.on("change:options",function(e){t.getEl().innerHTML=tr(e.value)}),t._super()}});function nr(t,e,n){return t<e&&(t=e),t>n&&(t=n),t}function ir(t,e,n){t.setAttribute("aria-"+e,n)}function rr(t,e){var n,i,r,s,o;"v"===t.settings.orientation?(r="top",i="height",n="h"):(r="left",i="width",n="w"),o=t.getEl("handle"),s=((t.layoutRect()[n]||100)-xt.getSize(o)[i])*((e-t._minValue)/(t._maxValue-t._minValue))+"px",o.style[r]=s,o.style.height=t.layoutRect().h+"px",ir(o,"valuenow",e),ir(o,"valuetext",""+t.settings.previewFilter(e)),ir(o,"valuemin",t._minValue),ir(o,"valuemax",t._maxValue)}var sr=Pe.extend({init:function(t){t.previewFilter||(t.previewFilter=function(t){return Math.round(100*t)/100}),this._super(t),this.classes.add("slider"),"v"===t.orientation&&this.classes.add("vertical"),this._minValue=U(t.minValue)?t.minValue:0,this._maxValue=U(t.maxValue)?t.maxValue:100,this._initValue=this.state.get("value")},renderHtml:function(){var t=this._id,e=this.classPrefix;return'<div id="'+t+'" class="'+this.classes+'"><div id="'+t+'-handle" class="'+e+'slider-handle" role="slider" tabindex="-1"></div></div>'},reset:function(){this.value(this._initValue).repaint()},postRender:function(){var t,e,n,i,r,s,o=this;t=o._minValue,e=o._maxValue,"v"===o.settings.orientation?(n="screenY",i="top",r="height",s="h"):(n="screenX",i="left",r="width",s="w"),o._super(),function(t,e){function n(n){var i,r;i=o.value(),i=nr(i=function(t,e,n){return n*(e-t)-t}(t,e,(i+(r=t))/(e-r)+.05*n),t,e),o.value(i),o.fire("dragstart",{value:i}),o.fire("drag",{value:i}),o.fire("dragend",{value:i})}o.on("keydown",function(t){switch(t.keyCode){case 37:case 38:n(-1);break;case 39:case 40:n(1)}})}(t,e),function(t,e,a){var l,u,c,d,f;o._dragHelper=new ue(o._id,{handle:o._id+"-handle",start:function(t){l=t[n],u=parseInt(o.getEl("handle").style[i],10),c=(o.layoutRect()[s]||100)-xt.getSize(a)[r],o.fire("dragstart",{value:f})},drag:function(r){var s=r[n]-l;d=nr(u+s,0,c),a.style[i]=d+"px",f=t+d/c*(e-t),o.value(f),o.tooltip().text(""+o.settings.previewFilter(f)).show().moveRel(a,"bc tc"),o.fire("drag",{value:f})},stop:function(){o.tooltip().hide(),o.fire("dragend",{value:f})}})}(t,e,o.getEl("handle"))},repaint:function(){this._super(),rr(this,this.value())},bindStates:function(){var t=this;return t.state.on("change:value",function(e){rr(t,e.value)}),t._super()}}),or=Pe.extend({renderHtml:function(){return this.classes.add("spacer"),this.canFocus=!1,'<div id="'+this._id+'" class="'+this.classes+'"></div>'}}),ar=Xi.extend({Defaults:{classes:"widget btn splitbtn",role:"button"},repaint:function(){var t,e,n=this.getEl(),i=this.layoutRect();return this._super(),t=n.firstChild,e=n.lastChild,yt(t).css({width:i.w-xt.getSize(e).width,height:i.h-2}),yt(e).css({height:i.h-2}),this},activeMenu:function(t){yt(this.getEl().lastChild).toggleClass(this.classPrefix+"active",t)},renderHtml:function(){var t,e,n=this._id,i=this.classPrefix,r=this.state.get("icon"),s=this.state.get("text"),o=this.settings,a="";return(t=o.image)?(r="none","string"!=typeof t&&(t=window.getSelection?t[0]:t[1]),t=" style=\"background-image: url('"+t+"')\""):t="",r=o.icon?i+"ico "+i+"i-"+r:"",s&&(this.classes.add("btn-has-text"),a='<span class="'+i+'txt">'+this.encode(s)+"</span>"),e="boolean"==typeof o.active?' aria-pressed="'+o.active+'"':"",'<div id="'+n+'" class="'+this.classes+'" role="button"'+e+' tabindex="-1"><button type="button" hidefocus="1" tabindex="-1">'+(r?'<i class="'+r+'"'+t+"></i>":"")+a+'</button><button type="button" class="'+i+'open" hidefocus="1" tabindex="-1">'+(this._menuBtnText?(r?" ":"")+this._menuBtnText:"")+' <i class="'+i+'caret"></i></button></div>'},postRender:function(){var t=this.settings.onclick;return this.on("click",function(e){var n=e.target;if(e.control===this)for(;n;){if(e.aria&&"down"!==e.aria.key||"BUTTON"===n.nodeName&&-1===n.className.indexOf("open"))return e.stopImmediatePropagation(),void(t&&t.call(this,e));n=n.parentNode}}),delete this.settings.onclick,this._super()}}),lr=fi.extend({Defaults:{containerClass:"stack-layout",controlClass:"stack-layout-item",endClass:"break"},isNative:function(){return!0}}),ur=me.extend({Defaults:{layout:"absolute",defaults:{type:"panel"}},activateTab:function(t){var e;this.activeTabId&&(e=this.getEl(this.activeTabId),yt(e).removeClass(this.classPrefix+"active"),e.setAttribute("aria-selected","false")),this.activeTabId="t"+t,(e=this.getEl("t"+t)).setAttribute("aria-selected","true"),yt(e).addClass(this.classPrefix+"active"),this.items()[t].show().fire("showtab"),this.reflow(),this.items().each(function(e,n){t!==n&&e.hide()})},renderHtml:function(){var t=this,e=t._layout,n="",i=t.classPrefix;return t.preRender(),e.preRender(t),t.items().each(function(e,r){var s=t._id+"-t"+r;e.aria("role","tabpanel"),e.aria("labelledby",s),n+='<div id="'+s+'" class="'+i+'tab" unselectable="on" role="tab" aria-controls="'+e._id+'" aria-selected="false" tabIndex="-1">'+t.encode(e.settings.title)+"</div>"}),'<div id="'+t._id+'" class="'+t.classes+'" hidefocus="1" tabindex="-1"><div id="'+t._id+'-head" class="'+i+'tabs" role="tablist">'+n+'</div><div id="'+t._id+'-body" class="'+t.bodyClasses+'">'+e.renderHtml(t)+"</div></div>"},postRender:function(){var t=this;t._super(),t.settings.activeTab=t.settings.activeTab||0,t.activateTab(t.settings.activeTab),this.on("click",function(e){var n=e.target.parentNode;if(n&&n.id===t._id+"-head")for(var i=n.childNodes.length;i--;)n.childNodes[i]===e.target&&t.activateTab(i)})},initLayoutRect:function(){var t,e,n;e=(e=xt.getSize(this.getEl("head")).width)<0?0:e,n=0,this.items().each(function(t){e=Math.max(e,t.layoutRect().minW),n=Math.max(n,t.layoutRect().minH)}),this.items().each(function(t){t.settings.x=0,t.settings.y=0,t.settings.w=e,t.settings.h=n,t.layoutRect({x:0,y:0,w:e,h:n})});var i=xt.getSize(this.getEl("head")).height;return this.settings.minWidth=e,this.settings.minHeight=n+i,(t=this._super()).deltaH+=i,t.innerH=t.h-t.deltaH,t}}),cr=Pe.extend({init:function(t){var e=this;e._super(t),e.classes.add("textbox"),t.multiline?e.classes.add("multiline"):(e.on("keydown",function(t){var n;13===t.keyCode&&(t.preventDefault(),e.parents().reverse().each(function(t){if(t.toJSON)return n=t,!1}),e.fire("submit",{data:n.toJSON()}))}),e.on("keyup",function(t){e.state.set("value",t.target.value)}))},repaint:function(){var t,e,n,i,r,s=0;t=this.getEl().style,e=this._layoutRect,r=this._lastRepaintRect||{};var o=document;return!this.settings.multiline&&o.all&&(!o.documentMode||o.documentMode<=8)&&(t.lineHeight=e.h-s+"px"),i=(n=this.borderBox).left+n.right+8,s=n.top+n.bottom+(this.settings.multiline?8:0),e.x!==r.x&&(t.left=e.x+"px",r.x=e.x),e.y!==r.y&&(t.top=e.y+"px",r.y=e.y),e.w!==r.w&&(t.width=e.w-i+"px",r.w=e.w),e.h!==r.h&&(t.height=e.h-s+"px",r.h=e.h),this._lastRepaintRect=r,this.fire("repaint",{},!1),this},renderHtml:function(){var t,e,n=this.settings;return t={id:this._id,hidefocus:"1"},a.each(["rows","spellcheck","maxLength","size","readonly","min","max","step","list","pattern","placeholder","required","multiple"],function(e){t[e]=n[e]}),this.disabled()&&(t.disabled="disabled"),n.subtype&&(t.type=n.subtype),(e=xt.create(n.multiline?"textarea":"input",t)).value=this.state.get("value"),e.className=this.classes.toString(),e.outerHTML},value:function(t){return arguments.length?(this.state.set("value",t),this):(this.state.get("rendered")&&this.state.set("value",this.getEl().value),this.state.get("value"))},postRender:function(){var t=this;t.getEl().value=t.state.get("value"),t._super(),t.$el.on("change",function(e){t.state.set("value",e.target.value),t.fire("change",e)})},bindStates:function(){var t=this;return t.state.on("change:value",function(e){t.getEl().value!==e.value&&(t.getEl().value=e.value)}),t.state.on("change:disabled",function(e){t.getEl().disabled=e.value}),t._super()},remove:function(){this.$el.off(),this._super()}}),dr=function(){return{Selector:Lt,Collection:Vt,ReflowQueue:Jt,Control:ie,Factory:m,KeyboardNavigation:se,Container:ae,DragHelper:ue,Scrollable:pe,Panel:me,Movable:Rt,Resizable:ge,FloatPanel:Ce,Window:Le,MessageBox:$e,Tooltip:De,Widget:Pe,Progress:Ne,Notification:Ae,Layout:qe,AbsoluteLayout:je,Button:Ye,ButtonGroup:Ge,Checkbox:Je,ComboBox:Ke,ColorBox:Qe,PanelButton:tn,ColorButton:nn,ColorPicker:sn,Path:an,ElementPath:ln,FormItem:un,Form:cn,FieldSet:dn,FilePicker:ui,FitLayout:ci,FlexLayout:di,FlowLayout:fi,FormatControls:zi,GridLayout:Vi,Iframe:$i,InfoBox:Ui,Label:qi,Toolbar:ji,MenuBar:Yi,MenuButton:Xi,MenuItem:Zi,Throbber:Re,Menu:Gi,ListBox:Ji,Radio:Ki,ResizeHandle:Qi,SelectBox:er,Slider:sr,Spacer:or,SplitButton:ar,StackLayout:lr,TabPanel:ur,TextBox:cr,DropZone:on,BrowseButton:Xe}},fr=function(t){t.ui?a.each(dr(),function(e,n){t.ui[n]=e}):t.ui=dr()};a.each(dr(),function(t,e){m.add(e,t)}),fr(window.tinymce?window.tinymce:{}),s.add("modern",function(t){return zi.setup(t),Ue(t)})}()},3:function(t,e,n){"use strict";(function(t){e.a={postRender:function(e){var n=this;t(".regitem-row, .memitem-row, .repositem-row",e).each(function(){n.positionSilentInElement(t(".desc-column",this))})},insertShuttleAndSilentElements:function(e){var n=this;t(".regitem-row, .memitem-row, .repositem-row",e).each(function(){var e=t(this),i=t(".desc-column",e);(e.hasClass("silent-item")||e.hasClass("nonsilent-item"))&&(t("td",e).first(),n.insertSilentIntoElement(i)),e.hasClass("shuttle")&&i.prepend('<span class="shuttle-arrow"></span>')})},insertSilentIntoElement:function(e){var n=[],i=e.contents().get().reverse(),r='<span class="'+(e.parent().hasClass("silent-item")?"dashed":"solid")+'-line"></span>',s=!0;if(t(i).each(function(){if(3===this.nodeType)this.data.trim().length&&(s=!1),n.push(t(this));else if(["SPAN","STRONG","B"].includes(this.nodeName))s=!1,n.push(t(this));else{if(n.length&&!s)return;if(["P","H4"].includes(this.nodeName))return void t(this).append(r);if(["OL","UL"].includes(this.nodeName)){var e=t(this).children().last(),i=t("h4",e);i.length?i.append(r):e.append(r)}}}),n.length){var o="";if(n.forEach(function(t){3===t[0].nodeType?t[0].data.trim().length&&(o=t[0].data+o):o=t[0].outerHTML+o}),o.trim().length>0){o="<p>"+o+" "+r+"</p>";for(var a=0;a<n.length;a+=1)n[a].remove();e.append(o)}}},positionSilentInElement:function(e){var n=t(".dashed-line, .dotted-line, .solid-line",e);if(n.length){var i=n.position().left,r=Math.floor(e.width()+parseInt(e.css("padding-left"),10)-i);r>15?(n.css({"margin-left":3}),n.width(r-3)):n.width(r)}}}}).call(e,n(0))},4:function(t,e,n){var i,r;!function(s){"use strict";void 0===(r="function"==typeof(i=s)?i.call(e,n,e,t):i)||(t.exports=r)}(function(){"use strict";var t,e,n,i,r,s,o,a,l,u,c,d,f,h,p,m,g,v,y={},b=/\s+/g,x="Sortable"+(new Date).getTime(),w=window,_=w.document,C=w.parseInt,k=!!("draggable"in _.createElement("div")),E=((v=_.createElement("x")).style.cssText="pointer-events:auto","auto"===v.style.pointerEvents),R=!1,T=Math.abs,S=[],D=q(function(t,e,n){if(n&&e.scroll){var i,r,s,l,u=e.scrollSensitivity,c=e.scrollSpeed,d=t.clientX,f=t.clientY,h=window.innerWidth,p=window.innerHeight;if(a!==n&&(o=e.scroll,a=n,!0===o)){o=n;do{if(o.offsetWidth<o.scrollWidth||o.offsetHeight<o.scrollHeight)break}while(o=o.parentNode)}o&&(i=o,r=o.getBoundingClientRect(),s=(T(r.right-d)<=u)-(T(r.left-d)<=u),l=(T(r.bottom-f)<=u)-(T(r.top-f)<=u)),s||l||(l=(p-f<=u)-(f<=u),((s=(h-d<=u)-(d<=u))||l)&&(i=w)),y.vx===s&&y.vy===l&&y.el===i||(y.el=i,y.vx=s,y.vy=l,clearInterval(y.pid),i&&(y.pid=setInterval(function(){i===w?w.scrollTo(w.pageXOffset+s*c,w.pageYOffset+l*c):(l&&(i.scrollTop+=l*c),s&&(i.scrollLeft+=s*c))},24)))}},30),P=function(t){var e=t.group;e&&"object"==typeof e||(e=t.group={name:e}),["pull","put"].forEach(function(t){t in e||(e[t]=!0)}),t.groups=" "+e.name+(e.put.join?" "+e.put.join(" "):"")+" "};function N(t,e){if(!t||!t.nodeType||1!==t.nodeType)throw"Sortable: `el` must be HTMLElement, and not "+{}.toString.call(t);this.el=t,this.options=e=j({},e),t[x]=this;var n={group:Math.random(),sort:!0,disabled:!1,store:null,handle:null,scroll:!0,scrollSensitivity:30,scrollSpeed:10,draggable:/[uo]l/i.test(t.nodeName)?"li":">*",ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",ignore:"a, img",filter:null,animation:0,setData:function(t,e){t.setData("Text",e.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1};for(var i in n)!(i in e)&&(e[i]=n[i]);for(var r in P(e),this)"_"===r.charAt(0)&&(this[r]=this[r].bind(this));this.nativeDraggable=!e.forceFallback&&k,O(t,"mousedown",this._onTapStart),O(t,"touchstart",this._onTapStart),this.nativeDraggable&&(O(t,"dragover",this),O(t,"dragenter",this)),S.push(this._onDragOver),e.store&&this.sort(e.store.get(this))}function M(e){i&&i.state!==e&&(I(i,"display",e?"none":""),!e&&i.state&&r.insertBefore(i,t),i.state=e)}function A(t,e,n){if(t){n=n||_;var i=(e=e.split(".")).shift().toUpperCase(),r=new RegExp("\\s("+e.join("|")+")(?=\\s)","g");do{if(">*"===i&&t.parentNode===n||(""===i||t.nodeName.toUpperCase()==i)&&(!e.length||((" "+t.className+" ").match(r)||[]).length==e.length))return t}while(t!==n&&(t=t.parentNode))}return null}function O(t,e,n){t.addEventListener(e,n,!1)}function H(t,e,n){t.removeEventListener(e,n,!1)}function F(t,e,n){if(t)if(t.classList)t.classList[n?"add":"remove"](e);else{var i=(" "+t.className+" ").replace(b," ").replace(" "+e+" "," ");t.className=(i+(n?" "+e:"")).replace(b," ")}}function I(t,e,n){var i=t&&t.style;if(i){if(void 0===n)return _.defaultView&&_.defaultView.getComputedStyle?n=_.defaultView.getComputedStyle(t,""):t.currentStyle&&(n=t.currentStyle),void 0===e?n:n[e];e in i||(e="-webkit-"+e),i[e]=n+("string"==typeof n?"":"px")}}function B(t,e,n){if(t){var i=t.getElementsByTagName(e),r=0,s=i.length;if(n)for(;r<s;r++)n(i[r],r);return i}return[]}function L(t,e,n,r,s,o,a){var l=_.createEvent("Event"),u=(t||e[x]).options,c="on"+n.charAt(0).toUpperCase()+n.substr(1);l.initEvent(n,!0,!0),l.to=e,l.from=s||e,l.item=r||e,l.clone=i,l.oldIndex=o,l.newIndex=a,e.dispatchEvent(l),u[c]&&u[c].call(t,l)}function W(t,e,n,i,r,s){var o,a,l=t[x],u=l.options.onMove;return(o=_.createEvent("Event")).initEvent("move",!0,!0),o.to=e,o.from=t,o.dragged=n,o.draggedRect=i,o.related=r||e,o.relatedRect=s||e.getBoundingClientRect(),t.dispatchEvent(o),u&&(a=u.call(l,o)),a}function z(t){t.draggable=!1}function V(){R=!1}function $(t){for(var e=t.tagName+t.className+t.src+t.href+t.textContent,n=e.length,i=0;n--;)i+=e.charCodeAt(n);return i.toString(36)}function U(t){var e=0;if(!t||!t.parentNode)return-1;for(;t&&(t=t.previousElementSibling);)"TEMPLATE"!==t.nodeName.toUpperCase()&&e++;return e}function q(t,e){var n,i;return function(){void 0===n&&(n=arguments,i=this,setTimeout(function(){1===n.length?t.call(i,n[0]):t.apply(i,n),n=void 0},e))}}function j(t,e){if(t&&e)for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}return N.prototype={constructor:N,_onTapStart:function(t){var e=this,n=this.el,i=this.options,r=t.type,s=t.touches&&t.touches[0],o=(s||t).target,a=o,l=i.filter;if(!("mousedown"===r&&0!==t.button||i.disabled)&&(o=A(o,i.draggable,n))){if(d=U(o),"function"==typeof l){if(l.call(this,t,o,this))return L(e,a,"filter",o,n,d),void t.preventDefault()}else if(l&&(l=l.split(",").some(function(t){if(t=A(a,t.trim(),n))return L(e,t,"filter",o,n,d),!0})))return void t.preventDefault();i.handle&&!A(a,i.handle,n)||this._prepareDragStart(t,s,o)}},_prepareDragStart:function(n,i,o){var a,l=this,u=l.el,c=l.options,d=u.ownerDocument;o&&!t&&o.parentNode===u&&(p=n,r=u,e=(t=o).parentNode,s=t.nextSibling,h=c.group,a=function(){l._disableDelayedDrag(),t.draggable=!0,F(t,l.options.chosenClass,!0),l._triggerDragStart(i)},c.ignore.split(",").forEach(function(e){B(t,e.trim(),z)}),O(d,"mouseup",l._onDrop),O(d,"touchend",l._onDrop),O(d,"touchcancel",l._onDrop),c.delay?(O(d,"mouseup",l._disableDelayedDrag),O(d,"touchend",l._disableDelayedDrag),O(d,"touchcancel",l._disableDelayedDrag),O(d,"mousemove",l._disableDelayedDrag),O(d,"touchmove",l._disableDelayedDrag),l._dragStartTimer=setTimeout(a,c.delay)):a())},_disableDelayedDrag:function(){var t=this.el.ownerDocument;clearTimeout(this._dragStartTimer),H(t,"mouseup",this._disableDelayedDrag),H(t,"touchend",this._disableDelayedDrag),H(t,"touchcancel",this._disableDelayedDrag),H(t,"mousemove",this._disableDelayedDrag),H(t,"touchmove",this._disableDelayedDrag)},_triggerDragStart:function(e){e?(p={target:t,clientX:e.clientX,clientY:e.clientY},this._onDragStart(p,"touch")):this.nativeDraggable?(O(t,"dragend",this),O(r,"dragstart",this._onDragStart)):this._onDragStart(p,!0);try{_.selection?_.selection.empty():window.getSelection().removeAllRanges()}catch(t){}},_dragStarted:function(){r&&t&&(F(t,this.options.ghostClass,!0),N.active=this,L(this,r,"start",t,r,d))},_emulateDragOver:function(){if(m){if(this._lastX===m.clientX&&this._lastY===m.clientY)return;this._lastX=m.clientX,this._lastY=m.clientY,E||I(n,"display","none");var t=_.elementFromPoint(m.clientX,m.clientY),e=t,i=" "+this.options.group.name,r=S.length;if(e)do{if(e[x]&&e[x].options.groups.indexOf(i)>-1){for(;r--;)S[r]({clientX:m.clientX,clientY:m.clientY,target:t,rootEl:e});break}t=e}while(e=e.parentNode);E||I(n,"display","")}},_onTouchMove:function(t){if(p){N.active||this._dragStarted(),this._appendGhost();var e=t.touches?t.touches[0]:t,i=e.clientX-p.clientX,r=e.clientY-p.clientY,s=t.touches?"translate3d("+i+"px,"+r+"px,0)":"translate("+i+"px,"+r+"px)";g=!0,m=e,I(n,"webkitTransform",s),I(n,"mozTransform",s),I(n,"msTransform",s),I(n,"transform",s),t.preventDefault()}},_appendGhost:function(){if(!n){var e,i=t.getBoundingClientRect(),s=I(t),o=this.options;F(n=t.cloneNode(!0),o.ghostClass,!1),F(n,o.fallbackClass,!0),I(n,"top",i.top-C(s.marginTop,10)),I(n,"left",i.left-C(s.marginLeft,10)),I(n,"width",i.width),I(n,"height",i.height),I(n,"opacity","0.8"),I(n,"position","fixed"),I(n,"zIndex","100000"),I(n,"pointerEvents","none"),o.fallbackOnBody&&_.body.appendChild(n)||r.appendChild(n),e=n.getBoundingClientRect(),I(n,"width",2*i.width-e.width),I(n,"height",2*i.height-e.height)}},_onDragStart:function(e,n){var s=e.dataTransfer,o=this.options;this._offUpEvents(),"clone"==h.pull&&(I(i=t.cloneNode(!0),"display","none"),r.insertBefore(i,t)),n?("touch"===n?(O(_,"touchmove",this._onTouchMove),O(_,"touchend",this._onDrop),O(_,"touchcancel",this._onDrop)):(O(_,"mousemove",this._onTouchMove),O(_,"mouseup",this._onDrop)),this._loopId=setInterval(this._emulateDragOver,50)):(s&&(s.effectAllowed="move",o.setData&&o.setData.call(this,s,t)),O(_,"drop",this),setTimeout(this._dragStarted,0))},_onDragOver:function(o){var a,d,f,p=this.el,m=this.options,v=m.group,y=v.put,b=h===v,w=m.sort;if(void 0!==o.preventDefault&&(o.preventDefault(),!m.dragoverBubble&&o.stopPropagation()),g=!0,h&&!m.disabled&&(b?w||(f=!r.contains(t)):h.pull&&y&&(h.name===v.name||y.indexOf&&~y.indexOf(h.name)))&&(void 0===o.rootEl||o.rootEl===this.el)){if(D(o,m,this.el),R)return;if(a=A(o.target,m.draggable,p),d=t.getBoundingClientRect(),f)return M(!0),void(i||s?r.insertBefore(t,i||s):w||r.appendChild(t));if(0===p.children.length||p.children[0]===n||p===o.target&&(a=function(t,e){var n=t.lastElementChild,i=n.getBoundingClientRect();return(e.clientY-(i.top+i.height)>5||e.clientX-(i.right+i.width)>5)&&n}(p,o))){if(a){if(a.animated)return;C=a.getBoundingClientRect()}M(b),!1!==W(r,p,t,d,a,C)&&(t.contains(p)||(p.appendChild(t),e=p),this._animate(d,t),a&&this._animate(C,a))}else if(a&&!a.animated&&a!==t&&void 0!==a.parentNode[x]){l!==a&&(l=a,u=I(a),c=I(a.parentNode));var _,C=a.getBoundingClientRect(),k=C.right-C.left,E=C.bottom-C.top,T=/left|right|inline/.test(u.cssFloat+u.display)||"flex"==c.display&&0===c["flex-direction"].indexOf("row"),S=a.offsetWidth>t.offsetWidth,P=a.offsetHeight>t.offsetHeight,N=(T?(o.clientX-C.left)/k:(o.clientY-C.top)/E)>.5,O=a.nextElementSibling,H=W(r,p,t,d,a,C);if(!1!==H){if(R=!0,setTimeout(V,30),M(b),1===H||-1===H)_=1===H;else if(T){var F=t.offsetTop,B=a.offsetTop;_=F===B?a.previousElementSibling===t&&!S||N&&S:B>F}else _=O!==t&&!P||N&&P;t.contains(p)||(_&&!O?p.appendChild(t):a.parentNode.insertBefore(t,_?O:a)),e=t.parentNode,this._animate(d,t),this._animate(C,a)}}}},_animate:function(t,e){var n=this.options.animation;if(n){var i=e.getBoundingClientRect();I(e,"transition","none"),I(e,"transform","translate3d("+(t.left-i.left)+"px,"+(t.top-i.top)+"px,0)"),e.offsetWidth,I(e,"transition","all "+n+"ms"),I(e,"transform","translate3d(0,0,0)"),clearTimeout(e.animated),e.animated=setTimeout(function(){I(e,"transition",""),I(e,"transform",""),e.animated=!1},n)}},_offUpEvents:function(){var t=this.el.ownerDocument;H(_,"touchmove",this._onTouchMove),H(t,"mouseup",this._onDrop),H(t,"touchend",this._onDrop),H(t,"touchcancel",this._onDrop)},_onDrop:function(c){var v=this.el,b=this.options;clearInterval(this._loopId),clearInterval(y.pid),clearTimeout(this._dragStartTimer),H(_,"mousemove",this._onTouchMove),this.nativeDraggable&&(H(_,"drop",this),H(v,"dragstart",this._onDragStart)),this._offUpEvents(),c&&(g&&(c.preventDefault(),!b.dropBubble&&c.stopPropagation()),n&&n.parentNode.removeChild(n),t&&(this.nativeDraggable&&H(t,"dragend",this),z(t),F(t,this.options.ghostClass,!1),F(t,this.options.chosenClass,!1),r!==e?(f=U(t))>=0&&(L(null,e,"sort",t,r,d,f),L(this,r,"sort",t,r,d,f),L(null,e,"add",t,r,d,f),L(this,r,"remove",t,r,d,f)):(i&&i.parentNode.removeChild(i),t.nextSibling!==s&&(f=U(t))>=0&&(L(this,r,"update",t,r,d,f),L(this,r,"sort",t,r,d,f))),N.active&&(null!==f&&-1!==f||(f=d),L(this,r,"end",t,r,d,f),this.save())),r=t=e=n=s=i=o=a=p=m=g=f=l=u=h=N.active=null)},handleEvent:function(e){var n=e.type;"dragover"===n||"dragenter"===n?t&&(this._onDragOver(e),function(t){t.dataTransfer&&(t.dataTransfer.dropEffect="move");t.preventDefault()}(e)):"drop"!==n&&"dragend"!==n||this._onDrop(e)},toArray:function(){for(var t,e=[],n=this.el.children,i=0,r=n.length,s=this.options;i<r;i++)A(t=n[i],s.draggable,this.el)&&e.push(t.getAttribute(s.dataIdAttr)||$(t));return e},sort:function(t){var e={},n=this.el;this.toArray().forEach(function(t,i){var r=n.children[i];A(r,this.options.draggable,n)&&(e[t]=r)},this),t.forEach(function(t){e[t]&&(n.removeChild(e[t]),n.appendChild(e[t]))})},save:function(){var t=this.options.store;t&&t.set(this)},closest:function(t,e){return A(t,e||this.options.draggable,this.el)},option:function(t,e){var n=this.options;if(void 0===e)return n[t];n[t]=e,"group"===t&&P(n)},destroy:function(){var t=this.el;t[x]=null,H(t,"mousedown",this._onTapStart),H(t,"touchstart",this._onTapStart),this.nativeDraggable&&(H(t,"dragover",this),H(t,"dragenter",this)),Array.prototype.forEach.call(t.querySelectorAll("[draggable]"),function(t){t.removeAttribute("draggable")}),S.splice(S.indexOf(this._onDragOver),1),this._onDrop(),this.el=t=null}},N.utils={on:O,off:H,css:I,find:B,is:function(t,e){return!!A(t,e,t)},extend:j,throttle:q,closest:A,toggleClass:F,index:U},N.create=function(t,e){return new N(t,e)},N.version="1.4.2",N})},6:function(t,e,n){(function(e,i){var r,s=Array.prototype.slice,o=function(){return function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var n=[],i=!0,r=!1,s=void 0;try{for(var o,a=t[Symbol.iterator]();!(i=(o=a.next()).done)&&(n.push(o.value),!e||n.length!==e);i=!0);}catch(t){r=!0,s=t}finally{try{!i&&a.return&&a.return()}finally{if(r)throw s}}return n}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),a=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t};function l(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}r=function(t){"use strict";var n=1,r={},u={attr:function(t,e,n){var i,r,s,o=new RegExp("^"+e,"i");if(void 0===n)n={};else for(i in n)n.hasOwnProperty(i)&&delete n[i];if(!t)return n;for(i=(s=t.attributes).length;i--;)(r=s[i])&&r.specified&&o.test(r.name)&&(n[this.camelize(r.name.slice(e.length))]=this.deserializeValue(r.value));return n},checkAttr:function(t,e,n){return t.hasAttribute(e+n)},setAttr:function(t,e,n,i){t.setAttribute(this.dasherize(e+n),String(i))},getType:function(t){return t.getAttribute("type")||"text"},generateID:function(){return""+n++},deserializeValue:function(t){var e;try{return t?"true"==t||"false"!=t&&("null"==t?null:isNaN(e=Number(t))?/^[\[\{]/.test(t)?JSON.parse(t):t:e):t}catch(e){return t}},camelize:function(t){return t.replace(/-+(.)?/g,function(t,e){return e?e.toUpperCase():""})},dasherize:function(t){return t.replace(/::/g,"/").replace(/([A-Z]+)([A-Z][a-z])/g,"$1_$2").replace(/([a-z\d])([A-Z])/g,"$1_$2").replace(/_/g,"-").toLowerCase()},warn:function(){var t;window.console&&"function"==typeof window.console.warn&&(t=window.console).warn.apply(t,arguments)},warnOnce:function(t){r[t]||(r[t]=!0,this.warn.apply(this,arguments))},_resetWarnings:function(){r={}},trimString:function(t){return t.replace(/^\s+|\s+$/g,"")},parse:{date:function(t){var e=t.match(/^(\d{4,})-(\d\d)-(\d\d)$/);if(!e)return null;var n=e.map(function(t){return parseInt(t,10)}),i=o(n,4),r=(i[0],i[1]),s=i[2],a=i[3],l=new Date(r,s-1,a);return l.getFullYear()!==r||l.getMonth()+1!==s||l.getDate()!==a?null:l},string:function(t){return t},integer:function(t){return isNaN(t)?null:parseInt(t,10)},number:function(t){if(isNaN(t))throw null;return parseFloat(t)},boolean:function(t){return!/^\s*false\s*$/i.test(t)},object:function(t){return u.deserializeValue(t)},regexp:function(t){var e="";return/^\/.*\/(?:[gimy]*)$/.test(t)?(e=t.replace(/.*\/([gimy]*)$/,"$1"),t=t.replace(new RegExp("^/(.*?)/"+e+"$"),"$1")):t="^"+t+"$",new RegExp(t,e)}},parseRequirement:function(t,e){var n=this.parse[t||"string"];if(!n)throw'Unknown requirement specification: "'+t+'"';var i=n(e);if(null===i)throw"Requirement is not a "+t+': "'+e+'"';return i},namespaceEvents:function(e,n){return(e=this.trimString(e||"").split(/\s+/))[0]?t.map(e,function(t){return t+"."+n}).join(" "):""},difference:function(e,n){var i=[];return t.each(e,function(t,e){-1==n.indexOf(e)&&i.push(e)}),i},all:function(e){return t.when.apply(t,l(e).concat([42,42]))},objectCreate:Object.create||function(){var t=function(){};return function(e){if(arguments.length>1)throw Error("Second argument not supported");if("object"!=typeof e)throw TypeError("Argument must be an object");t.prototype=e;var n=new t;return t.prototype=null,n}}(),_SubmitSelector:'input[type="submit"], button:submit'},c={namespace:"data-parsley-",inputs:"input, textarea, select",excluded:"input[type=button], input[type=submit], input[type=reset], input[type=hidden]",priorityEnabled:!0,multiple:null,group:null,uiEnabled:!0,validationThreshold:3,focus:"first",trigger:!1,triggerAfterFailure:"input",errorClass:"parsley-error",successClass:"parsley-success",classHandler:function(t){},errorsContainer:function(t){},errorsWrapper:'<ul class="parsley-errors-list"></ul>',errorTemplate:"<li></li>"},d=function(){this.__id__=u.generateID()};d.prototype={asyncSupport:!0,_pipeAccordingToValidationResult:function(){var e=this,n=function(){var n=t.Deferred();return!0!==e.validationResult&&n.reject(),n.resolve().promise()};return[n,n]},actualizeOptions:function(){return u.attr(this.element,this.options.namespace,this.domOptions),this.parent&&this.parent.actualizeOptions&&this.parent.actualizeOptions(),this},_resetOptions:function(t){for(var e in this.domOptions=u.objectCreate(this.parent.options),this.options=u.objectCreate(this.domOptions),t)t.hasOwnProperty(e)&&(this.options[e]=t[e]);this.actualizeOptions()},_listeners:null,on:function(t,e){return this._listeners=this._listeners||{},(this._listeners[t]=this._listeners[t]||[]).push(e),this},subscribe:function(e,n){t.listenTo(this,e.toLowerCase(),n)},off:function(t,e){var n=this._listeners&&this._listeners[t];if(n)if(e)for(var i=n.length;i--;)n[i]===e&&n.splice(i,1);else delete this._listeners[t];return this},unsubscribe:function(e,n){t.unsubscribeTo(this,e.toLowerCase())},trigger:function(t,e,n){e=e||this;var i,r=this._listeners&&this._listeners[t];if(r)for(var s=r.length;s--;)if(!1===(i=r[s].call(e,e,n)))return i;return!this.parent||this.parent.trigger(t,e,n)},asyncIsValid:function(t,e){return u.warnOnce("asyncIsValid is deprecated; please use whenValid instead"),this.whenValid({group:t,force:e})},_findRelated:function(){return this.options.multiple?t(this.parent.element.querySelectorAll("["+this.options.namespace+'multiple="'+this.options.multiple+'"]')):this.$element}};var f=function(e){t.extend(!0,this,e)};f.prototype={validate:function(t,e){if(this.fn)return arguments.length>3&&(e=[].slice.call(arguments,1,-1)),this.fn(t,e);if(Array.isArray(t)){if(!this.validateMultiple)throw"Validator `"+this.name+"` does not handle multiple values";return this.validateMultiple.apply(this,arguments)}var n=arguments[arguments.length-1];if(this.validateDate&&n._isDateInput())return arguments[0]=u.parse.date(arguments[0]),null!==arguments[0]&&this.validateDate.apply(this,arguments);if(this.validateNumber)return!isNaN(t)&&(arguments[0]=parseFloat(arguments[0]),this.validateNumber.apply(this,arguments));if(this.validateString)return this.validateString.apply(this,arguments);throw"Validator `"+this.name+"` only handles multiple values"},parseRequirements:function(e,n){if("string"!=typeof e)return Array.isArray(e)?e:[e];var i=this.requirementType;if(Array.isArray(i)){for(var r=function(t,e){var n=t.match(/^\s*\[(.*)\]\s*$/);if(!n)throw'Requirement is not an array: "'+t+'"';var i=n[1].split(",").map(u.trimString);if(i.length!==e)throw"Requirement has "+i.length+" values when "+e+" are needed";return i}(e,i.length),s=0;s<r.length;s++)r[s]=u.parseRequirement(i[s],r[s]);return r}return t.isPlainObject(i)?function(t,e,n){var i=null,r={};for(var s in t)if(s){var o=n(s);"string"==typeof o&&(o=u.parseRequirement(t[s],o)),r[s]=o}else i=u.parseRequirement(t[s],e);return[i,r]}(i,e,n):[u.parseRequirement(i,e)]},requirementType:"string",priority:2};var h=function(t,e){this.__class__="ValidatorRegistry",this.locale="en",this.init(t||{},e||{})},p={email:/^((([a-zA-Z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-zA-Z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-zA-Z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-zA-Z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-zA-Z]|\d|-|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-zA-Z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-zA-Z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-zA-Z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-zA-Z]|\d|-|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-zA-Z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))$/,number:/^-?(\d*\.)?\d+(e[-+]?\d+)?$/i,integer:/^-?\d+$/,digits:/^\d+$/,alphanum:/^\w+$/i,date:{test:function(t){return null!==u.parse.date(t)}},url:new RegExp("^(?:(?:https?|ftp)://)?(?:\\S+(?::\\S*)?@)?(?:(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}(?:\\.(?:[1-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))|(?:(?:[a-zA-Z\\u00a1-\\uffff0-9]-*)*[a-zA-Z\\u00a1-\\uffff0-9]+)(?:\\.(?:[a-zA-Z\\u00a1-\\uffff0-9]-*)*[a-zA-Z\\u00a1-\\uffff0-9]+)*(?:\\.(?:[a-zA-Z\\u00a1-\\uffff]{2,})))(?::\\d{2,5})?(?:/\\S*)?$")};p.range=p.number;var m=function(t){var e=(""+t).match(/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/);return e?Math.max(0,(e[1]?e[1].length:0)-(e[2]?+e[2]:0)):0},g=function(t,e){return function(n){for(var i=arguments.length,r=Array(i>1?i-1:0),s=1;s<i;s++)r[s-1]=arguments[s];return r.pop(),e.apply(void 0,[n].concat(l(function(t,e){return e.map(u.parse[t])}(t,r))))}},v=function(t){return{validateDate:g("date",t),validateNumber:g("number",t),requirementType:t.length<=2?"string":["string","string"],priority:30}};h.prototype={init:function(t,e){for(var n in this.catalog=e,this.validators=a({},this.validators),t)this.addValidator(n,t[n].fn,t[n].priority);window.Parsley.trigger("parsley:validator:init")},setLocale:function(t){if(void 0===this.catalog[t])throw new Error(t+" is not available in the catalog");return this.locale=t,this},addCatalog:function(t,e,n){return"object"==typeof e&&(this.catalog[t]=e),!0===n?this.setLocale(t):this},addMessage:function(t,e,n){return void 0===this.catalog[t]&&(this.catalog[t]={}),this.catalog[t][e]=n,this},addMessages:function(t,e){for(var n in e)this.addMessage(t,n,e[n]);return this},addValidator:function(t,e,n){if(this.validators[t])u.warn('Validator "'+t+'" is already defined.');else if(c.hasOwnProperty(t))return void u.warn('"'+t+'" is a restricted keyword and is not a valid validator name.');return this._setValidator.apply(this,arguments)},hasValidator:function(t){return!!this.validators[t]},updateValidator:function(t,e,n){return this.validators[t]?this._setValidator.apply(this,arguments):(u.warn('Validator "'+t+'" is not already defined.'),this.addValidator.apply(this,arguments))},removeValidator:function(t){return this.validators[t]||u.warn('Validator "'+t+'" is not defined.'),delete this.validators[t],this},_setValidator:function(t,e,n){for(var i in"object"!=typeof e&&(e={fn:e,priority:n}),e.validate||(e=new f(e)),this.validators[t]=e,e.messages||{})this.addMessage(i,t,e.messages[i]);return this},getErrorMessage:function(t){var e;"type"===t.name?e=(this.catalog[this.locale][t.name]||{})[t.requirements]:e=this.formatMessage(this.catalog[this.locale][t.name],t.requirements);return e||this.catalog[this.locale].defaultMessage||this.catalog.en.defaultMessage},formatMessage:function(t,e){if("object"==typeof e){for(var n in e)t=this.formatMessage(t,e[n]);return t}return"string"==typeof t?t.replace(/%s/i,e):""},validators:{notblank:{validateString:function(t){return/\S/.test(t)},priority:2},required:{validateMultiple:function(t){return t.length>0},validateString:function(t){return/\S/.test(t)},priority:512},type:{validateString:function(t,e){var n=arguments.length<=2||void 0===arguments[2]?{}:arguments[2],i=n.step,r=void 0===i?"any":i,s=n.base,o=void 0===s?0:s,a=p[e];if(!a)throw new Error("validator type `"+e+"` is not supported");if(!a.test(t))return!1;if("number"===e&&!/^any$/i.test(r||"")){var l=Number(t),u=Math.max(m(r),m(o));if(m(l)>u)return!1;var c=function(t){return Math.round(t*Math.pow(10,u))};if((c(l)-c(o))%c(r)!=0)return!1}return!0},requirementType:{"":"string",step:"string",base:"number"},priority:256},pattern:{validateString:function(t,e){return e.test(t)},requirementType:"regexp",priority:64},minlength:{validateString:function(t,e){return t.length>=e},requirementType:"integer",priority:30},maxlength:{validateString:function(t,e){return t.length<=e},requirementType:"integer",priority:30},length:{validateString:function(t,e,n){return t.length>=e&&t.length<=n},requirementType:["integer","integer"],priority:30},mincheck:{validateMultiple:function(t,e){return t.length>=e},requirementType:"integer",priority:30},maxcheck:{validateMultiple:function(t,e){return t.length<=e},requirementType:"integer",priority:30},check:{validateMultiple:function(t,e,n){return t.length>=e&&t.length<=n},requirementType:["integer","integer"],priority:30},min:v(function(t,e){return t>=e}),max:v(function(t,e){return t<=e}),range:v(function(t,e,n){return t>=e&&t<=n}),equalto:{validateString:function(e,n){var i=t(n);return i.length?e===i.val():e===n},priority:256}}};var y={};y.Form={_actualizeTriggers:function(){var t=this;this.$element.on("submit.Parsley",function(e){t.onSubmitValidate(e)}),this.$element.on("click.Parsley",u._SubmitSelector,function(e){t.onSubmitButton(e)}),!1!==this.options.uiEnabled&&this.element.setAttribute("novalidate","")},focus:function(){if(this._focusedField=null,!0===this.validationResult||"none"===this.options.focus)return null;for(var t=0;t<this.fields.length;t++){var e=this.fields[t];if(!0!==e.validationResult&&e.validationResult.length>0&&void 0===e.options.noFocus&&(this._focusedField=e.$element,"first"===this.options.focus))break}return null===this._focusedField?null:this._focusedField.focus()},_destroyUI:function(){this.$element.off(".Parsley")}},y.Field={_reflowUI:function(){if(this._buildUI(),this._ui){var t=function t(e,n,i){for(var r=[],s=[],o=0;o<e.length;o++){for(var a=!1,l=0;l<n.length;l++)if(e[o].assert.name===n[l].assert.name){a=!0;break}a?s.push(e[o]):r.push(e[o])}return{kept:s,added:r,removed:i?[]:t(n,e,!0).added}}(this.validationResult,this._ui.lastValidationResult);this._ui.lastValidationResult=this.validationResult,this._manageStatusClass(),this._manageErrorsMessages(t),this._actualizeTriggers(),!t.kept.length&&!t.added.length||this._failedOnce||(this._failedOnce=!0,this._actualizeTriggers())}},getErrorsMessages:function(){if(!0===this.validationResult)return[];for(var t=[],e=0;e<this.validationResult.length;e++)t.push(this.validationResult[e].errorMessage||this._getErrorMessage(this.validationResult[e].assert));return t},addError:function(t){var e=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],n=e.message,i=e.assert,r=e.updateClass,s=void 0===r||r;this._buildUI(),this._addError(t,{message:n,assert:i}),s&&this._errorClass()},updateError:function(t){var e=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],n=e.message,i=e.assert,r=e.updateClass,s=void 0===r||r;this._buildUI(),this._updateError(t,{message:n,assert:i}),s&&this._errorClass()},removeError:function(t){var e=(arguments.length<=1||void 0===arguments[1]?{}:arguments[1]).updateClass,n=void 0===e||e;this._buildUI(),this._removeError(t),n&&this._manageStatusClass()},_manageStatusClass:function(){this.hasConstraints()&&this.needsValidation()&&!0===this.validationResult?this._successClass():this.validationResult.length>0?this._errorClass():this._resetClass()},_manageErrorsMessages:function(e){if(void 0===this.options.errorsMessagesDisabled){if(void 0!==this.options.errorMessage)return e.added.length||e.kept.length?(this._insertErrorWrapper(),0===this._ui.$errorsWrapper.find(".parsley-custom-error-message").length&&this._ui.$errorsWrapper.append(t(this.options.errorTemplate).addClass("parsley-custom-error-message")),this._ui.$errorsWrapper.addClass("filled").find(".parsley-custom-error-message").html(this.options.errorMessage)):this._ui.$errorsWrapper.removeClass("filled").find(".parsley-custom-error-message").remove();for(var n=0;n<e.removed.length;n++)this._removeError(e.removed[n].assert.name);for(n=0;n<e.added.length;n++)this._addError(e.added[n].assert.name,{message:e.added[n].errorMessage,assert:e.added[n].assert});for(n=0;n<e.kept.length;n++)this._updateError(e.kept[n].assert.name,{message:e.kept[n].errorMessage,assert:e.kept[n].assert})}},_addError:function(e,n){var i=n.message,r=n.assert;this._insertErrorWrapper(),this._ui.$errorClassHandler.attr("aria-describedby",this._ui.errorsWrapperId),this._ui.$errorsWrapper.addClass("filled").append(t(this.options.errorTemplate).addClass("parsley-"+e).html(i||this._getErrorMessage(r)))},_updateError:function(t,e){var n=e.message,i=e.assert;this._ui.$errorsWrapper.addClass("filled").find(".parsley-"+t).html(n||this._getErrorMessage(i))},_removeError:function(t){this._ui.$errorClassHandler.removeAttr("aria-describedby"),this._ui.$errorsWrapper.removeClass("filled").find(".parsley-"+t).remove()},_getErrorMessage:function(t){var e=t.name+"Message";return void 0!==this.options[e]?window.Parsley.formatMessage(this.options[e],t.requirements):window.Parsley.getErrorMessage(t)},_buildUI:function(){if(!this._ui&&!1!==this.options.uiEnabled){var e={};this.element.setAttribute(this.options.namespace+"id",this.__id__),e.$errorClassHandler=this._manageClassHandler(),e.errorsWrapperId="parsley-id-"+(this.options.multiple?"multiple-"+this.options.multiple:this.__id__),e.$errorsWrapper=t(this.options.errorsWrapper).attr("id",e.errorsWrapperId),e.lastValidationResult=[],e.validationInformationVisible=!1,this._ui=e}},_manageClassHandler:function(){if("string"==typeof this.options.classHandler&&t(this.options.classHandler).length)return t(this.options.classHandler);var n=this.options.classHandler;if("string"==typeof this.options.classHandler&&"function"==typeof window[this.options.classHandler]&&(n=window[this.options.classHandler]),"function"==typeof n){var i=n.call(this,this);if(void 0!==i&&i.length)return i}else{if("object"==typeof n&&n instanceof e&&n.length)return n;n&&u.warn("The class handler `"+n+"` does not exist in DOM nor as a global JS function")}return this._inputHolder()},_inputHolder:function(){return this.options.multiple&&"SELECT"!==this.element.nodeName?this.$element.parent():this.$element},_insertErrorWrapper:function(){var e=this.options.errorsContainer;if(0!==this._ui.$errorsWrapper.parent().length)return this._ui.$errorsWrapper.parent();if("string"==typeof e){if(t(e).length)return t(e).append(this._ui.$errorsWrapper);"function"==typeof window[e]?e=window[e]:u.warn("The errors container `"+e+"` does not exist in DOM nor as a global JS function")}return"function"==typeof e&&(e=e.call(this,this)),"object"==typeof e&&e.length?e.append(this._ui.$errorsWrapper):this._inputHolder().after(this._ui.$errorsWrapper)},_actualizeTriggers:function(){var t,e=this,n=this._findRelated();n.off(".Parsley"),this._failedOnce?n.on(u.namespaceEvents(this.options.triggerAfterFailure,"Parsley"),function(){e._validateIfNeeded()}):(t=u.namespaceEvents(this.options.trigger,"Parsley"))&&n.on(t,function(t){e._validateIfNeeded(t)})},_validateIfNeeded:function(t){var e=this;t&&/key|input/.test(t.type)&&(!this._ui||!this._ui.validationInformationVisible)&&this.getValue().length<=this.options.validationThreshold||(this.options.debounce?(window.clearTimeout(this._debounced),this._debounced=window.setTimeout(function(){return e.validate()},this.options.debounce)):this.validate())},_resetUI:function(){this._failedOnce=!1,this._actualizeTriggers(),void 0!==this._ui&&(this._ui.$errorsWrapper.removeClass("filled").children().remove(),this._resetClass(),this._ui.lastValidationResult=[],this._ui.validationInformationVisible=!1)},_destroyUI:function(){this._resetUI(),void 0!==this._ui&&this._ui.$errorsWrapper.remove(),delete this._ui},_successClass:function(){this._ui.validationInformationVisible=!0,this._ui.$errorClassHandler.removeClass(this.options.errorClass).addClass(this.options.successClass)},_errorClass:function(){this._ui.validationInformationVisible=!0,this._ui.$errorClassHandler.removeClass(this.options.successClass).addClass(this.options.errorClass)},_resetClass:function(){this._ui.$errorClassHandler.removeClass(this.options.successClass).removeClass(this.options.errorClass)}};var b=function(e,n,i){this.__class__="Form",this.element=e,this.$element=t(e),this.domOptions=n,this.options=i,this.parent=window.Parsley,this.fields=[],this.validationResult=null},x={pending:null,resolved:!0,rejected:!1};b.prototype={onSubmitValidate:function(t){var e=this;if(!0!==t.parsley){var n=this._submitSource||this.$element.find(u._SubmitSelector)[0];if(this._submitSource=null,this.$element.find(".parsley-synthetic-submit-button").prop("disabled",!0),!n||null===n.getAttribute("formnovalidate")){window.Parsley._remoteCache={};var i=this.whenValidate({event:t});"resolved"===i.state()&&!1!==this._trigger("submit")||(t.stopImmediatePropagation(),t.preventDefault(),"pending"===i.state()&&i.done(function(){e._submit(n)}))}}},onSubmitButton:function(t){this._submitSource=t.currentTarget},_submit:function(e){if(!1!==this._trigger("submit")){if(e){var n=this.$element.find(".parsley-synthetic-submit-button").prop("disabled",!1);0===n.length&&(n=t('<input class="parsley-synthetic-submit-button" type="hidden">').appendTo(this.$element)),n.attr({name:e.getAttribute("name"),value:e.getAttribute("value")})}this.$element.trigger(a(t.Event("submit"),{parsley:!0}))}},validate:function(e){if(arguments.length>=1&&!t.isPlainObject(e)){u.warnOnce("Calling validate on a parsley form without passing arguments as an object is deprecated.");var n=s.call(arguments);e={group:n[0],force:n[1],event:n[2]}}return x[this.whenValidate(e).state()]},whenValidate:function(){var e,n=this,i=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],r=i.group,s=i.force,o=i.event;this.submitEvent=o,o&&(this.submitEvent=a({},o,{preventDefault:function(){u.warnOnce("Using `this.submitEvent.preventDefault()` is deprecated; instead, call `this.validationResult = false`"),n.validationResult=!1}})),this.validationResult=!0,this._trigger("validate"),this._refreshFields();var c=this._withoutReactualizingFormOptions(function(){return t.map(n.fields,function(t){return t.whenValidate({force:s,group:r})})});return(e=u.all(c).done(function(){n._trigger("success")}).fail(function(){n.validationResult=!1,n.focus(),n._trigger("error")}).always(function(){n._trigger("validated")})).pipe.apply(e,l(this._pipeAccordingToValidationResult()))},isValid:function(e){if(arguments.length>=1&&!t.isPlainObject(e)){u.warnOnce("Calling isValid on a parsley form without passing arguments as an object is deprecated.");var n=s.call(arguments);e={group:n[0],force:n[1]}}return x[this.whenValid(e).state()]},whenValid:function(){var e=this,n=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],i=n.group,r=n.force;this._refreshFields();var s=this._withoutReactualizingFormOptions(function(){return t.map(e.fields,function(t){return t.whenValid({group:i,force:r})})});return u.all(s)},refresh:function(){return this._refreshFields(),this},reset:function(){for(var t=0;t<this.fields.length;t++)this.fields[t].reset();this._trigger("reset")},destroy:function(){this._destroyUI();for(var t=0;t<this.fields.length;t++)this.fields[t].destroy();this.$element.removeData("Parsley"),this._trigger("destroy")},_refreshFields:function(){return this.actualizeOptions()._bindFields()},_bindFields:function(){var e=this,n=this.fields;return this.fields=[],this.fieldsMappedById={},this._withoutReactualizingFormOptions(function(){e.$element.find(e.options.inputs).not(e.options.excluded).each(function(t,n){var i=new window.Parsley.Factory(n,{},e);if(("Field"===i.__class__||"FieldMultiple"===i.__class__)&&!0!==i.options.excluded){var r=i.__class__+"-"+i.__id__;void 0===e.fieldsMappedById[r]&&(e.fieldsMappedById[r]=i,e.fields.push(i))}}),t.each(u.difference(n,e.fields),function(t,e){e.reset()})}),this},_withoutReactualizingFormOptions:function(t){var e=this.actualizeOptions;this.actualizeOptions=function(){return this};var n=t();return this.actualizeOptions=e,n},_trigger:function(t){return this.trigger("form:"+t)}};var w=function(t,e,n,i,r){var s=window.Parsley._validatorRegistry.validators[e],o=new f(s);i=i||t.options[e+"Priority"]||o.priority,a(this,{validator:o,name:e,requirements:n,priority:i,isDomConstraint:r=!0===r}),this._parseRequirements(t.options)};w.prototype={validate:function(t,e){var n;return(n=this.validator).validate.apply(n,[t].concat(l(this.requirementList),[e]))},_parseRequirements:function(t){var e=this;this.requirementList=this.validator.parseRequirements(this.requirements,function(n){return t[e.name+(i=n,i[0].toUpperCase()+i.slice(1))];var i})}};var _=function(e,n,i,r){this.__class__="Field",this.element=e,this.$element=t(e),void 0!==r&&(this.parent=r),this.options=i,this.domOptions=n,this.constraints=[],this.constraintsByName={},this.validationResult=!0,this._bindConstraints()},C={pending:null,resolved:!0,rejected:!1};_.prototype={validate:function(e){arguments.length>=1&&!t.isPlainObject(e)&&(u.warnOnce("Calling validate on a parsley field without passing arguments as an object is deprecated."),e={options:e});var n=this.whenValidate(e);if(!n)return!0;switch(n.state()){case"pending":return null;case"resolved":return!0;case"rejected":return this.validationResult}},whenValidate:function(){var t,e=this,n=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],i=n.force,r=n.group;if(this.refresh(),!r||this._isInGroup(r))return this.value=this.getValue(),this._trigger("validate"),(t=this.whenValid({force:i,value:this.value,_refreshed:!0}).always(function(){e._reflowUI()}).done(function(){e._trigger("success")}).fail(function(){e._trigger("error")}).always(function(){e._trigger("validated")})).pipe.apply(t,l(this._pipeAccordingToValidationResult()))},hasConstraints:function(){return 0!==this.constraints.length},needsValidation:function(t){return void 0===t&&(t=this.getValue()),!(!t.length&&!this._isRequired()&&void 0===this.options.validateIfEmpty)},_isInGroup:function(e){return Array.isArray(this.options.group)?-1!==t.inArray(e,this.options.group):this.options.group===e},isValid:function(e){if(arguments.length>=1&&!t.isPlainObject(e)){u.warnOnce("Calling isValid on a parsley field without passing arguments as an object is deprecated.");var n=s.call(arguments);e={force:n[0],value:n[1]}}var i=this.whenValid(e);return!i||C[i.state()]},whenValid:function(){var e=this,n=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],i=n.force,r=void 0!==i&&i,s=n.value,o=n.group;if(n._refreshed||this.refresh(),!o||this._isInGroup(o)){if(this.validationResult=!0,!this.hasConstraints())return t.when();if(void 0!==s&&null!==s||(s=this.getValue()),!this.needsValidation(s)&&!0!==r)return t.when();var a=this._getGroupedConstraints(),l=[];return t.each(a,function(n,i){var r=u.all(t.map(i,function(t){return e._validateConstraint(s,t)}));if(l.push(r),"rejected"===r.state())return!1}),u.all(l)}},_validateConstraint:function(e,n){var i=this,r=n.validate(e,this);return!1===r&&(r=t.Deferred().reject()),u.all([r]).fail(function(t){i.validationResult instanceof Array||(i.validationResult=[]),i.validationResult.push({assert:n,errorMessage:"string"==typeof t&&t})})},getValue:function(){var t;return void 0===(t="function"==typeof this.options.value?this.options.value(this):void 0!==this.options.value?this.options.value:this.$element.val())||null===t?"":this._handleWhitespace(t)},reset:function(){return this._resetUI(),this._trigger("reset")},destroy:function(){this._destroyUI(),this.$element.removeData("Parsley"),this.$element.removeData("FieldMultiple"),this._trigger("destroy")},refresh:function(){return this._refreshConstraints(),this},_refreshConstraints:function(){return this.actualizeOptions()._bindConstraints()},refreshConstraints:function(){return u.warnOnce("Parsley's refreshConstraints is deprecated. Please use refresh"),this.refresh()},addConstraint:function(t,e,n,i){if(window.Parsley._validatorRegistry.validators[t]){var r=new w(this,t,e,n,i);"undefined"!==this.constraintsByName[r.name]&&this.removeConstraint(r.name),this.constraints.push(r),this.constraintsByName[r.name]=r}return this},removeConstraint:function(t){for(var e=0;e<this.constraints.length;e++)if(t===this.constraints[e].name){this.constraints.splice(e,1);break}return delete this.constraintsByName[t],this},updateConstraint:function(t,e,n){return this.removeConstraint(t).addConstraint(t,e,n)},_bindConstraints:function(){for(var t=[],e={},n=0;n<this.constraints.length;n++)!1===this.constraints[n].isDomConstraint&&(t.push(this.constraints[n]),e[this.constraints[n].name]=this.constraints[n]);for(var i in this.constraints=t,this.constraintsByName=e,this.options)this.addConstraint(i,this.options[i],void 0,!0);return this._bindHtml5Constraints()},_bindHtml5Constraints:function(){null!==this.element.getAttribute("required")&&this.addConstraint("required",!0,void 0,!0),null!==this.element.getAttribute("pattern")&&this.addConstraint("pattern",this.element.getAttribute("pattern"),void 0,!0);var t=this.element.getAttribute("min"),e=this.element.getAttribute("max");null!==t&&null!==e?this.addConstraint("range",[t,e],void 0,!0):null!==t?this.addConstraint("min",t,void 0,!0):null!==e&&this.addConstraint("max",e,void 0,!0),null!==this.element.getAttribute("minlength")&&null!==this.element.getAttribute("maxlength")?this.addConstraint("length",[this.element.getAttribute("minlength"),this.element.getAttribute("maxlength")],void 0,!0):null!==this.element.getAttribute("minlength")?this.addConstraint("minlength",this.element.getAttribute("minlength"),void 0,!0):null!==this.element.getAttribute("maxlength")&&this.addConstraint("maxlength",this.element.getAttribute("maxlength"),void 0,!0);var n=u.getType(this.element);return"number"===n?this.addConstraint("type",["number",{step:this.element.getAttribute("step")||"1",base:t||this.element.getAttribute("value")}],void 0,!0):/^(email|url|range|date)$/i.test(n)?this.addConstraint("type",n,void 0,!0):this},_isRequired:function(){return void 0!==this.constraintsByName.required&&!1!==this.constraintsByName.required.requirements},_trigger:function(t){return this.trigger("field:"+t)},_handleWhitespace:function(t){return!0===this.options.trimValue&&u.warnOnce('data-parsley-trim-value="true" is deprecated, please use data-parsley-whitespace="trim"'),"squish"===this.options.whitespace&&(t=t.replace(/\s{2,}/g," ")),"trim"!==this.options.whitespace&&"squish"!==this.options.whitespace&&!0!==this.options.trimValue||(t=u.trimString(t)),t},_isDateInput:function(){var t=this.constraintsByName.type;return t&&"date"===t.requirements},_getGroupedConstraints:function(){if(!1===this.options.priorityEnabled)return[this.constraints];for(var t=[],e={},n=0;n<this.constraints.length;n++){var i=this.constraints[n].priority;e[i]||t.push(e[i]=[]),e[i].push(this.constraints[n])}return t.sort(function(t,e){return e[0].priority-t[0].priority}),t}};var k=_,E=function(){this.__class__="FieldMultiple"};E.prototype={addElement:function(t){return this.$elements.push(t),this},_refreshConstraints:function(){var e;if(this.constraints=[],"SELECT"===this.element.nodeName)return this.actualizeOptions()._bindConstraints(),this;for(var n=0;n<this.$elements.length;n++)if(t("html").has(this.$elements[n]).length){e=this.$elements[n].data("FieldMultiple")._refreshConstraints().constraints;for(var i=0;i<e.length;i++)this.addConstraint(e[i].name,e[i].requirements,e[i].priority,e[i].isDomConstraint)}else this.$elements.splice(n,1);return this},getValue:function(){if("function"==typeof this.options.value)return this.options.value(this);if(void 0!==this.options.value)return this.options.value;if("INPUT"===this.element.nodeName){var e=u.getType(this.element);if("radio"===e)return this._findRelated().filter(":checked").val()||"";if("checkbox"===e){var n=[];return this._findRelated().filter(":checked").each(function(){n.push(t(this).val())}),n}}return"SELECT"===this.element.nodeName&&null===this.$element.val()?[]:this.$element.val()},_init:function(){return this.$elements=[this.$element],this}};var R=function(e,n,i){this.element=e,this.$element=t(e);var r=this.$element.data("Parsley");if(r)return void 0!==i&&r.parent===window.Parsley&&(r.parent=i,r._resetOptions(r.options)),"object"==typeof n&&a(r.options,n),r;if(!this.$element.length)throw new Error("You must bind Parsley on an existing element.");if(void 0!==i&&"Form"!==i.__class__)throw new Error("Parent instance must be a Form instance");return this.parent=i||window.Parsley,this.init(n)};R.prototype={init:function(t){return this.__class__="Parsley",this.__version__="2.8.1",this.__id__=u.generateID(),this._resetOptions(t),"FORM"===this.element.nodeName||u.checkAttr(this.element,this.options.namespace,"validate")&&!this.$element.is(this.options.inputs)?this.bind("parsleyForm"):this.isMultiple()?this.handleMultiple():this.bind("parsleyField")},isMultiple:function(){var t=u.getType(this.element);return"radio"===t||"checkbox"===t||"SELECT"===this.element.nodeName&&null!==this.element.getAttribute("multiple")},handleMultiple:function(){var e,n,i=this;if(this.options.multiple=this.options.multiple||(e=this.element.getAttribute("name"))||this.element.getAttribute("id"),"SELECT"===this.element.nodeName&&null!==this.element.getAttribute("multiple"))return this.options.multiple=this.options.multiple||this.__id__,this.bind("parsleyFieldMultiple");if(!this.options.multiple)return u.warn("To be bound by Parsley, a radio, a checkbox and a multiple select input must have either a name or a multiple option.",this.$element),this;this.options.multiple=this.options.multiple.replace(/(:|\.|\[|\]|\{|\}|\$)/g,""),e&&t('input[name="'+e+'"]').each(function(t,e){var n=u.getType(e);"radio"!==n&&"checkbox"!==n||e.setAttribute(i.options.namespace+"multiple",i.options.multiple)});for(var r=this._findRelated(),s=0;s<r.length;s++)if(void 0!==(n=t(r.get(s)).data("Parsley"))){this.$element.data("FieldMultiple")||n.addElement(this.$element);break}return this.bind("parsleyField",!0),n||this.bind("parsleyFieldMultiple")},bind:function(e,n){var i;switch(e){case"parsleyForm":i=t.extend(new b(this.element,this.domOptions,this.options),new d,window.ParsleyExtend)._bindFields();break;case"parsleyField":i=t.extend(new k(this.element,this.domOptions,this.options,this.parent),new d,window.ParsleyExtend);break;case"parsleyFieldMultiple":i=t.extend(new k(this.element,this.domOptions,this.options,this.parent),new E,new d,window.ParsleyExtend)._init();break;default:throw new Error(e+"is not a supported Parsley type")}return this.options.multiple&&u.setAttr(this.element,this.options.namespace,"multiple",this.options.multiple),void 0!==n?(this.$element.data("FieldMultiple",i),i):(this.$element.data("Parsley",i),i._actualizeTriggers(),i._trigger("init"),i)}};var T=t.fn.jquery.split(".");if(parseInt(T[0])<=1&&parseInt(T[1])<8)throw"The loaded version of jQuery is too old. Please upgrade to 1.8.x or better.";T.forEach||u.warn("Parsley requires ES5 to run properly. Please include https://github.com/es-shims/es5-shim");var S=a(new d,{element:document,$element:t(document),actualizeOptions:null,_resetOptions:null,Factory:R,version:"2.8.1"});a(k.prototype,y.Field,d.prototype),a(b.prototype,y.Form,d.prototype),a(R.prototype,d.prototype),t.fn.parsley=t.fn.psly=function(e){if(this.length>1){var n=[];return this.each(function(){n.push(t(this).parsley(e))}),n}if(0!=this.length)return new R(this[0],e)},void 0===window.ParsleyExtend&&(window.ParsleyExtend={}),S.options=a(u.objectCreate(c),window.ParsleyConfig),window.ParsleyConfig=S.options,window.Parsley=window.psly=S,S.Utils=u,window.ParsleyUtils={},t.each(u,function(t,e){"function"==typeof e&&(window.ParsleyUtils[t]=function(){return u.warnOnce("Accessing `window.ParsleyUtils` is deprecated. Use `window.Parsley.Utils` instead."),u[t].apply(u,arguments)})});var D=window.Parsley._validatorRegistry=new h(window.ParsleyConfig.validators,window.ParsleyConfig.i18n);window.ParsleyValidator={},t.each("setLocale addCatalog addMessage addMessages getErrorMessage formatMessage addValidator updateValidator removeValidator hasValidator".split(" "),function(t,e){window.Parsley[e]=function(){return D[e].apply(D,arguments)},window.ParsleyValidator[e]=function(){var t;return u.warnOnce("Accessing the method '"+e+"' through Validator is deprecated. Simply call 'window.Parsley."+e+"(...)'"),(t=window.Parsley)[e].apply(t,arguments)}}),window.Parsley.UI=y,window.ParsleyUI={removeError:function(t,e,n){var i=!0!==n;return u.warnOnce("Accessing UI is deprecated. Call 'removeError' on the instance directly. Please comment in issue 1073 as to your need to call this method."),t.removeError(e,{updateClass:i})},getErrorsMessages:function(t){return u.warnOnce("Accessing UI is deprecated. Call 'getErrorsMessages' on the instance directly."),t.getErrorsMessages()}},t.each("addError updateError".split(" "),function(t,e){window.ParsleyUI[e]=function(t,n,i,r,s){var o=!0!==s;return u.warnOnce("Accessing UI is deprecated. Call '"+e+"' on the instance directly. Please comment in issue 1073 as to your need to call this method."),t[e](n,{message:i,assert:r,updateClass:o})}}),!1!==window.ParsleyConfig.autoBind&&t(function(){t("[data-parsley-validate]").length&&t("[data-parsley-validate]").parsley()});var P=t({}),N=function(){u.warnOnce("Parsley's pubsub module is deprecated; use the 'on' and 'off' methods on parsley instances or window.Parsley")};function M(t,e){return t.parsleyAdaptedCallback||(t.parsleyAdaptedCallback=function(){var n=Array.prototype.slice.call(arguments,0);n.unshift(this),t.apply(e||P,n)}),t.parsleyAdaptedCallback}var A="parsley:";function O(t){return 0===t.lastIndexOf(A,0)?t.substr(A.length):t}return t.listen=function(t,e){var n;if(N(),"object"==typeof arguments[1]&&"function"==typeof arguments[2]&&(n=arguments[1],e=arguments[2]),"function"!=typeof e)throw new Error("Wrong parameters");window.Parsley.on(O(t),M(e,n))},t.listenTo=function(t,e,n){if(N(),!(t instanceof k||t instanceof b))throw new Error("Must give Parsley instance");if("string"!=typeof e||"function"!=typeof n)throw new Error("Wrong parameters");t.on(O(e),M(n))},t.unsubscribe=function(t,e){if(N(),"string"!=typeof t||"function"!=typeof e)throw new Error("Wrong arguments");window.Parsley.off(O(t),e.parsleyAdaptedCallback)},t.unsubscribeTo=function(t,e){if(N(),!(t instanceof k||t instanceof b))throw new Error("Must give Parsley instance");t.off(O(e))},t.unsubscribeAll=function(e){N(),window.Parsley.off(O(e)),t("form,input,textarea,select").each(function(){var n=t(this).data("Parsley");n&&n.off(O(e))})},t.emit=function(t,e){var n;N();var i=e instanceof k||e instanceof b,r=Array.prototype.slice.call(arguments,i?2:1);r.unshift(O(t)),i||(e=window.Parsley),(n=e).trigger.apply(n,l(r))},t.extend(!0,S,{asyncValidators:{default:{fn:function(t){return t.status>=200&&t.status<300},url:!1},reverse:{fn:function(t){return t.status<200||t.status>=300},url:!1}},addAsyncValidator:function(t,e,n,i){return S.asyncValidators[t]={fn:e,url:n||!1,options:i||{}},this}}),S.addValidator("remote",{requirementType:{"":"string",validator:"string",reverse:"boolean",options:"object"},validateString:function(e,n,i,r){var s,o,a={},l=i.validator||(!0===i.reverse?"reverse":"default");if(void 0===S.asyncValidators[l])throw new Error("Calling an undefined async validator: `"+l+"`");(n=S.asyncValidators[l].url||n).indexOf("{value}")>-1?n=n.replace("{value}",encodeURIComponent(e)):a[r.element.getAttribute("name")||r.element.getAttribute("id")]=e;var u=t.extend(!0,i.options||{},S.asyncValidators[l].options);s=t.extend(!0,{},{url:n,data:a,type:"GET"},u),r.trigger("field:ajaxoptions",r,s),o=t.param(s),void 0===S._remoteCache&&(S._remoteCache={});var c=S._remoteCache[o]=S._remoteCache[o]||t.ajax(s),d=function(){var e=S.asyncValidators[l].fn.call(r,c,n,i);return e||(e=t.Deferred().reject()),t.when(e)};return c.then(d,d)},priority:-1}),S.on("form:submit",function(){S._remoteCache={}}),d.prototype.addAsyncValidator=function(){return u.warnOnce("Accessing the method `addAsyncValidator` through an instance is deprecated. Simply call `Parsley.addAsyncValidator(...)`"),S.addAsyncValidator.apply(S,arguments)},S.addMessages("en",{defaultMessage:"This value seems to be invalid.",type:{email:"This value should be a valid email.",url:"This value should be a valid url.",number:"This value should be a valid number.",integer:"This value should be a valid integer.",digits:"This value should be digits.",alphanum:"This value should be alphanumeric."},notblank:"This value should not be blank.",required:"This value is required.",pattern:"This value seems to be invalid.",min:"This value should be greater than or equal to %s.",max:"This value should be lower than or equal to %s.",range:"This value should be between %s and %s.",minlength:"This value is too short. It should have %s characters or more.",maxlength:"This value is too long. It should have %s characters or fewer.",length:"This value length is invalid. It should be between %s and %s characters long.",mincheck:"You must select at least %s choices.",maxcheck:"You must select %s choices or fewer.",check:"You must select between %s and %s choices.",equalto:"This value should be the same."}),S.setLocale("en"),(new function(){var e=this,n=window||i;a(this,{isNativeEvent:function(t){return t.originalEvent&&!1!==t.originalEvent.isTrusted},fakeInputEvent:function(n){e.isNativeEvent(n)&&t(n.target).trigger("input")},misbehaves:function(n){e.isNativeEvent(n)&&(e.behavesOk(n),t(document).on("change.inputevent",n.data.selector,e.fakeInputEvent),e.fakeInputEvent(n))},behavesOk:function(n){e.isNativeEvent(n)&&t(document).off("input.inputevent",n.data.selector,e.behavesOk).off("change.inputevent",n.data.selector,e.misbehaves)},install:function(){if(!n.inputEventPatched){n.inputEventPatched="0.0.3";for(var i=["select",'input[type="checkbox"]','input[type="radio"]','input[type="file"]'],r=0;r<i.length;r++){var s=i[r];t(document).on("input.inputevent",s,{selector:s},e.behavesOk).on("change.inputevent",s,{selector:s},e.misbehaves)}}},uninstall:function(){delete n.inputEventPatched,t(document).off(".inputevent")}})}).install(),S},t.exports=r(n(0))}).call(e,n(0),n(8))}},[203]);
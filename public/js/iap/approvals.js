(window.webpackJsonp=window.webpackJsonp||[]).push([[44],{207:function(a,s,t){a.exports=t(208)},208:function(a,s,t){(function(a){a((function(){var s=sessionStorage.getItem("selectedCollectiontype")||helix.first;s?a("#collectiontype-select").val(s):s="";var t=a("#subsessions").DataTable({ajax:{url:"".concat(locale.baseurl,"/iap/ajax/subsession/").concat(s)},columns:[{data:"conducted"},{data:"facilitator"},{data:"participants"},{data:"signed",type:"bool-icon",render:function(a){var s=a?"check":"times";return'<span class="text-'.concat(a?"success":"danger",'"><i class="fa fa-').concat(s,'"></i></span>')}},{data:"approvedBy"},{data:"buttons",orderable:!1,render:function(a,s,t){var e="btn-primary",n="";return t.approval&&(e="btn-success",n='data-approval="'.concat(t.approval,'"')),'<div class="btn-group">\n                        <a href="'.concat(locale.baseurl,"/iap/approval/report/").concat(t.id,'"\n                            target="_blank"\n                            class="btn btn-sm btn-primary preview-btn">\n                            <i class="fa fa-search"></i>\n                        </a>\n                        <button class="btn btn-sm ').concat(e,' approve-btn"\n                            data-subsession="').concat(t.id,'" ').concat(n,'>\n                            <i class="fa fa-check"></i>\n                        </button>\n                    </div>')}}],order:[0,"desc"],autoWidth:!1,processing:!0,stateSave:!0});a(document).on("click",".approve-btn",(function(){if(!a(this).is(".disabled")){var s=a(this).prop("disabled",!0),e="/iap/ajax/deapprove/".concat(a(this).data("approval")),n="btn-primary",c="btn-success";a("i",this).prop("class","fas fa-circle-notch fa-spin"),a(this).hasClass("btn-primary")&&(e="/iap/ajax/approve/".concat(a(this).data("subsession")),n="btn-success",c="btn-primary"),a.ajax({url:e,method:"GET"}).done((function(e){s.addClass(n).removeClass(c);var o=e.approval?e.approval:null;s.data("approval",o);var i=s.parents("tr").children("td:nth-child(5)");t.cell(i).data(e.approvee),a("i",s).prop("class","fa fa-check"),s.prop("disabled",!1)})).fail((function(){s.prop("disabled",0).children("i").prop("class","fa fa-check")}))}})),a("#collectiontype-select").selectize().change((function(){sessionStorage.setItem("selectedCollectiontype",a(this).val()),t.ajax.url("".concat(locale.baseurl,"/iap/ajax/subsession/").concat(a(this).val())),t.ajax.reload()})),a("<button>").addClass("btn btn-primary btn-sm").prop("id","show-approved-btn").text(" ".concat(helix.lang.showApproved)).prepend(a("<i>").addClass("fa fa-check")).appendTo("#subsessions_filter").on("click",(function(){var s=1,e="";a(this).is(".active")&&(s=0,e="-"),t.column(4).search(e).draw(),sessionStorage.setItem("showApproved",s),a(this).toggleClass("active")}));var e=sessionStorage.getItem("showApproved")||0;parseInt(e,10)?a("#show-approved-btn").trigger("click"):t.column(4).search("-").draw()}))}).call(this,t(1))}},[[207,0,1]]]);
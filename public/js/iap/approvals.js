webpackJsonp([35],{201:function(a,s,e){a.exports=e(202)},202:function(a,s,e){(function(a){a(function(){var s=sessionStorage.getItem("selectedCollectiontype")||helix.first;s?a("#collectiontype-select").val(s):s="";var e=a("#subsessions").DataTable({ajax:{url:locale.baseurl+"/iap/ajax/subsession/"+s},columns:[{data:"conducted"},{data:"facilitator"},{data:"participants"},{data:"signed",type:"bool-icon",render:function(a){return'<span class="text-'+(a?"success":"danger")+'"><i class="fa fa-'+(a?"check":"times")+'"></i></span>'}},{data:"approvedBy"},{data:"buttons",orderable:!1,render:function(a,s,e){var t="btn-primary",n="";return e.approval&&(t="btn-success",n='data-approval="'+e.approval+'"'),'<div class="btn-group">\n                        <a href="'+locale.baseurl+"/iap/approval/report/"+e.id+'"\n                            target="_blank"\n                            class="btn btn-sm btn-primary preview-btn">\n                            <i class="fa fa-search"></i>\n                        </a>\n                        <button class="btn btn-sm '+t+' approve-btn"\n                            data-subsession="'+e.id+'" '+n+'>\n                            <i class="fa fa-check"></i>\n                        </button>\n                    </div>'}}],order:[0,"desc"],autoWidth:!1,processing:!0,stateSave:!0});a(document).on("click",".approve-btn",function(){if(!a(this).is(".disabled")){var s=a(this).prop("disabled",!0),t="/iap/ajax/deapprove/"+a(this).data("approval"),n="btn-primary",o="btn-success";a("i",this).prop("class","fas fa-circle-notch fa-spin"),a(this).hasClass("btn-primary")&&(t="/iap/ajax/approve/"+a(this).data("subsession"),n="btn-success",o="btn-primary"),a.ajax({url:t,method:"GET"}).done(function(t){s.addClass(n).removeClass(o);var r=t.approval?t.approval:null;s.data("approval",r);var i=s.parents("tr").children("td:nth-child(5)");e.cell(i).data(t.approvee),a("i",s).prop("class","fa fa-check"),s.prop("disabled",!1)}).fail(function(){s.prop("disabled",0).children("i").prop("class","fa fa-check")})}}),a("#collectiontype-select").selectize().change(function(){sessionStorage.setItem("selectedCollectiontype",a(this).val()),e.ajax.url(locale.baseurl+"/iap/ajax/subsession/"+a(this).val()),e.ajax.reload()}),a("<button>").addClass("btn btn-primary btn-sm").prop("id","show-approved-btn").text(" "+helix.lang.showApproved).prepend(a("<i>").addClass("fa fa-check")).appendTo("#subsessions_filter").on("click",function(){var s=1,t="";a(this).is(".active")&&(s=0,t="-"),e.column(4).search(t).draw(),sessionStorage.setItem("showApproved",s),a(this).toggleClass("active")});var t=sessionStorage.getItem("showApproved")||0;parseInt(t,10)?a("#show-approved-btn").trigger("click"):e.column(4).search("-").draw()})}).call(s,e(0))}},[201]);